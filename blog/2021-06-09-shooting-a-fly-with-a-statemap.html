<!DOCTYPE html>
<html lang="en-us">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
        <title>Shooting a fly with a statemap</title>
        <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAA+Pj4AP+ZmQCZmf8A/zOZACkpKQCZADMA/zaaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABVVVVVAAAABTERERNQAABTEVEVETUAAFMVURVRNQAFZTUzM1NWUFZmVVVVVWZlVmRmZmZmRmVWREImYiREZVZEQiIiJEdlVkQmYiZiRGVWZCZiJmJGZQVkImImIkZQBWZCIiIkZlAAVmQiIkZlAAAFVmZmZVAAAAAFVVVQAADwDwAA4AcAAMADAADAAwAAgAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIABAACAAQAAwAMAAOAHAAD4HwAA" />
        <meta name="description" content="A good blog">
        <meta property="og:title" content="Shooting a fly with a statemap" />
        <meta property="og:description" content="A good blog" />
        <meta property="og:type" content="website" />
        <meta property="og:locale" content="en_US" />
        <meta property="og:url" content="http://theotherjimmy.github.io/blog/" />
        <meta property="og:image" content="https://avatars.githubusercontent.com/u/685409?v=4" />
        <style>
body {
    font-family: Serif;
    font-size: 18px;
    margin: 0;
    background-color: #2e3440;
    color: #d8dee9;
    text-align: justify;
    text-justify: inter-word;
}

a:link {
    color: #81a1c1;
}

a:visited {
    color: #b48aed;
}

a:hover {
    background-color: #3b4252;
}

pre {
    overflow: auto;
}

main#content {
    margin: auto;
    padding-left: 2em;
    padding-right: 2em;
    max-width: 60em;
}

.navbar ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
    overflow: hidden;
}

.navbar li {
    float: left;
}

.navbar li a {
    display: block;
    text-align: center;
    padding: 0.5em 0.5em;
    text-decoration: none;
}

.flex-break {
  flex-basis: 100%;
  height: 0;
  display: none;
}

.list-posts .list-title {
  text-align: center;
}
.list-posts .posts-year {
  margin-top: 70px;
}
.list-posts .post-title {
  margin: 18px 0 0 15px;
}
.list-posts a {
  text-decoration: none;
}
.post-title .post-link,
.post-title .post-date {
  display: inline-block;
}
.post-title .post-link {
  width: 80%;
}
.tags-list .post-tags {
  margin-top: 50px;
}
.tags-list .post-tags .post-tag {
  margin: 2px 5px;
  padding: 0;
}
.tags-list .post-tags .post-tag a {
  border-radius: inherit;
  padding: 0;
}
.tags-list .post-tags .post-tag a div {
  display: inline-block;
}
.tags-list .post-tags .post-tag a .tag-name {
  padding: 5px 8px;
}
.tags-list .post-tags .post-tag a .tag-posts-count {
  background-color: var(--light-secondary-color);
  border-radius: inherit;
  color: inherit;
  opacity: 0.8;
  padding: 6px;
  position: relative;
  z-index: 0;
}
.tags-list .post-tags .post-tag:hover a .tag-posts-count {
  background-color: var(--light-text-color);
  color: rgb(var(--light-primary-color));
}

        </style>
    </head>
    <body>
        <header>
<nav class="navbar" role="navigation"><ul><li><a href="/blog/index.html">Blog</a></li>
<li style="float:right"><a href="https://github.com/theotherjimmy"><img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJmZWF0aGVyIGZlYXRoZXItZ2l0aHViIj48cGF0aCBkPSJNOSAxOWMtNSAxLjUtNS0yLjUtNy0zbTE0IDZ2LTMuODdhMy4zNyAzLjM3IDAgMCAwLS45NC0yLjYxYzMuMTQtLjM1IDYuNDQtMS41NCA2LjQ0LTdBNS40NCA1LjQ0IDAgMCAwIDIwIDQuNzcgNS4wNyA1LjA3IDAgMCAwIDE5LjkxIDFTMTguNzMuNjUgMTYgMi40OGExMy4zOCAxMy4zOCAwIDAgMC03IDBDNi4yNy42NSA1LjA5IDEgNS4wOSAxQTUuMDcgNS4wNyAwIDAgMCA1IDQuNzdhNS40NCA1LjQ0IDAgMCAwLTEuNSAzLjc4YzAgNS40MiAzLjMgNi42MSA2LjQ0IDdBMy4zNyAzLjM3IDAgMCAwIDkgMTguMTNWMjIiPjwvcGF0aD48L3N2Zz4=" /></a></li>
</nav>
        </header>
        <main id="content">
        <h1>Shooting a fly with a statemap</h1>
<p>My keyboard is bouncing as I type this.
My new keyboard.
My favorite keyboard.
The DMOTE.</p>
<p>It's a little frustrating to have a great time typing away only to have it
crash to a grinding halt as you have to pause, be reminded of your failure as a
firmware engineer, and go back to delete an extra 'a' or space character.</p>
<p>I have to fix this; I have to destroy the bug with extreme prejudice.
I must know what the problem is; I need to see the whites of its eyes.
Practically, I have to create a summary that would allow me to see the problem.</p>
<p>No such summary's are coming.
I guess I'll get on with gathering the data, without agreggating.
It can't be that much code, and surely doing it will allow me to see the summary
I need.</p>
<h1>Fly spotting</h1>
<p>The first step to spot a fly is to keep you eyes peeled.
In my case, it's to build observability into firmware.</p>
<p>Pondering on this for a few days, I settled on a pretty simple technique:
I would dump all of the debouncer state and triggers to memory and slurp them
out with a custom debugger-based tool.</p>
<p>I wonder, to myself, if this would actually work.
For it to work, I need at least a few thing:</p>
<ul>
<li>A debugger-based tool for slurping out of RAM.</li>
<li>A method for putting state into a RAM buffer that the debugger-tool could
read out at a reasonable pace.</li>
</ul>
<p>Tackling them in the order I wrote them, I build the tool.
I reach for probe-rs, as I like writing Rust, even for small tools, and as I
had heard good things about it.</p>
<p>I write a few test programs, confirming that I can slurp memory from the left
side firmware, because if that one goes down, I can restart it without taking
down the whole keyboard.</p>
<p>&quot;It works. I can dump RAM without interrupting the keyboard.&quot; 
I say quietly to myself.
Well that solves the first problem, I guess. 
On to the next problem: that pesky protocol.</p>
<p>&quot;20KB, in 800ms?&quot; I had included benchmarks in the program just to be sure
things did not take too long.</p>
<p>I run the test program several more times to be sure on the 800ms number.
It was surprisingly stable, varying by no more than half a milisecond in either
direction.
Then I use a calculator in my terminal to compute the full bit rate.</p>
<p>&quot;25600 bytes per second. It's not fast, but maybe I'll be able to make it
work.&quot; I think to myself. &quot;How much throughput do I really need though?&quot;</p>
<p>So I started doing the math, and writing it out in a comment in the code:</p>
<pre><code class="language-rust"><pre style="background-color:#2b303b;">
<span style="color:#65737e;">// The debugger reads 20480 bytes in 800ms (it&#39;s very stable too), or 25.6kbps.
</span><span style="color:#65737e;">// Copying all samples, 5kilohz * 6 bytes/sample, takes 30kbps. So we&#39;re going
</span><span style="color:#65737e;">// to have to come up with another strategy.
</span><span style="color:#65737e;">//
</span><span style="color:#65737e;">// I&#39;m hoping that I can record all relevant events, that is all state changes
</span><span style="color:#65737e;">// in the debouncer, and all emitted key events. I&#39;ll have to have something
</span><span style="color:#65737e;">// that contains row col and the state. It would be really convenient if it fit
</span><span style="color:#65737e;">// in an integer number of 32bit transfers.
</span><span style="color:#65737e;">//
</span><span style="color:#65737e;">// I estimate that with the structure in shared-types, being a u64 in size, that
</span><span style="color:#65737e;">// the debugger would be able to read a maximum of 3200 of them in  a single
</span><span style="color:#65737e;">// second. I wrote a test program to test this theory, and was able to get about
</span><span style="color:#65737e;">// 3160 records per second.
</span><span style="color:#65737e;">//
</span><span style="color:#65737e;">// In other words, if you manage to trigger more than about 3000 events per
</span><span style="color:#65737e;">// second for longer than about 1/3 of a second, it will overflow and you will
</span><span style="color:#65737e;">// lose events. Don&#39;t type that fast.
</span></pre>
</code></pre>
<p>Well, that settled that. Now to create that structure that I gave myself a
<code>u64</code> for, how generous of me.</p>
<p>Well, I have to use a u32 for the timestamp, since I won't be able to rely on
every sample being present.
And I have to have the row and column numbers, which are most easily
represented as u8s.
I also need the state that the debouncer is in, and maybe the output from the
debouncer, or the trigger, as I have taken to calling it.</p>
<p>I represent the debouncer state and the trigger as C-like enums with
<code>#[repr(u8)]</code> to be sure they fit where they're supposed to, and I make the
obvious struct from the above description, with <code>#[repr(C)]</code> so that its layout
is reliable.</p>
<p>Moving right along, I modify my keyboard-scanning-iterator-structure to accept
a Log, what I decide to call my block of memory used for observability
purposes.
This presents some perils, but I get through them.
Suffice it to say that when your types are <code>Copy</code> sometimes they copy
themselves, and the original is no longer updated.</p>
<p>Excited by my progress, I go right to bed, because it's now my bedtime.</p>
<h1>Making sense of fly data</h1>
<p>Today the idea struck me: can I use a statemap to solve this problem?
It would probably allow me to be able to <em>see</em> the bouncing in a very real way,
other than being infurated by the double letters and symbols that taunt you
until you delete them from your view.
But they remind you of your failings as a firmwware engineer just the same, 
even when they're not there.</p>
<p>Anyway, I should get on writing this thing now.</p>
<p>I flounder around fidling with elf parsers until I'm able to get someting
working with ddbug_parser that allows me to grab the location of <code>THELOG</code>
(there can only be one) from the binary I flashed to the left side of my
keyboard last night.
Now I can really begin to make progress on this statemap thing, after I start
dumping the KeyState structs from RAM on the MCU.</p>
<p>I get on with it then.</p>
<p>Taking many short cuts, it's a hacky tool for a very specific purpose, okay?,
I transmute memory and magic happens: I start dumping KeyStates.</p>
<p>Well, I suppose I'll install the statemap tool then.
And it's not in Nixpkgs, a submodule it is.
It builds and runs without issues.</p>
<p>So I start reformatting the KeyState data as JSON, trying to conform to the
format that the statemap tool requires.
It's very picky.
It even wants a sorted list of the input.
very picky.
That's okay, I can sort lists, or well I can instruct my computer to sort.</p>
<p>Or maybe, I can do one better by slurping them <em>and</em> the MCU's internal head
offest.
I'll read from head until the end, where the oldest data lies, then read from 
the beginning, at offset 0, until, but not including, head, where the newer
data lies.</p>
<p>To my surprise (though it should not be), this works; I have a statemap.
What a mess.
Everything is so tiny!
So it turns out that keyboards have a lot of time where they're just waiting
to be typed on, and when things start happening, it's a storm of many keys
being pressed, states being transitioned and then quiet again, ending as 
abruptly as it started.
In retrospect, this should have been more obvious.</p>
<h1>Finding a fly</h1>
<p>Well it would be really hard to just spot a double key-press-release-sequence
in the storm of data.
Luckily, this is very reproduceable, so I make it happen again.</p>
<p>Now I make another statemap, after having alternated the a key and the space
key until a double appeared.</p>
<p>It was the spacae that did it first.</p>
<p>Careful not to touch many other keys, I slurped out the state data and made yet
another statemap.
Finding the alternating keys was easy so I zoomed in on them:
<br />
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CiAgICAgICAgICAgIDwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAgICAgICAgICAgICAgICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgogICAgICAgICAgICA8c3ZnIHdpZHRoPSIxMjUwIiBoZWlnaHQ9IjM4NSIKICAgICAgICAgICAgICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgICAgICAgICAgICAgIHZlcnNpb249IjEuMSIKICAgICAgICAgICAgICAgIG9ubG9hZD0iaW5pdChldnQpIj4KPGRlZnM+CjxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vZWNtYXNjcmlwdCI+PCFbQ0RBVEFbCnZhciBnbG9iYWxzID0gewogICJzdHJpcEhlaWdodCI6IDEwLAogICJsZWdlbmRXaWR0aCI6IDEzOCwKICAidGFnV2lkdGgiOiAyNTAsCiAgInN0cmlwV2lkdGgiOiA4NjIsCiAgImJhY2tncm91bmQiOiAiI2YwZjBmMCIsCiAgInNvcnRieSI6IG51bGwsCiAgInN0YWNrc29ydGJ5IjogbnVsbCwKICAiYmVnaW4iOiA1Mzk3NDY5OTk5OTksCiAgImVuZCI6IDU0NjE2Mjk5OTk5OSwKICAiZW50aXR5UHJlZml4IjogInN0YXRlbWFwLWVudGl0eS0iLAogICJwaXhlbEhlaWdodCI6IDMwMCwKICAicGl4ZWxXaWR0aCI6IDg2MiwKICAidG90YWxIZWlnaHQiOiAzODUsCiAgInRpbWVXaWR0aCI6IDY0MTYwMDAwMDAsCiAgImxtYXJnaW4iOiAxMzgsCiAgInRtYXJnaW4iOiA2MCwKICAic21hcmdpbiI6IDEwLAogICJzdGF0ZXMiOiBbCiAgICB7CiAgICAgICJuYW1lIjogInN0YWJsZS1yZWxlYXNlIiwKICAgICAgInZhbHVlIjogMCwKICAgICAgImNvbG9yIjogIndoaXRlIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiYm91bmNpbmctcmVsLXRvLXByZSIsCiAgICAgICJ2YWx1ZSI6IDEsCiAgICAgICJjb2xvciI6ICJibHVlIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiYm91bmNpbmctcmVsLXRvLXJlbCIsCiAgICAgICJ2YWx1ZSI6IDIsCiAgICAgICJjb2xvciI6ICJicm93biIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImVtaXQtcmVsZWFzZSIsCiAgICAgICJ2YWx1ZSI6IDMsCiAgICAgICJjb2xvciI6ICJ3aGl0ZSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogInN0YWJsZS1wcmVzcyIsCiAgICAgICJ2YWx1ZSI6IDQsCiAgICAgICJjb2xvciI6ICJncmV5IgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiYm91bmNpbmctcHJlLXRvLXByZSIsCiAgICAgICJ2YWx1ZSI6IDUsCiAgICAgICJjb2xvciI6ICJ5ZWxsb3ciCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJib3VuY2luZy1wcmUtdG8tcmVsIiwKICAgICAgInZhbHVlIjogNiwKICAgICAgImNvbG9yIjogIm9yYW5nZSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImVtaXQtcHJlc3MiLAogICAgICAidmFsdWUiOiA3LAogICAgICAiY29sb3IiOiAiYmxhY2siCiAgICB9CiAgXSwKICAic3RhcnQiOiBbCiAgICAwLAogICAgMTgzNTY0ODI3MjAwMDAwCiAgXSwKICAiZW50aXR5S2luZCI6ICJFbnRpdHkiLAp9Ci8qCiAqIENvcHlyaWdodCAyMDE4LCBKb3llbnQsIEluYy4KICovCgovKgogKiBUaGlzIGZpbGUgaXMgZHJvcHBlZCBpbnRvIHRoZSBnZW5lcmF0ZWQgU1ZHIC0tIGFuZCBpZiB5b3UncmUgbG9va2luZyBhdAogKiB0aGUgZ2VuZXJhdGVkIFNWRyBhbmQgd29uZGVyaW5nIHdoZXJlIHRoaXMgY29tZXMgZnJvbSwgbG9vayBmb3IKICogc3RhdGVtYXAtc3ZnLmpzIGluIHN0YXRlbWFwJ3Mgc3JjIGRpcmVjdG9yeS4KICovCgp2YXIgZ190cmFuc01hdHJpeCA9IFsxLCAwLCAwLCAxLCAwLCAwXTsJCS8qIHRyYW5zZm9ybSBvZiBzdGF0ZW1hcCAqLwp2YXIgZ19zdmdEb2M7CQkJCQkvKiBvdXIgU1ZHIGRvY3VtZW50ICovCnZhciBnX29mZnNldDsJCQkJCS8qIHggb2Zmc2V0IG9mIHN0YXRlbWFwICovCnZhciBnX3RpbWVsYWJlbDsJCQkJLyogbGFiZWwgZm9yIHRpbWUgc3Bhbm5lZCAqLwp2YXIgZ190aW1lYmFyOwkJCQkJLyogdGltZWJhciwgaWYgYW55ICovCnZhciBnX3N0YXRlYmFyOwkJCQkJLyogc3RhdGViYXIsIGlmIGFueSAqLwp2YXIgZ19oZWlnaHQ7CQkJCQkvKiBwaXhlbCBoZWlnaHQgb2Ygc3RhdGVtYXAgKi8KdmFyIGdfd2lkdGg7CQkJCQkvKiBwaXhlbCB3aWR0aCBvZiBzdGF0ZW1hcCAqLwp2YXIgZ19zdGF0ZXNlbDsJCQkJCS8qIHN0YXRlIHNlbGVjdGlvbiwgaWYgYW55ICovCnZhciBnX3RhZ3NlbDsJCQkJCS8qIHRhZyBzZWxlY3Rpb24sIGlmIGFueSAqLwp2YXIgZ190YWd2YWxzZWw7CQkJCS8qIHRhZyB2YWwgc2VsZWN0aW9uLCBpZiBhbnkgKi8KCnZhciBnX3N0YXRlbWFwcyA9IFtdOwkJCQkvKiBhcnJheSBvZiBzdGF0ZW1hcHMgKi8KCnZhciB0aW1ldW5pdHMgPSBmdW5jdGlvbiAodGltZXZhbCkKewoJdmFyIGksIHJlbTsKCXZhciBzdWZmaXhlcyA9IFsgJ25zJywgJ868cycsICdtcycsICdzJyBdOwoKCWlmICh0aW1ldmFsID09PSAwKQoJCXJldHVybiAoJzAnKTsKCglmb3IgKGkgPSAwOyAodGltZXZhbCA+IDEwMDAgfHwgdGltZXZhbCA8IC0xMDAwKSAmJgoJICAgIGkgPCBzdWZmaXhlcy5sZW5ndGggLSAxOyBpKyspCgkJdGltZXZhbCAvPSAxMDAwOwoKCXJlbSA9IE1hdGguZmxvb3IoKHRpbWV2YWwgLSBNYXRoLmZsb29yKHRpbWV2YWwpKSAqIDEwMDApOwoKCXJldHVybiAoTWF0aC5mbG9vcih0aW1ldmFsKSArICcuJyArCgkgICAgKHJlbSA8IDEwMCA/ICcwJyA6ICcnKSArIChyZW0gPCAxMCA/ICcwJyA6ICcnKSArIHJlbSArCgkgICAgc3VmZml4ZXNbaV0pOwp9OwoKdmFyIHRpbWVGcm9tTWFwWCA9IGZ1bmN0aW9uIChtYXBYKQp7Cgl2YXIgYmFzZSwgb2ZmczsKCXZhciB0aW1lV2lkdGggPSBnbG9iYWxzLnRpbWVXaWR0aDsKCgkvKgoJICogT3VyIGJhc2UgKGluIG5hbm9zZWNvbmRzKSBpcyBvdXIgWCBvZmZzZXQgaW4gdGhlIHRyYW5zZm9ybWF0aW9uCgkgKiBtYXRyaXggYXMgYSByYXRpbyBvZiBvdXIgdG90YWwgKHNjYWxlZCkgd2lkdGgsIHRpbWVzIG91ciB0aW1lV2lkdGguCgkgKi8KCWJhc2UgPSAoLWdfdHJhbnNNYXRyaXhbNF0gLyAoZ190cmFuc01hdHJpeFswXSAqIGdfd2lkdGgpKSAqIHRpbWVXaWR0aDsKCgkvKgoJICogT3VyIG9mZnNldCAoaW4gbmFub3NlY29uZHMpIGlzIHRoZSBYIG9mZnNldCB3aXRoaW4gdGhlIHN0YXRlbWFwCgkgKiBhcyBhIHJhdGlvIG9mIHRoZSBzdGF0ZW1hcCB3aWR0aCwgdGltZXMgdGhlIG51bWJlciBvZiBuYW5vc2Vjb25kcwoJICogdmlzaWJsZSBpbiB0aGUgc3RhdGVtYXAgKHdoaWNoIGl0c2VsZiBpcyB0aGUgdGltZVdpZHRoIGRpdmlkZWQgYnkKCSAqIG91ciBzY2FsaW5nIGZhY3RvcikuCgkgKi8KCW9mZnMgPSAobWFwWCAvIGdfd2lkdGgpICogKHRpbWVXaWR0aCAvIGdfdHJhbnNNYXRyaXhbMF0pOwoKCXJldHVybiAoYmFzZSArIG9mZnMpOwp9OwoKdmFyIHRpbWVUb01hcFggPSBmdW5jdGlvbiAodGltZSkKewoJLyoKCSAqIFdlIHRha2UgdGhlIHJhdGlvIG9mIHRoZSB0aW1lIG9mIHRoZSB0aW1lYmFyIG9mIHRoZSB0b3RhbCB0aW1lCgkgKiB3aWR0aCB0aW1lcyB0aGUgd2lkdGggdGltZXMgdGhlIHNjYWxlLCBhbmQgdGhlbiBhZGQgdGhhdCB0byB0aGUKCSAqIFggb2Zmc2V0IGluIHRoZSB0cmFuc2Zvcm1hdGlvbiBtYXRyaXguCgkgKi8KCXJldHVybiAoKCh0aW1lIC8gZ2xvYmFscy50aW1lV2lkdGgpICogZ193aWR0aCAqCgkgICAgZ190cmFuc01hdHJpeFswXSkgKyBnX3RyYW5zTWF0cml4WzRdKTsKfTsKCnZhciB0aW1lVG9UZXh0ID0gZnVuY3Rpb24gKHRpbWUpCnsKCXZhciB0OwoKCWlmIChnX3RyYW5zTWF0cml4WzBdID09PSAxICYmIGdsb2JhbHMuYmVnaW4gPT09IDApIHsKCQl0ID0gJ29mZnNldCA9ICcgKyB0aW1ldW5pdHModGltZSk7Cgl9IGVsc2UgewoJCXQgPSAnb2Zmc2V0ID0gJyArIHRpbWV1bml0cyh0aW1lKSArICcsICcgKwoJCSAgICB0aW1ldW5pdHModGltZSArIGdsb2JhbHMuYmVnaW4pICsgJyBvdmVyYWxsJzsKCX0KCglpZiAoZ2xvYmFscy5zdGFydCkgewoJCXZhciBzID0gZ2xvYmFscy5zdGFydFswXSArCgkJICAgICh0aW1lICsgZ2xvYmFscy5zdGFydFsxXSkgLyAxMDAwMDAwMDAwOwoKCQl0ICs9ICcgKEVwb2NoICsgJyArIE1hdGguZmxvb3IocykgKyAncyknOwoJfQoKCXJldHVybiAodCk7Cn07Cgp2YXIgdGltZVNldFNwYW5MYWJlbCA9IGZ1bmN0aW9uICgpCnsKCXZhciB0ID0gJ3NwYW4gPSAnICsgdGltZXVuaXRzKGdsb2JhbHMudGltZVdpZHRoIC8gZ190cmFuc01hdHJpeFswXSk7CgoJaWYgKGdfdHJhbnNNYXRyaXhbMF0gIT0gMSB8fCBnbG9iYWxzLmJlZ2luICE9PSAwKQoJCXQgKz0gJzsgJyArIHRpbWVUb1RleHQodGltZUZyb21NYXBYKDApKTsKCglnX3RpbWVsYWJlbC50ZXh0Q29udGVudCA9IHQ7Cn07Cgp2YXIgaW5pdFN0YXRlbWFwID0gZnVuY3Rpb24gKHN0YXRlbWFwLCBlbGVtLCBwb3NpdGlvbikKewoJdmFyIGksIGhpZ2hsaWdodDsKCXZhciBwcmVmaXggPSBnbG9iYWxzLmVudGl0eVByZWZpeCArIHN0YXRlbWFwICsgJy0nOwoKCWdfc3RhdGVtYXBzW3N0YXRlbWFwXS5lbGVtID0gZWxlbTsKCWdfc3RhdGVtYXBzW3N0YXRlbWFwXS5wb3NpdGlvbiA9IHBvc2l0aW9uOwoJZ19zdGF0ZW1hcHNbc3RhdGVtYXBdLm5lbnRpdGllcyA9IDA7CgoJLyoKCSAqIEl0ZXJhdGUgb3ZlciB0aGlzIHN0YXRlbWFwJ3MgY2hpbGRyZW4sIGxvb2tpbmcgZm9yIGVudGl0aWVzLgoJICovCglmb3IgKGkgPSAwOyBpIDwgZWxlbS5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7CgkJdmFyIGlkID0gZWxlbS5jaGlsZE5vZGVzW2ldLmlkLCBlbnRpdHk7CgoJCWlmICghaWQgfHwgaWQuaW5kZXhPZihwcmVmaXgpICE9PSAwKQoJCQljb250aW51ZTsKCgkJZW50aXR5ID0gewoJCQluYW1lOiBpZC5zdWJzdHIocHJlZml4Lmxlbmd0aCksCgkJCWVsZW1lbnQ6IGVsZW0uY2hpbGROb2Rlc1tpXSwKCQkJcG9zaXRpb246IHBvc2l0aW9uKyssCgkJCXN0YXRlbWFwOiBzdGF0ZW1hcAoJCX07CgoJCWVudGl0eS5kZXNjcmlwdGlvbiA9CgkJICAgIGdfc3RhdGVtYXBzW3N0YXRlbWFwXS5lbnRpdGllc1tlbnRpdHkubmFtZV0uZGVzY3JpcHRpb247CgoJCWdfZW50aXRpZXNbaWRdID0gZW50aXR5OwoJCWdfc3RhdGVtYXBzW3N0YXRlbWFwXS5uZW50aXRpZXMrKzsKCX0KCgkvKgoJICogRGV0ZXJtaW5lIHRoZSBsZWdlbmQgdGhhdCB0aGlzIHN0YXRlbWFwIGlzIHVzaW5nLgoJICovCglmb3IgKGkgPSBzdGF0ZW1hcDsgaSA+PSAwOyBpLS0pIHsKCQlpZiAoZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLWxlZ2VuZC0nICsgaSArICctMCcpKSB7CgkJCWdfc3RhdGVtYXBzW3N0YXRlbWFwXS5sZWdlbmQgPSBpOwoJCQlicmVhazsKCQl9Cgl9CgoJY29uc29sZS5hc3NlcnQoaSA+PSAwKTsKCgkvKgoJICogRHluYW1pY2FsbHkgY2hhbmdlIHRoZSBzdHlsaW5nIG9mIHRoZSBoaWdobGlnaHQgcmVjdGFuZ2xlLgoJICovCgloaWdobGlnaHQgPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZCgnc3RhdGVtYXAtJyArCgkgICAgc3RhdGVtYXAgKyAnLWhpZ2hsaWdodCcpOwoJaGlnaGxpZ2h0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLWhpZ2hsaWdodCcpOwoKCXJldHVybiAocG9zaXRpb24pOwp9OwoKdmFyIGluaXQgPSBmdW5jdGlvbiAoZXZ0KQp7Cgl2YXIgaSA9IDAsIHBvc2l0aW9uID0gMCwgc3RhdGVtYXA7CgoJZ19zdmdEb2MgPSBldnQudGFyZ2V0Lm93bmVyRG9jdW1lbnQ7CglnX2VudGl0aWVzID0gW107CgoJd2hpbGUgKChzdGF0ZW1hcCA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC0nICsgaSkpICE9IG51bGwpCgkJcG9zaXRpb24gPSBpbml0U3RhdGVtYXAoaSsrLCBzdGF0ZW1hcCwgcG9zaXRpb24pOwoKCWdfaGVpZ2h0ID0gZ2xvYmFscy5waXhlbEhlaWdodDsKCWdfd2lkdGggPSBnbG9iYWxzLnBpeGVsV2lkdGg7CgoJZ19vZmZzZXQgPSBldnQudGFyZ2V0LmdldEF0dHJpYnV0ZU5TKG51bGwsICd3aWR0aCcpIC0KCSAgICAoZ193aWR0aCArIGdsb2JhbHMudGFnV2lkdGgpOwoKCWdfdGltZWxhYmVsID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLXRpbWVsYWJlbCcpOwoJdGltZVNldFNwYW5MYWJlbCgpOwoKCWdfdGltZWJhciA9IHVuZGVmaW5lZDsKfTsKCnZhciBlbnRpdHlGb3JFYWNoRGF0dW0gPSBmdW5jdGlvbiAoZW50aXR5LCB0aW1lLCBldGltZSwgZnVuYykKewoJdmFyIGRhdGEgPSBnX3N0YXRlbWFwc1tlbnRpdHkuc3RhdGVtYXBdLmRhdGFbZW50aXR5Lm5hbWVdOwoKCXZhciBpZHgsIGxlbmd0aCA9IGRhdGEubGVuZ3RoOwoJdmFyIGZsb29yID0gMDsKCXZhciBjZWlsID0gbGVuZ3RoOwoJdmFyIGRhdHVtLCB0LCBzcGFuOwoKCWlmIChsZW5ndGggPT09IDAgfHwgKGRhdGFbMF0udCA+IHRpbWUgJiYgIWV0aW1lKSkKCQlyZXR1cm47CgoJaWYgKGRhdGFbMF0udCA+IHRpbWUpIHsKCQlpZHggPSAwOwoJfSBlbHNlIHsKCQkvKgoJCSAqIEJpbmFyeSBzZWFyY2ggb3VyIGRhdGEgdW50aWwgd2UgZmluZCBhIGRhdHVtIHRoYXQgY29udGFpbnMKCQkgKiB0aGUgc3RhcnQgb2Ygb3VyIHRpbWUgcmFuZ2UuCgkJICovCgkJZm9yICg7OykgewoJCQlpZHggPSBmbG9vciArIE1hdGguZmxvb3IoKGNlaWwgLSBmbG9vcikgLyAyKTsKCgkJCWlmIChkYXRhW2lkeF0udCA+IHRpbWUpIHsKCQkJCWNlaWwgPSBpZHg7CgkJCQljb250aW51ZTsKCQkJfQoKCQkJaWYgKGlkeCArIDEgPT0gbGVuZ3RoIHx8IGRhdGFbaWR4ICsgMV0udCA+IHRpbWUpCgkJCQlicmVhazsKCgkJCWZsb29yID0gaWR4OwoJCX0KCX0KCgkvKgoJICogSWYgd2UgZG9uJ3QgaGF2ZSBhIHNwZWNpZmllZCBldGltZSwgd2UgaGF2ZSBmb3VuZCB0aGUgZGF0dW0gdGhhdAoJICogY29udGFpbnMgdGhlIHRpbWU7IGp1c3QgY2FsbCBvdXIgZnVuY3Rpb24gYW5kIHJldHVybi4KCSAqLwoJaWYgKCFldGltZSkgewoJCWZ1bmMoZGF0YVtpZHhdLCBpZHgsIDEpOwoJCXJldHVybjsKCX0KCgkvKgoJICogTm93IHdlJ3JlIGdvaW5nIHRvIGl0ZXJhdGUgZm9yd2FyZCwgY2FsbGluZyBvdXIgZnVuY3Rpb24gdW50aWwgd2UKCSAqIGdldCBwYXN0IG91ciBzcGVjaWZpZWQgZXRpbWUuCgkgKi8KCWZvciAoOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CgkJZGF0dW0gPSBkYXRhW2lkeF07CgoJCWlmIChkYXR1bS50ID4gZXRpbWUpCgkJCXJldHVybjsKCgkJaWYgKCh0ID0gZGF0dW0udCkgPCB0aW1lKQoJCQl0ID0gdGltZTsKCgkJaWYgKGlkeCArIDEgPT0gbGVuZ3RoIHx8IGRhdGFbaWR4ICsgMV0udCA+IGV0aW1lKSB7CgkJCS8qCgkJCSAqIFRoaXMgZGF0dW0gY29udGFpbnMgdGhlIGVuZCBvZiB0aGUgcmFuZ2U7IG91ciBzcGFuCgkJCSAqIGlzIG91ciBldGltZSBtaW51cyB0aGlzIGRhdHVtJ3Mgc3RhcnQgdGltZSAob3Igb3VyCgkJCSAqIHNwZWNpZmllZCB0aW1lLCB3aGljaGV2ZXIgaXMgZ3JlYXRlcikuCgkJCSAqLwoJCQlzcGFuID0gZXRpbWUgLSB0OwoJCX0gZWxzZSB7CgkJCS8qCgkJCSAqIFRoZSBlbmQgb2YgdGhlIGRhdHVtIGlzIGNvdmVyZWQgYnkgdGhlIHJhbmdlOyBvdXIKCQkJICogc3BhbiBpcyB0aGUgdGltZSB3aWR0aCBvZiB0aGUgZGF0dW0uCgkJCSAqLwoJCQlzcGFuID0gZGF0YVtpZHggKyAxXS50IC0gdDsKCQl9CgoJCWZ1bmMoZGF0dW0sIGlkeCwgc3Bhbik7Cgl9Cn07Cgp2YXIgZW50aXR5RGF0dW0gPSBmdW5jdGlvbiAoZW50aXR5LCBpZHgpCnsKCXZhciBkYXRhID0gZ19zdGF0ZW1hcHNbZW50aXR5LnN0YXRlbWFwXS5kYXRhW2VudGl0eS5uYW1lXTsKCXZhciBkYXR1bSA9IGRhdGFbaWR4XTsKCXZhciBydmFsID0geyB0aW1lOiBkYXR1bS50IH07CgoJaWYgKGRhdHVtLnMgaW5zdGFuY2VvZiBPYmplY3QpIHsKCQlydmFsLnN0YXRlcyA9IGRhdHVtLnM7Cgl9IGVsc2UgewoJCXJ2YWwuc3RhdGUgPSBkYXR1bS5zOwoJfQoKCWlmIChpZHggKyAxIDwgZGF0YS5sZW5ndGgpIHsKCQlydmFsLmV0aW1lID0gZGF0YVtpZHggKyAxXS50OwoJfSBlbHNlIHsKCQlydmFsLmV0aW1lID0gZ2xvYmFscy50aW1lV2lkdGggKyBnbG9iYWxzLmJlZ2luOwoJfQoKCXJldHVybiAocnZhbCk7Cn07Cgp2YXIgZW50aXR5QnJlYWtkb3duID0gZnVuY3Rpb24gKGVudGl0eSwgdGltZSwgZXRpbWUpCnsKCXZhciBkYXRhID0gZ19zdGF0ZW1hcHNbZW50aXR5LnN0YXRlbWFwXS5kYXRhW2VudGl0eS5uYW1lXTsKCXZhciBydmFsID0ge307CgoJdmFyIGlkeCwgbGVuZ3RoID0gZGF0YS5sZW5ndGg7Cgl2YXIgZmxvb3IgPSAwOwoJdmFyIGNlaWwgPSBsZW5ndGg7Cgl2YXIgZGF0dW0sIHQsIHNwYW4sIHN0YXRlOwoKCXRpbWUgKz0gZ19zdGF0ZW1hcHNbZW50aXR5LnN0YXRlbWFwXS5vZmZzZXQ7CgoJaWYgKGxlbmd0aCA9PT0gMCB8fCBkYXRhWzBdLnQgPiB0aW1lKQoJCXJldHVybiAoe30pOwoKCS8qCgkgKiBCaW5hcnkgc2VhcmNoIG91ciBkYXRhIHVudGlsIHdlIGZpbmQgYSBkYXR1bSB0aGF0IGNvbnRhaW5zIHRoZQoJICogc3BlY2lmaWVkIHRpbWUuCgkgKi8KCWZvciAoOzspIHsKCQlpZHggPSBmbG9vciArIE1hdGguZmxvb3IoKGNlaWwgLSBmbG9vcikgLyAyKTsKCgkJaWYgKGRhdGFbaWR4XS50ID4gdGltZSkgewoJCQljZWlsID0gaWR4OwoJCQljb250aW51ZTsKCQl9CgoJCWlmIChpZHggKyAxID09IGxlbmd0aCB8fCBkYXRhW2lkeCArIDFdLnQgPiB0aW1lKQoJCQlicmVhazsKCgkJZmxvb3IgPSBpZHg7Cgl9CgoJLyoKCSAqIElmIHdlIGRvbid0IGhhdmUgYSBzcGVjaWZpZWQgZXRpbWUsIHdlIHdhbnQgdG8ganVzdCByZXR1cm4gdGhlIHN0YXRlCgkgKiBicmVha2Rvd24gYXQgdGhlIHNwZWNpZmllZCB0aW1lLgoJICovCglpZiAoIWV0aW1lKSB7CgkJZGF0dW0gPSBkYXRhW2lkeF07CgoJCWlmIChkYXR1bS5zIGluc3RhbmNlb2YgT2JqZWN0KQoJCQlyZXR1cm4gKGRhdHVtLnMpOwoKCQlydmFsW2RhdHVtLnNdID0gMS4wOwoKCQlyZXR1cm4gKHJ2YWwpOwoJfQoKCS8qCgkgKiBOb3cgd2UncmUgZ29pbmcgdG8gaXRlcmF0ZSBmb3J3YXJkIHVudGlsIHdlIGdldCBwYXN0IG91ciBzcGVjaWZpZWQKCSAqIGV0aW1lLgoJICovCglmb3IgKDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewoJCWRhdHVtID0gZGF0YVtpZHhdOwoKCQlpZiAoZGF0dW0udCA+IGV0aW1lKQoJCQlicmVhazsKCgkJaWYgKCh0ID0gZGF0dW0udCkgPCB0aW1lKQoJCQl0ID0gdGltZTsKCgkJaWYgKGlkeCArIDEgPT0gbGVuZ3RoIHx8IGRhdGFbaWR4ICsgMV0udCA+IGV0aW1lKSB7CgkJCS8qCgkJCSAqIFRoaXMgZGF0dW0gY29udGFpbnMgdGhlIGVuZCBvZiB0aGUgcmFuZ2U7IG91ciBzcGFuCgkJCSAqIGlzIG91ciBldGltZSBtaW51cyB0aGlzIGRhdHVtJ3Mgc3RhcnQgdGltZSAob3Igb3VyCgkJCSAqIHNwZWNpZmllZCB0aW1lLCB3aGljaGV2ZXIgaXMgZ3JlYXRlcikuCgkJCSAqLwoJCQlzcGFuID0gZXRpbWUgLSB0OwoJCX0gZWxzZSB7CgkJCS8qCgkJCSAqIFRoZSBlbmQgb2YgdGhlIGRhdHVtIGlzIGNvdmVyZWQgYnkgdGhlIHJhbmdlOyBvdXIKCQkJICogc3BhbiBpcyB0aGUgdGltZSB3aWR0aCBvZiB0aGUgZGF0dW0uCgkJCSAqLwoJCQlzcGFuID0gZGF0YVtpZHggKyAxXS50IC0gdDsKCQl9CgoJCS8qCgkJICogRXhwcmVzcyBvdXIgc3BhbiBhcyBhIHJhdGlvIG9mIHRoZSBvdmVyYWxsIHRpbWUuCgkJICovCgkJc3BhbiAvPSAoZXRpbWUgLSB0aW1lKTsKCgkJaWYgKGRhdHVtLnMgaW5zdGFuY2VvZiBPYmplY3QpIHsKCQkJZm9yIChzdGF0ZSBpbiBkYXR1bS5zKSB7CgkJCQlpZiAoIXJ2YWwuaGFzT3duUHJvcGVydHkoc3RhdGUpKQoJCQkJCXJ2YWxbc3RhdGVdID0gMDsKCgkJCQlydmFsW3N0YXRlXSArPSAoZGF0dW1bc3RhdGVdICogc3Bhbik7CgkJCX0KCQl9IGVsc2UgewoJCQlzdGF0ZSA9IGRhdHVtLnM7CgoJCQlpZiAoIXJ2YWwuaGFzT3duUHJvcGVydHkoc3RhdGUpKQoJCQkJcnZhbFtzdGF0ZV0gPSAwOwoKCQkJcnZhbFtzdGF0ZV0gKz0gc3BhbjsKCQl9Cgl9CgoJcmV0dXJuIChydmFsKTsKfTsKCnZhciBzdGF0ZWJhckNyZWF0ZUJhciA9IGZ1bmN0aW9uIChzdGF0ZWJhciwgeDEsIHkxLCB4MiwgeTIpCnsKCXZhciBwYXJlbnQgPSBzdGF0ZWJhci5wYXJlbnQ7CgoJdmFyIGJhciA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhwYXJlbnQubmFtZXNwYWNlVVJJLCAnbGluZScpOwoJYmFyLmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXN0YXRlYmFyJyk7CgliYXIueDEuYmFzZVZhbC52YWx1ZSA9IHgxOwoJYmFyLnkxLmJhc2VWYWwudmFsdWUgPSB5MTsKCWJhci54Mi5iYXNlVmFsLnZhbHVlID0geDI7CgliYXIueTIuYmFzZVZhbC52YWx1ZSA9IHkyOwoJcGFyZW50LmFwcGVuZENoaWxkKGJhcik7CglzdGF0ZWJhci5iYXJzLnB1c2goYmFyKTsKfTsKCnZhciBzdGF0ZWJhckNyZWF0ZSA9IGZ1bmN0aW9uIChlbGVtLCBpZHgpCnsKCXZhciBwYXJlbnQgPSBnX3N0YXRlbWFwc1swXS5lbGVtLnBhcmVudE5vZGUucGFyZW50Tm9kZTsKCXZhciBzdGF0ZWJhciA9IHsgcGFyZW50OiBwYXJlbnQsIGhpZGRlbjogZmFsc2UgfTsKCXZhciBlbnRpdHkgPSBnX2VudGl0aWVzW2VsZW0ucGFyZW50Tm9kZS5pZF07Cgl2YXIgc3RhdGVtYXAgPSBnX3N0YXRlbWFwc1tlbnRpdHkuc3RhdGVtYXBdOwoJdmFyIHN0YXRlcyA9IHN0YXRlbWFwLnN0YXRlczsKCXZhciBkYXR1bSA9IGVudGl0eURhdHVtKGVudGl0eSwgaWR4KTsKCXZhciBwb3MgPSAoZW50aXR5LnBvc2l0aW9uICogZ2xvYmFscy5zdHJpcEhlaWdodCkgKwoJICAgIChlbnRpdHkuc3RhdGVtYXAgKiBnbG9iYWxzLnNtYXJnaW4pOwoJdmFyIHggPSBnbG9iYWxzLmxtYXJnaW4gLSAyOwoJdmFyIHkgPSBnbG9iYWxzLnRtYXJnaW4gKyBwb3M7Cgl2YXIgZWxib3cgPSB7IHg6IDgsIHk6IDEwIH07Cgl2YXIgbnVkZ2UgPSB7IHg6IDMsIHk6IDIgfTsKCXZhciBkaXJlY3Rpb24gPSAxLCBhbmNob3I7Cgl2YXIgYW5jaG9ycyA9IFsgJ3N0YXJ0JywgJ2VuZCcgXTsKCXZhciB0ZXh0OwoKCWlmIChwb3MgPCAoZ2xvYmFscy50b3RhbEhlaWdodCAtIGdsb2JhbHMudG1hcmdpbikgLyAyKSB7CgkJZGlyZWN0aW9uID0gMTsKCQlhbmNob3IgPSAxOwoJfSBlbHNlIHsKCQlkaXJlY3Rpb24gPSAtMTsKCQlhbmNob3IgPSAwOwoJfQoKCXN0YXRlYmFyLmJhcnMgPSBbXTsKCgkvKgoJICogV2UgaGF2ZSB0aHJlZSBiYXJzIHRvIGRyYXc6ICBvdXIgYmFyIHRoYXQgcnVucyB0aGUgaGVpZ2h0IG9mIHRoZQoJICogc3RyaXAsIGZvbGxvd2VkIGJ5IG91ciBlbGJvdy4KCSAqLwoJc3RhdGViYXJDcmVhdGVCYXIoc3RhdGViYXIsIHgsIHksIHgsIHkgKyBnbG9iYWxzLnN0cmlwSGVpZ2h0KTsKCgl5ICs9IDAuNSAqIGdsb2JhbHMuc3RyaXBIZWlnaHQ7CglzdGF0ZWJhckNyZWF0ZUJhcihzdGF0ZWJhciwgeCAtIGVsYm93LngsIHksIHgsIHkpOwoKCXggLT0gZWxib3cueDsKCXN0YXRlYmFyQ3JlYXRlQmFyKHN0YXRlYmFyLCB4LCB5LCB4LCB5ICsgKGVsYm93LnkgKiBkaXJlY3Rpb24pKTsKCgkvKgoJICogTm93IGNyZWF0ZSB0aGUgdGV4dCBhdCB0aGUgZW5kIG9mIHRoZSBlbGJvdy4KCSAqLwoJeSArPSAoZWxib3cueSArIG51ZGdlLnkpICogZGlyZWN0aW9uOwoJeCArPSBudWRnZS54OwoJdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhwYXJlbnQubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzYW5zc2VyaWYnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtc3RhdGV0ZXh0Jyk7CgoJdmFyIHQgPSBzdGF0ZW1hcC5lbnRpdHlLaW5kICsgJyAnICsgZW50aXR5Lm5hbWU7CgoJaWYgKGVudGl0eS5kZXNjcmlwdGlvbikKCQl0ICs9ICcgKCcgKyBlbnRpdHkuZGVzY3JpcHRpb24gKyAnKSc7CgoJaWYgKGRhdHVtLmhhc093blByb3BlcnR5KCdzdGF0ZScpKSB7CgkJdCArPSAnLCAnICsgc3RhdGVzW2RhdHVtLnN0YXRlXS5uYW1lOwoJfSBlbHNlIHsKCQl2YXIgaSwgdG90YWwgPSAwLCBtYXggPSAwLCBtYXhzdGF0ZTsKCgkJZm9yIChpIGluIGRhdHVtLnN0YXRlcykgewoJCQl0b3RhbCArPSBkYXR1bS5zdGF0ZXNbaV07CgoJCQlpZiAoZGF0dW0uc3RhdGVzW2ldID4gbWF4KSB7CgkJCQltYXhzdGF0ZSA9IGk7CgkJCQltYXggPSBkYXR1bS5zdGF0ZXNbaV07CgkJCX0KCQl9CgoJCXQgKz0gJywgJyArIE1hdGguZmxvb3IoKGRhdHVtLnN0YXRlc1ttYXhzdGF0ZV0gLyB0b3RhbCkgKiAxMDApOwoJCXQgKz0gJyUgJyArIHN0YXRlc1ttYXhzdGF0ZV0ubmFtZTsKCX0KCgl0ICs9ICcgYXQgJyArIHRpbWV1bml0cyhkYXR1bS50aW1lKTsKCXQgKz0gJyBmb3IgJyArIHRpbWV1bml0cyhkYXR1bS5ldGltZSAtIGRhdHVtLnRpbWUpOwoKCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUodCkpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIHgpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHkpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAndHJhbnNmb3JtJywKCSAgICAncm90YXRlKDI3MCwnICsgeCArICcsJyArIHkgKyAnKScpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAndGV4dC1hbmNob3InLCBhbmNob3JzW2FuY2hvcl0pOwoJdGV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKCQlzdGF0ZWJhclJlbW92ZShzdGF0ZWJhcik7CgkJc3RhdGVzZWxVcGRhdGUoKTsKCX0pOwoKCXBhcmVudC5hcHBlbmRDaGlsZCh0ZXh0KTsKCXN0YXRlYmFyLmJhcnMucHVzaCh0ZXh0KTsKCglzdGF0ZWJhci5lbnRpdHkgPSBlbnRpdHk7CgoJaWYgKGdfc3RhdGVtYXBzLmxlbmd0aCA9PSAxKQoJCXJldHVybiAoc3RhdGViYXIpOwoKCS8qCgkgKiBJZiB3ZSBoYXZlIG1vcmUgdGhhbiBvbmUgc3RhdGVtYXAsIHdlIHdhbnQgdG8gYWRkIGEgYmFyIHRvIHRoZSByaWdodAoJICogc2lkZSB0byBpbmRpY2F0ZSB3aGljaCBzdGF0ZW1hcCB0aGlzIGlzLgoJICovCgl2YXIgcG9zID0gKHN0YXRlbWFwLnBvc2l0aW9uICogZ2xvYmFscy5zdHJpcEhlaWdodCkgKwoJICAgIChlbnRpdHkuc3RhdGVtYXAgKiBnbG9iYWxzLnNtYXJnaW4pOwoKCXggPSBnbG9iYWxzLmxtYXJnaW4gKyBnX3dpZHRoICsgMjsKCXkgPSBnbG9iYWxzLnRtYXJnaW4gKyBwb3M7CgoJdmFyIHBvcyA9IChzdGF0ZW1hcC5wb3NpdGlvbiAqIGdsb2JhbHMuc3RyaXBIZWlnaHQpICsKCSAgICAoZW50aXR5LnN0YXRlbWFwICogZ2xvYmFscy5zbWFyZ2luKTsKCgl2YXIgaGVpZ2h0ID0gc3RhdGVtYXAubmVudGl0aWVzICogZ2xvYmFscy5zdHJpcEhlaWdodDsKCglzdGF0ZWJhckNyZWF0ZUJhcihzdGF0ZWJhciwgeCwgeSwgeCwgeSArIGhlaWdodCk7CgoJeSArPSAwLjUgKiBoZWlnaHQ7CglzdGF0ZWJhckNyZWF0ZUJhcihzdGF0ZWJhciwgeCArIGVsYm93LngsIHksIHgsIHkpOwoKCXggKz0gZWxib3cueDsKCXN0YXRlYmFyQ3JlYXRlQmFyKHN0YXRlYmFyLCB4LCB5LCB4LCB5ICsgKGVsYm93LnkgKiBkaXJlY3Rpb24pKTsKCgkvKgoJICogTm93IGNyZWF0ZSB0aGUgdGV4dCBhdCB0aGUgZW5kIG9mIHRoZSBlbGJvdy4KCSAqLwoJeSArPSAoZWxib3cueSArIG51ZGdlLnkpICogZGlyZWN0aW9uOwoJeCAtPSBudWRnZS54OwoJdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhwYXJlbnQubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzYW5zc2VyaWYnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtc3RhdGV0ZXh0Jyk7Cgl0ZXh0LmFwcGVuZENoaWxkKGdfc3ZnRG9jLmNyZWF0ZVRleHROb2RlKHN0YXRlbWFwLnRpdGxlKSk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgeCk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd5JywgeSk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd0cmFuc2Zvcm0nLAoJICAgICdyb3RhdGUoOTAsJyArIHggKyAnLCcgKyB5ICsgJyknKTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3RleHQtYW5jaG9yJywgYW5jaG9yc1thbmNob3IgXiAxXSk7CgoJcGFyZW50LmFwcGVuZENoaWxkKHRleHQpOwoJc3RhdGViYXIuYmFycy5wdXNoKHRleHQpOwoKCXJldHVybiAoc3RhdGViYXIpOwp9OwoKdmFyIHN0YXRlYmFyUmVtb3ZlID0gZnVuY3Rpb24gKHN0YXRlYmFyKQp7Cgl2YXIgaTsKCglpZiAoIXN0YXRlYmFyKQoJCXJldHVybjsKCglpZiAoc3RhdGViYXIuYmFycykgewoJCWZvciAoaSA9IDA7IGkgPCBzdGF0ZWJhci5iYXJzLmxlbmd0aDsgaSsrKQoJCQlzdGF0ZWJhci5wYXJlbnQucmVtb3ZlQ2hpbGQoc3RhdGViYXIuYmFyc1tpXSk7Cgl9CgoJc3RhdGViYXIuYmFycyA9IHVuZGVmaW5lZDsKCXN0YXRlYmFyLmVudGl0eSA9IHVuZGVmaW5lZDsKfTsKCnZhciB0aW1lYmFyUmVtb3ZlID0gZnVuY3Rpb24gKHRpbWViYXIpCnsKCWlmICghdGltZWJhcikKCQlyZXR1cm47CgoJdGltZWJhclJlbW92ZVN1YmJhcih0aW1lYmFyKTsKCglpZiAodGltZWJhci5iYXIgJiYgIXRpbWViYXIuaGlkZGVuKSB7CgkJdGltZWJhci5wYXJlbnQucmVtb3ZlQ2hpbGQodGltZWJhci5iYXIpOwoJCXRpbWViYXIucGFyZW50LnJlbW92ZUNoaWxkKHRpbWViYXIudGV4dCk7Cgl9CgoJaWYgKHRpbWViYXIuYnJlYWtkb3duKSB7CgkJdmFyIGk7CgoJCWZvciAoaSA9IDA7IGkgPCB0aW1lYmFyLmJyZWFrZG93bi5sZW5ndGg7IGkrKykgewoJCQl2YXIgZWxlbSA9IHRpbWViYXIuYnJlYWtkb3duW2ldOwoJCQllbGVtLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbSk7CgkJfQoJfQoKCXRpbWViYXIuYmFyID0gdW5kZWZpbmVkOwoJdGltZWJhci50ZXh0ID0gdW5kZWZpbmVkOwoJdGltZWJhci5icmVha2Rvd24gPSB1bmRlZmluZWQ7Cn07Cgp2YXIgdGltZWJhclNldEJhckxvY2F0aW9uID0gZnVuY3Rpb24gKGJhciwgbWFwWCkKewoJdmFyIGFic1ggPSBtYXBYICsgZ19vZmZzZXQ7Cgl2YXIgbnViaGVpZ2h0ID0gMTU7CgoJYmFyLngxLmJhc2VWYWwudmFsdWUgPSBhYnNYOwoJYmFyLnkxLmJhc2VWYWwudmFsdWUgPSBnbG9iYWxzLnRtYXJnaW4gLSBudWJoZWlnaHQ7CgliYXIueDIuYmFzZVZhbC52YWx1ZSA9IGFic1g7CgliYXIueTIuYmFzZVZhbC52YWx1ZSA9IGdsb2JhbHMudG1hcmdpbiArIGdfaGVpZ2h0Owp9OwoKdmFyIHRpbWViYXJTZXRTdWJiYXJMb2NhdGlvbiA9IGZ1bmN0aW9uIChzdWJiYXIsIG1hcFgsIHRpbWViYXJYKQp7Cgl2YXIgYWJzWCA9IG1hcFggKyBnX29mZnNldCwgeDsKCXZhciBiYXIgPSBzdWJiYXIuYmFyOwoJdmFyIHNwYW4gPSBzdWJiYXIuc3BhbjsKCXZhciB0ZXh0ID0gc3ViYmFyLnRleHQ7Cgl2YXIgbnVkZ2UgPSB7IHg6IDAsIHk6IDEwIH07CgoJYmFyLngxLmJhc2VWYWwudmFsdWUgPSBhYnNYOwoJYmFyLnkxLmJhc2VWYWwudmFsdWUgPSBnbG9iYWxzLnRtYXJnaW47CgliYXIueDIuYmFzZVZhbC52YWx1ZSA9IGFic1g7CgliYXIueTIuYmFzZVZhbC52YWx1ZSA9IGdsb2JhbHMudG1hcmdpbiArIGdfaGVpZ2h0OwoKCXNwYW4ueDEuYmFzZVZhbC52YWx1ZSA9IHRpbWViYXJYICsgZ19vZmZzZXQ7CglzcGFuLnkxLmJhc2VWYWwudmFsdWUgPSBzdWJiYXIueTsKCXNwYW4ueDIuYmFzZVZhbC52YWx1ZSA9IGFic1g7CglzcGFuLnkyLmJhc2VWYWwudmFsdWUgPSBzdWJiYXIueTsKCgl4ID0gKHRpbWViYXJYIDwgbWFwWCA/IHRpbWViYXJYIDogbWFwWCkgKwoJICAgIE1hdGguYWJzKHRpbWViYXJYIC0gbWFwWCkgLyAyOwoKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIHggKyBnX29mZnNldCk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd5Jywgc3ViYmFyLnkgKyBudWRnZS55KTsKfTsKCnZhciB0aW1lYmFyU2V0VGV4dExvY2F0aW9uID0gZnVuY3Rpb24gKHRleHQsIG1hcFgpCnsKCXZhciBhYnNYID0gbWFwWCArIGdfb2Zmc2V0OwoJdmFyIG51ZGdlID0geyB4OiAzLCB5OiA1IH07Cgl2YXIgZGlyZWN0aW9uLCBhbmNob3I7Cgl2YXIgdGltZTsKCgkvKgoJICogVGhlIHNpZGUgb2YgdGhlIHRpbWViYXIgdGhhdCB3ZSBhY3R1YWxseSByZW5kZXIgdGhlIHRleHQgY29udGFpbmluZwoJICogdGhlIG9mZnNldCBhbmQgdGhlIHRpbWUgZGVwZW5kcyBvbiB0aGUgbG9jYXRpb24gb2Ygb3VyIHRpbWViYXIgd2l0aAoJICogcmVzcGVjdCB0byB0aGUgY2VudGVyIG9mIHRoZSB2aXNpYmxlIHN0YXRlbWFwLgoJICovCglpZiAobWFwWCA8IChnX3dpZHRoIC8gMikpIHsKCQlkaXJlY3Rpb24gPSAxOwoJCWFuY2hvciA9ICdzdGFydCc7Cgl9IGVsc2UgewoJCWRpcmVjdGlvbiA9IC0xOwoJCWFuY2hvciA9ICdlbmQnOwoJfQoKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnLCBhYnNYICsgKGRpcmVjdGlvbiAqIG51ZGdlLngpKTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3knLCBnbG9iYWxzLnRtYXJnaW4gLSBudWRnZS55KTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3RleHQtYW5jaG9yJywgYW5jaG9yKTsKCgl0aW1lID0gdGltZUZyb21NYXBYKG1hcFgpOwoJdGV4dC5jaGlsZE5vZGVzWzBdLnRleHRDb250ZW50ID0gdGltZVRvVGV4dCh0aW1lKTsKCglyZXR1cm4gKHRpbWUpOwp9OwoKdmFyIHRpbWViYXJIaWRlU3ViYmFyID0gZnVuY3Rpb24gKHRpbWViYXIpCnsKCXZhciBwYXJlbnQsIHN1YmJhcjsKCglpZiAoIXRpbWViYXIgfHwgIShzdWJiYXIgPSB0aW1lYmFyLnN1YmJhcikgfHwgc3ViYmFyLmhpZGRlbikKCQlyZXR1cm47CgoJcGFyZW50ID0gdGltZWJhci5wYXJlbnQ7CglwYXJlbnQucmVtb3ZlQ2hpbGQoc3ViYmFyLmJhcik7CglwYXJlbnQucmVtb3ZlQ2hpbGQoc3ViYmFyLnNwYW4pOwoJcGFyZW50LnJlbW92ZUNoaWxkKHN1YmJhci50ZXh0KTsKCglzdWJiYXIuaGlkZGVuID0gdHJ1ZTsKfTsKCnZhciB0aW1lYmFyU2hvd1N1YmJhciA9IGZ1bmN0aW9uICh0aW1lYmFyKQp7Cgl2YXIgcGFyZW50LCBzdWJiYXIsIG1hcFg7CgoJaWYgKCF0aW1lYmFyIHx8ICEoc3ViYmFyID0gdGltZWJhci5zdWJiYXIpIHx8ICFzdWJiYXIuaGlkZGVuKQoJCXJldHVybjsKCgltYXBYID0gdGltZVRvTWFwWChzdWJiYXIudGltZSkKCglpZiAobWFwWCA8IDAgfHwgbWFwWCA+PSBnX3dpZHRoKQoJCXJldHVybjsKCgl0aW1lYmFyU2V0U3ViYmFyTG9jYXRpb24oc3ViYmFyLCBtYXBYLCB0aW1lYmFyLngpOwoKCXBhcmVudCA9IHRpbWViYXIucGFyZW50OwoJcGFyZW50LmFwcGVuZENoaWxkKHN1YmJhci5iYXIpOwoJcGFyZW50LmFwcGVuZENoaWxkKHN1YmJhci5zcGFuKTsKCXBhcmVudC5hcHBlbmRDaGlsZChzdWJiYXIudGV4dCk7CgoJc3ViYmFyLmhpZGRlbiA9IGZhbHNlOwp9Cgp2YXIgdGltZWJhckhpZGUgPSBmdW5jdGlvbiAodGltZWJhcikKewoJaWYgKCF0aW1lYmFyIHx8IHRpbWViYXIuaGlkZGVuIHx8ICF0aW1lYmFyLmJhcikKCQlyZXR1cm47CgoJdGltZWJhci5wYXJlbnQucmVtb3ZlQ2hpbGQodGltZWJhci5iYXIpOwoJdGltZWJhci5wYXJlbnQucmVtb3ZlQ2hpbGQodGltZWJhci50ZXh0KTsKCXRpbWViYXIuaGlkZGVuID0gdHJ1ZTsKCXRpbWViYXJIaWRlU3ViYmFyKHRpbWViYXIpOwp9OwoKdmFyIHRpbWViYXJTaG93ID0gZnVuY3Rpb24gKHRpbWViYXIpCnsKCXZhciBtYXBYOwoKCWlmICghdGltZWJhciB8fCAhdGltZWJhci5oaWRkZW4pCgkJcmV0dXJuOwoKCW1hcFggPSB0aW1lVG9NYXBYKHRpbWViYXIudGltZSk7CgoJaWYgKG1hcFggPCAwIHx8IG1hcFggPj0gZ193aWR0aCkKCQlyZXR1cm47CgoJdGltZWJhclNldEJhckxvY2F0aW9uKHRpbWViYXIuYmFyLCBtYXBYKTsKCXRpbWViYXJTZXRUZXh0TG9jYXRpb24odGltZWJhci50ZXh0LCBtYXBYKTsKCXRpbWViYXIueCA9IG1hcFg7CgoJdGltZWJhci5wYXJlbnQuYXBwZW5kQ2hpbGQodGltZWJhci5iYXIpOwoJdGltZWJhci5wYXJlbnQuYXBwZW5kQ2hpbGQodGltZWJhci50ZXh0KTsKCXRpbWViYXIuaGlkZGVuID0gZmFsc2U7CgoJdGltZWJhclNob3dTdWJiYXIodGltZWJhcik7Cn07Cgp2YXIgdGltZWJhclNldE1pZGRsZSA9IGZ1bmN0aW9uICh0aW1lYmFyKQp7Cgl2YXIgbWFwWCA9IGdfd2lkdGggLyAyOwoKCWlmICghdGltZWJhciB8fCAhdGltZWJhci5iYXIpCgkJcmV0dXJuOwoKCS8qCgkgKiBUaGlzIGlzIGp1c3QgYW4gYWxnZWJyYWljIHJlYXJyYW5nZW1lbnQgb2YgdGhlIG1hcFggY2FsY3VsYXRpb24KCSAqIGluIHRpbWViYXJTaG93KCksIGFib3ZlLgoJICovCglnX3RyYW5zTWF0cml4WzRdID0gLSgoKHRpbWViYXIudGltZSAvIGdsb2JhbHMudGltZVdpZHRoKSAqIGdfd2lkdGggKgoJICAgIGdfdHJhbnNNYXRyaXhbMF0pIC0gbWFwWCk7Cn07Cgp2YXIgdGltZWJhclNldEJyZWFrZG93biA9IGZ1bmN0aW9uICh0aW1lKQp7Cgl2YXIgYnJlYWtkb3duLCBzdGF0ZSwgdG90YWwgPSBbXTsKCXZhciBlbnRpdHk7Cgl2YXIgc3VtID0ge307Cgl2YXIgcnZhbCA9IFtdOwoKCXZhciBjbGljayA9IGZ1bmN0aW9uIChzdGF0ZW1hcCwgcykgewoJCXJldHVybiAoZnVuY3Rpb24gKGV2dCkgeyBsZWdlbmRjbGljayhldnQsIHN0YXRlbWFwLCBzKTsgfSk7Cgl9OwoKCXRpbWUgKz0gZ2xvYmFscy5iZWdpbjsKCglmb3IgKGVudGl0eSBpbiBnX2VudGl0aWVzKSB7CgkJdmFyIHN0YXRlbWFwID0gZ19zdGF0ZW1hcHNbZ19lbnRpdGllc1tlbnRpdHldLnN0YXRlbWFwXS5sZWdlbmQ7CgoJCWJyZWFrZG93biA9IGVudGl0eUJyZWFrZG93bihnX2VudGl0aWVzW2VudGl0eV0sIHRpbWUpOwoKCQlpZiAoIXRvdGFsW3N0YXRlbWFwXSkgewoJCQl0b3RhbFtzdGF0ZW1hcF0gPSB7fTsKCQkJc3VtW3N0YXRlbWFwXSA9IDA7CgkJfQoKCQlmb3IgKHN0YXRlIGluIGJyZWFrZG93bikgewoJCQlpZiAoIXRvdGFsW3N0YXRlbWFwXS5oYXNPd25Qcm9wZXJ0eShzdGF0ZSkpCgkJCQl0b3RhbFtzdGF0ZW1hcF1bc3RhdGVdID0gMDsKCgkJCXN1bVtzdGF0ZW1hcF0gKz0gYnJlYWtkb3duW3N0YXRlXTsKCQkJdG90YWxbc3RhdGVtYXBdW3N0YXRlXSArPSBicmVha2Rvd25bc3RhdGVdOwoJCX0KCX0KCgl2YXIgc2V0dG90YWwgPSBmdW5jdGlvbiAoc3RhdGVtYXAsIHN0YXRlKSB7CgkJdmFyIGxlZ2VuZCwgcGFyZW50LCB0ZXh0OwoJCXZhciB4LCB5LCB3aWR0aCwgaGVpZ2h0LCB0OwoJCXZhciBudWRnZSA9IDM7CgoJCS8qCgkJICogSXRlcmF0ZSBkb3duIHVudGlsIHdlIGZpbmQgYSB2YWxpZCBsZWdlbmQuICBXZSBrbm93IHRoYXQKCQkgKiB0aGF0IHRoZXJlIHdpbGwgYmUgYXQgbGVhc3Qgb25lLCBidXQgd2UgYnJlYWsgb3V0IG9mIHRoZQoJCSAqIGxvb3AgYW55d2F5IGlmIHdlIGRvbid0IGZpbmQgaXQgdG8gYWxsb3cgdGhlIGZhaWx1cmUgbW9kZQoJCSAqIGhlcmUgdG8gYmUgYW4gdW5yZWZlcmVuY2VkIHByb3BlcnR5IHJhdGhlciB0aGFuIGFuCgkJICogaW5pZmluaXRlIGxvb3AuCgkJICovCgkJbGVnZW5kID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLWxlZ2VuZC0nICsKCQkgICAgc3RhdGVtYXAgKyAnLScgKyBzdGF0ZSk7CgoJCXBhcmVudCA9IGxlZ2VuZC5wYXJlbnROb2RlOwoKCQl4ID0gcGFyc2VJbnQobGVnZW5kLmdldEF0dHJpYnV0ZU5TKG51bGwsICd4JyksIDEwKTsKCQl5ID0gcGFyc2VJbnQobGVnZW5kLmdldEF0dHJpYnV0ZU5TKG51bGwsICd5JyksIDEwKTsKCQl3aWR0aCA9IHBhcnNlSW50KGxlZ2VuZC5nZXRBdHRyaWJ1dGVOUyhudWxsLCAnd2lkdGgnKSwgMTApOwoJCWhlaWdodCA9IHBhcnNlSW50KGxlZ2VuZC5nZXRBdHRyaWJ1dGVOUyhudWxsLCAnaGVpZ2h0JyksIDEwKTsKCgkJdCA9IE1hdGguZmxvb3IodG90YWxbc3RhdGVtYXBdW3N0YXRlXSkgKyAnICgnICsKCQkgICAgTWF0aC5mbG9vcigodG90YWxbc3RhdGVtYXBdW3N0YXRlXSAvCgkJICAgIHN1bVtzdGF0ZW1hcF0pICogMTAwKSArICclKSc7CgoJCXRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMocGFyZW50Lm5hbWVzcGFjZVVSSSwgJ3RleHQnKTsKCQl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3NhbnNzZXJpZicpOwoJCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGltZWJyZWFrdGV4dCcpOwoKCQl0ZXh0LmFwcGVuZENoaWxkKGdfc3ZnRG9jLmNyZWF0ZVRleHROb2RlKHQpKTsKCQl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgeCArICh3aWR0aCAvIDIpKTsKCQl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd5JywgeSArIChoZWlnaHQgLyAyKSArIG51ZGdlKTsKCQl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKTsKCgkJdGV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsCgkJICAgIGNsaWNrKHN0YXRlbWFwLCBnX3N0YXRlbWFwc1tzdGF0ZW1hcF0uc3RhdGVzW3N0YXRlXS52YWx1ZSkpOwoKCQlwYXJlbnQuYXBwZW5kQ2hpbGQodGV4dCk7CgkJcnZhbC5wdXNoKHRleHQpOwoJfTsKCglmb3IgKHN0YXRlbWFwIGluIHRvdGFsKSB7CgkJZm9yIChzdGF0ZSBpbiB0b3RhbFtzdGF0ZW1hcF0pCgkJCXNldHRvdGFsKHN0YXRlbWFwLCBzdGF0ZSk7Cgl9CgoJcmV0dXJuIChydmFsKTsKfTsKCnZhciB0aW1lYmFyQ3JlYXRlID0gZnVuY3Rpb24gKG1hcFgpCnsKCXZhciBwYXJlbnQgPSBnX3N0YXRlbWFwc1swXS5lbGVtLnBhcmVudE5vZGUucGFyZW50Tm9kZTsKCXZhciBiYXIsIHRleHQ7Cgl2YXIgdGltZWJhciA9IHsgcGFyZW50OiBwYXJlbnQsIGhpZGRlbjogZmFsc2UgfTsKCgliYXIgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMocGFyZW50Lm5hbWVzcGFjZVVSSSwgJ2xpbmUnKTsKCWJhci5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10aW1lYmFyJyk7CgoJdGltZWJhclNldEJhckxvY2F0aW9uKGJhciwgbWFwWCk7CglwYXJlbnQuYXBwZW5kQ2hpbGQoYmFyKTsKCgl0ZXh0ID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHBhcmVudC5uYW1lc3BhY2VVUkksICd0ZXh0Jyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3NhbnNzZXJpZicpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10aW1ldGV4dCcpOwoJdGV4dC5hcHBlbmRDaGlsZChnX3N2Z0RvYy5jcmVhdGVUZXh0Tm9kZSgnJykpOwoKCXRpbWViYXIudGltZSA9IHRpbWViYXJTZXRUZXh0TG9jYXRpb24odGV4dCwgbWFwWCk7Cgl0aW1lYmFyLmJyZWFrZG93biA9IHRpbWViYXJTZXRCcmVha2Rvd24odGltZWJhci50aW1lKTsKCXRpbWViYXIueCA9IG1hcFg7CgoJdGV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKCQl0aW1lYmFyUmVtb3ZlKHRpbWViYXIpOwoJCXN0YXRlc2VsVXBkYXRlKCk7Cgl9KTsKCglwYXJlbnQuYXBwZW5kQ2hpbGQodGV4dCk7CgoJdGltZWJhci5iYXIgPSBiYXI7Cgl0aW1lYmFyLnRleHQgPSB0ZXh0OwoKCXJldHVybiAodGltZWJhcik7Cn07Cgp2YXIgdGltZWJhckNyZWF0ZVN1YmJhciA9IGZ1bmN0aW9uICh0aW1lYmFyLCBtYXBYLCBhYnNZKQp7Cgl2YXIgcGFyZW50ID0gdGltZWJhci5wYXJlbnQ7Cgl2YXIgc3ViYmFyLCBiYXIsIHNwYW4sIHRleHQsIHRpbWUsIGRlbHRhOwoKCWJhciA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhwYXJlbnQubmFtZXNwYWNlVVJJLCAnbGluZScpOwoJYmFyLmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXN1YmJhcicpOwoKCXNwYW4gPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMocGFyZW50Lm5hbWVzcGFjZVVSSSwgJ2xpbmUnKTsKCXNwYW4uY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtc3ViYmFyLXNwYW4nKTsKCgl0aW1lID0gdGltZUZyb21NYXBYKG1hcFgpOwoJZGVsdGEgPSBNYXRoLmFicyh0aW1lYmFyLnRpbWUgLSB0aW1lKTsKCgl0ZXh0ID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHBhcmVudC5uYW1lc3BhY2VVUkksICd0ZXh0Jyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3NhbnNzZXJpZicpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC1zdWJiYXItdGV4dCcpOwoJdGV4dC5hcHBlbmRDaGlsZChnX3N2Z0RvYy5jcmVhdGVUZXh0Tm9kZSh0aW1ldW5pdHMoZGVsdGEpKSk7CgoJdmFyIHN1YmJhciA9IHsgYmFyOiBiYXIsIHNwYW46IHNwYW4sIHRleHQ6IHRleHQsCgkgICAgdGltZTogdGltZSwgeTogYWJzWSwgaGlkZGVuOiBmYWxzZSB9OwoKCXRpbWViYXJTZXRTdWJiYXJMb2NhdGlvbihzdWJiYXIsIG1hcFgsIHRpbWViYXIueCk7CgoJcGFyZW50LmFwcGVuZENoaWxkKGJhcik7CglwYXJlbnQuYXBwZW5kQ2hpbGQoc3Bhbik7CglwYXJlbnQuYXBwZW5kQ2hpbGQodGV4dCk7CgoJdGltZWJhci5zdWJiYXIgPSBzdWJiYXI7Cn0KCnZhciB0aW1lYmFyUmVtb3ZlU3ViYmFyID0gZnVuY3Rpb24gKHRpbWViYXIpCnsKCXZhciBzdWJiYXIgPSB0aW1lYmFyLnN1YmJhcjsKCglpZiAoIXN1YmJhcikKCQlyZXR1cm47CgoJaWYgKCFzdWJiYXIuaGlkZGVuKSB7CgkJdGltZWJhci5wYXJlbnQucmVtb3ZlQ2hpbGQoc3ViYmFyLmJhcik7CgkJdGltZWJhci5wYXJlbnQucmVtb3ZlQ2hpbGQoc3ViYmFyLnNwYW4pOwoJCXRpbWViYXIucGFyZW50LnJlbW92ZUNoaWxkKHN1YmJhci50ZXh0KTsKCX0KCgl0aW1lYmFyLnN1YmJhciA9IHVuZGVmaW5lZDsKfQoKdmFyIHN0YXRlc2VsVGFndmFsU2VsZWN0ID0gZnVuY3Rpb24gKGV2dCwgdGFndmFsKQp7Cgl2YXIgdGFnZGVmcyA9IHt9OwoJdmFyIGksIGVudGl0eTsKCXZhciBzdGF0ZSwgdGFnczsKCXZhciBjaGlsZDsKCXZhciBoaWdobGlnaHQgPSAnc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1oaWdobGlnaHRlZCc7CgoJaWYgKGdfc3RhdGVzZWwgPT0gdW5kZWZpbmVkKQoJCXJldHVybjsKCglzdGF0ZSA9IGdfc3RhdGVzZWwuc3RhdGU7Cgl0YWdzID0gZ19zdGF0ZW1hcHNbZ19zdGF0ZXNlbC5zdGF0ZW1hcF0udGFnczsKCglpZiAoZ190YWd2YWxzZWwgJiYgZ190YWd2YWxzZWwuc2VsZWN0ZWQpIHsKCQlmb3IgKGkgPSAwOyBpIDwgZ190YWd2YWxzZWwuc2VsZWN0ZWQubGVuZ3RoOyBpKyspIHsKCQkJY2hpbGQgPSBnX3RhZ3ZhbHNlbC5zZWxlY3RlZFtpXTsKCQkJY2hpbGQucmVtb3ZlQXR0cmlidXRlKCdmaWxsLW9wYWNpdHknKTsKCQl9CgoJCWlmIChnX3RhZ3ZhbHNlbC5lbGVtZW50KQoJCQlnX3RhZ3ZhbHNlbC5lbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoaGlnaGxpZ2h0KTsKCgkJLyoKCQkgKiBJZiBvdXIgc2VsZWN0aW9uIG1hdGNoZXMgdGhlIHNlbGVjdGlvbiB0aGF0IHdlIGhhdmUgYWxyZWFkeQoJCSAqIG1hZGUsIHRoZW4gd2UgYXJlIHVuc2VsZWN0aW5nIHRoaXMgdGFnIHZhbHVlOyB3ZSBuZWVkIG9ubHkKCQkgKiByZXR1cm4uCgkJICovCgkJaWYgKGdfdGFndmFsc2VsLnRhZyA9PSBnX3RhZ3NlbC50YWcgJiYKCQkgICAgZ190YWd2YWxzZWwudGFndmFsID09IHRhZ3ZhbCkgewoJCQlnX3RhZ3ZhbHNlbCA9IHVuZGVmaW5lZDsKCQkJcmV0dXJuOwoJCX0KCX0KCglnX3RhZ3ZhbHNlbCA9IHsgc2VsZWN0ZWQ6IFtdLCB0YWc6IGdfdGFnc2VsLnRhZywgdGFndmFsOiB0YWd2YWwgfTsKCglldnQudGFyZ2V0LmNsYXNzTGlzdC5hZGQoaGlnaGxpZ2h0KTsKCWdfdGFndmFsc2VsLmVsZW1lbnQgPSBldnQudGFyZ2V0OwoKCS8qCgkgKiBJdGVyYXRlIG92ZXIgYWxsIG9mIG91ciB0YWcgZGVmaW5pdGlvbnMsIGxvb2tpbmcgZm9yIGEgbWF0Y2ggd2hlcmUKCSAqIHRoZSBzcGVjaWZpZWQgdGFnIChmb3IgdGhlIHNwZWNpZmllZCBzdGF0ZSkgbWF0Y2hlcyB0aGUgc3BlY2lmaWVkCgkgKiB0YWcgdmFsdWUuCgkgKi8KCWZvciAoaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7CgkJaWYgKHRhZ3NbaV0uc3RhdGUgIT0gc3RhdGUpCgkJCWNvbnRpbnVlOwoKCQlpZiAodGFnc1tpXVtnX3RhZ3NlbC50YWddICE9IHRhZ3ZhbCkKCQkJY29udGludWU7CgoJCXRhZ2RlZnNbaV0gPSB0cnVlOwoJfQoKCS8qCgkgKiBOb3cgZm9yIGVhY2ggZW50aXR5LCB3ZSB3aWxsIHBsb3cgdGhyb3VnaCBldmVyeSByZWN0YW5nbGUuCgkgKi8KCWZvciAoaWQgaW4gZ19lbnRpdGllcykgewoJCXZhciBlbnRpdHkgPSBnX2VudGl0aWVzW2lkXTsKCQl2YXIgZWxlbSA9IGVudGl0eS5lbGVtZW50OwoJCXZhciBkYXRhID0gZ19zdGF0ZW1hcHNbZW50aXR5LnN0YXRlbWFwXS5kYXRhW2VudGl0eS5uYW1lXTsKCQl2YXIgaiA9IDA7CgoJCWZvciAoaSA9IDA7IGkgPCBlbGVtLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHsKCQkJY2hpbGQgPSBlbGVtLmNoaWxkTm9kZXNbaV07CgoJCQlpZiAoY2hpbGQubm9kZU5hbWUgIT0gJ3JlY3QnKQoJCQkJY29udGludWU7CgoJCQl2YXIgZGF0dW0gPSBkYXRhW2orK107CgkJCXZhciB0YWc7CgoJCQlpZiAoZGF0dW0ucyBpbnN0YW5jZW9mIE9iamVjdCkgewoJCQkJaWYgKCFkYXR1bS5zW3N0YXRlXSkKCQkJCQljb250aW51ZTsKCQkJfSBlbHNlIHsKCQkJCWlmIChkYXR1bS5zICE9IHN0YXRlKQoJCQkJCWNvbnRpbnVlOwoJCQl9CgoJCQlpZiAoIWRhdHVtLmcpCgkJCQljb250aW51ZTsKCgkJCXZhciByYXRpbyA9IDA7CgoJCQlmb3IgKHRhZyBpbiBkYXR1bS5nKSB7CgkJCQlpZiAodGFnZGVmc1t0YWddKQoJCQkJCXJhdGlvICs9IGRhdHVtLmdbdGFnXTsKCQkJfQoKCQkJaWYgKHJhdGlvID09PSAwKQoJCQkJY29udGludWU7CgoJCQkvKgoJCQkgKiBBdCB0aGlzIHBvaW50IHdlIGhhdmUgZm91bmQgYSByZWN0YW5nbGUgdGhhdCB3ZQoJCQkgKiB3YW50IHRvIGNvbG9yLCBhbmQgd2Uga25vdyB0aGUgZGVncmVlIHRoYXQgd2UKCQkJICogd2FudCB0byBjb2xvciBpdCEKCQkJICovCgkJCWNoaWxkLnNldEF0dHJpYnV0ZU5TKG51bGwsICdmaWxsLW9wYWNpdHknLCAxIC0gcmF0aW8pOwoJCQlnX3RhZ3ZhbHNlbC5zZWxlY3RlZC5wdXNoKGNoaWxkKTsKCQl9Cgl9Cn07Cgp2YXIgc3RhdGVzZWxVcGRhdGUgPSBmdW5jdGlvbiAoKQp7Cgl2YXIgYmFzZSwgZXRpbWUsIG5lbnRpdGllcyA9IDA7Cgl2YXIgc3RhdGUsIGVudGl0eTsKCXZhciBieXRhZyA9IHt9LCB0YWd2YWw7Cgl2YXIgaGVhZGVyLCBpLCB0YWdzOwoKCWlmIChnX3N0YXRlc2VsID09IHVuZGVmaW5lZCkKCQlyZXR1cm47CgoJc3RhdGUgPSBnX3N0YXRlc2VsLnN0YXRlOwoJdGFncyA9IGdfc3RhdGVtYXBzW2dfc3RhdGVzZWwuc3RhdGVtYXBdLnRhZ3M7CgoJdmFyIHN1bSA9IGZ1bmN0aW9uIChkYXR1bSwgaWQsIHNwYW4pIHsKCQl2YXIgdGlkLCB0YWc7CgoJCWlmICghKGRhdHVtLnMgaW5zdGFuY2VvZiBPYmplY3QpKSB7CgkJCWlmIChkYXR1bS5zICE9IHN0YXRlKQoJCQkJcmV0dXJuOwoJCX0gZWxzZSB7CgkJCXZhciByYXRpbzsKCgkJCWlmICghKHJhdGlvID0gZGF0dW0uc1tzdGF0ZV0pKQoJCQkJcmV0dXJuOwoJCX0KCgkJaWYgKCFkYXR1bS5nKQoJCQlyZXR1cm47CgoJCWZvciAodGlkIGluIGRhdHVtLmcpIHsKCQkJdGFnID0gdGFnc1t0aWRdOwoKCQkJaWYgKHRhZy5zdGF0ZSAhPSBzdGF0ZSkKCQkJCWNvbnRpbnVlOwoKCQkJaWYgKCEodGFndmFsID0gdGFnW2dfdGFnc2VsLnRhZ10pKQoJCQkJY29udGludWU7CgoJCQlpZiAoIWJ5dGFnW3RhZ3ZhbF0pCgkJCQlieXRhZ1t0YWd2YWxdID0gMDsKCgkJCWJ5dGFnW3RhZ3ZhbF0gKz0gc3BhbiAqIGRhdHVtLmdbdGlkXTsKCQl9Cgl9OwoKCWlmICghZ190YWdzZWwpCgkJcmV0dXJuOwoKCWhlYWRlciA9ICcnOwoKCWlmIChnX3N0YXRlYmFyICYmIGdfc3RhdGViYXIuZW50aXR5KSB7CgkJaGVhZGVyID0gZ19zdGF0ZW1hcHNbZ19zdGF0ZXNlbC5zdGF0ZW1hcF0uZW50aXR5S2luZCArICcgJyArCgkJICAgIGdfc3RhdGViYXIuZW50aXR5Lm5hbWUgKyAnICc7Cgl9CgoJaGVhZGVyICs9ICdieSAnICsgZ190YWdzZWwudGFnICsgJyAnOwoKCWlmIChnX3RpbWViYXIgJiYgZ190aW1lYmFyLmJhcikgewoJCWJhc2UgPSBnX3RpbWViYXIudGltZSArIGdsb2JhbHMuYmVnaW47CgkJZXRpbWUgPSAwOwoJCWhlYWRlciArPSAnYXQgJyArIHRpbWV1bml0cyhnX3RpbWViYXIudGltZSk7Cgl9IGVsc2UgewoJCWJhc2UgPSB0aW1lRnJvbU1hcFgoMCkgKyBnbG9iYWxzLmJlZ2luOwoJCWV0aW1lID0gdGltZUZyb21NYXBYKGdfd2lkdGgpICsgZ2xvYmFscy5iZWdpbjsKCQloZWFkZXIgKz0gJ292ZXIgc3Bhbic7Cgl9CgoJaGVhZGVyID0gaGVhZGVyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgaGVhZGVyLnN1YnN0cigxKSArICc6JzsKCglpZiAoZ19zdGF0ZWJhciAmJiBnX3N0YXRlYmFyLmVudGl0eSkgewoJCWVudGl0eUZvckVhY2hEYXR1bShnX3N0YXRlYmFyLmVudGl0eSwgYmFzZSwgZXRpbWUsIHN1bSk7CgkJbmVudGl0aWVzKys7Cgl9IGVsc2UgewoJCS8qCgkJICogRm9yIGVhY2ggZW50aXR5LCB3ZSBuZWVkIHRvIGRldGVybWluZSB0aGUgYW1vdW50IG9mIHRpbWUKCQkgKiBpbiBvdXIgc2VsZWN0ZWQgc3RhdGUuCgkJICovCgkJZm9yIChlbnRpdHkgaW4gZ19lbnRpdGllcykgewoJCQllbnRpdHlGb3JFYWNoRGF0dW0oZ19lbnRpdGllc1tlbnRpdHldLAoJCQkgICAgYmFzZSwgZXRpbWUsIHN1bSk7CgkJCW5lbnRpdGllcysrOwoJCX0KCX0KCgl2YXIgc29ydGVkID0gT2JqZWN0LmtleXMoYnl0YWcpLnNvcnQoZnVuY3Rpb24gKGxocywgcmhzKSB7CgkJaWYgKGJ5dGFnW2xoc10gPCBieXRhZ1tyaHNdKSB7CgkJCXJldHVybiAoMSk7CgkJfSBlbHNlIGlmIChieXRhZ1tsaHNdID4gYnl0YWdbcmhzXSkgewoJCQlyZXR1cm4gKC0xKTsKCQl9IGVsc2UgewoJCQlyZXR1cm4gKDApOwoJCX0KCX0pOwoKCXZhciBkaXZpc29yOwoKCWlmIChldGltZSA9PT0gMCkgewoJCWRpdmlzb3IgPSBuZW50aXRpZXM7Cgl9IGVsc2UgewoJCWRpdmlzb3IgPSAoZXRpbWUgLSBiYXNlKSAqIG5lbnRpdGllczsKCX0KCgl2YXIgeCA9IGdfc3RhdGVzZWwueDsKCXZhciB5ID0gZ19zdGF0ZXNlbC55ICsgMTA7CgoJdmFyIGVsZW0gPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZCgnc3RhdGVtYXAtdGFnYm94LXNlbGVjdCcpOwoKCXdoaWxlIChlbGVtLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkKCQllbGVtLnJlbW92ZUNoaWxkKGVsZW0uY2hpbGROb2Rlc1swXSk7CgoJaWYgKGdfdGFndmFsc2VsICYmIGdfdGFndmFsc2VsLmVsZW1lbnQpCgkJZ190YWd2YWxzZWwuZWxlbWVudCA9IHVuZGVmaW5lZDsKCgl2YXIgdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhlbGVtLm5hbWVzcGFjZVVSSSwgJ3RleHQnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1oZWFkZXInKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7CgoJdGV4dC5hcHBlbmRDaGlsZChnX3N2Z0RvYy5jcmVhdGVUZXh0Tm9kZShoZWFkZXIpKTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnLCB4KTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3knLCB5KTsKCWVsZW0uYXBwZW5kQ2hpbGQodGV4dCk7Cgl5ICs9IDk7CgoJdmFyIGxpbmUgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMoZWxlbS5uYW1lc3BhY2VVUkksICdsaW5lJyk7CglsaW5lLmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXRhZ2JveC1zZWxlY3QtaGVhZGVyLWxpbmUnKTsKCWxpbmUueDEuYmFzZVZhbC52YWx1ZSA9IHggLSAyOwoJbGluZS55MS5iYXNlVmFsLnZhbHVlID0geTsKCWxpbmUueDIuYmFzZVZhbC52YWx1ZSA9IGdfc3RhdGVzZWwueDI7CglsaW5lLnkyLmJhc2VWYWwudmFsdWUgPSB5OwoJZWxlbS5hcHBlbmRDaGlsZChsaW5lKTsKCXkgKz0gMTg7CgoJdmFyIGJtYXJnaW4gPSA2MDsKCXZhciB0dGwgPSAwOwoJdmFyIGVsbGlwc2lzID0gZmFsc2U7CgoJdmFyIGNsaWNrID0gZnVuY3Rpb24gKHR2KSB7CgkJcmV0dXJuIChmdW5jdGlvbiAoZXZ0KSB7IHN0YXRlc2VsVGFndmFsU2VsZWN0KGV2dCwgdHYpOyB9KTsKCX07CgoJZm9yIChpID0gMDsgaSA8PSBzb3J0ZWQubGVuZ3RoOyBpKyspIHsKCQl2YXIgdCwgcGVyYzsKCgkJaWYgKGkgPCBzb3J0ZWQubGVuZ3RoKSB7CgkJCXBlcmMgPSAoYnl0YWdbc29ydGVkW2ldXSAvIGRpdmlzb3IpICogMTAwLjA7CgkJCXRhZ3ZhbCA9IHNvcnRlZFtpXTsKCQkJdHRsICs9IHBlcmM7CgoJCQlpZiAoeSA+IGdsb2JhbHMudG90YWxIZWlnaHQgLSBibWFyZ2luKSB7CgkJCQlpZiAoZWxsaXBzaXMpCgkJCQkJY29udGludWU7CgoJCQkJZWxsaXBzaXMgPSB0cnVlOwoJCQkJdGFndmFsID0gJy4uLic7CgkJCX0KCQl9IGVsc2UgewoJCQlwZXJjID0gdHRsOwoJCQl0YWd2YWwgPSAndG90YWwnOwoKCQkJeSAtPSA1OwoJCQlsaW5lID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKGVsZW0ubmFtZXNwYWNlVVJJLAoJCQkgICAgJ2xpbmUnKTsKCQkJbGluZS5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10YWdib3gtc2VsZWN0LXN1bS1saW5lJyk7CgkJCWxpbmUueDEuYmFzZVZhbC52YWx1ZSA9IHggLSAyOwoJCQlsaW5lLnkxLmJhc2VWYWwudmFsdWUgPSB5OwoJCQlsaW5lLngyLmJhc2VWYWwudmFsdWUgPSBnX3N0YXRlc2VsLngyOwoJCQlsaW5lLnkyLmJhc2VWYWwudmFsdWUgPSB5OwoJCQllbGVtLmFwcGVuZENoaWxkKGxpbmUpOwoJCQl5ICs9IDE1OwoJCX0KCgkJaWYgKGkgIT0gc29ydGVkLmxlbmd0aCAmJiBlbGxpcHNpcykgewoJCQl0ID0gJy4uLic7CgkJfSBlbHNlIHsKCQkJdCA9IE1hdGgudHJ1bmMocGVyYykgKyAnLicgKwoJCQkgICAgKE1hdGgucm91bmQocGVyYyAqIDEwMCkgJSAxMDApICsgJyUnOwoJCX0KCgkJdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhlbGVtLm5hbWVzcGFjZVVSSSwgJ3RleHQnKTsKCQl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXRhZ2JveC1zZWxlY3QtcGVyYycpOwoJCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7CgkJdGV4dC5hcHBlbmRDaGlsZChnX3N2Z0RvYy5jcmVhdGVUZXh0Tm9kZSh0KSk7CgkJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIHggKyA0NSk7CgkJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHkpOwoJCWVsZW0uYXBwZW5kQ2hpbGQodGV4dCk7CgoJCXRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMoZWxlbS5uYW1lc3BhY2VVUkksICd0ZXh0Jyk7CgkJdGV4dC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10YWdib3gtc2VsZWN0Jyk7CgkJdGV4dC5jbGFzc0xpc3QuYWRkKCdzYW5zc2VyaWYnKTsKCQl0ZXh0LmFwcGVuZENoaWxkKGdfc3ZnRG9jLmNyZWF0ZVRleHROb2RlKHRhZ3ZhbCkpOwoJCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnLCB4ICsgNTApOwoJCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3knLCB5KTsKCgkJLyoKCQkgKiBJZiB3ZSBhbHJlYWR5IGhhdmUgYSB0YWcgdmFsdWUgc2VsZWN0aW9uIGFuZCBpdCBtYXRjaGVzCgkJICogd2hhdCB3ZSdyZSBhYm91dCB0byBkaXNwbGF5LCBpbmRpY2F0ZSBhcyBtdWNoIGJ5CgkJICogaGlnaGxpZ2h0aW5nIGl0LgoJCSAqLwoJCWlmIChnX3RhZ3ZhbHNlbCAmJiBnX3RhZ3ZhbHNlbC50YWcgPT0gZ190YWdzZWwudGFnICYmCgkJICAgIGdfdGFndmFsc2VsLnRhZ3ZhbCA9PSB0YWd2YWwpIHsKCQkJdmFyIGhpZ2hsaWdodCA9ICdzdGF0ZW1hcC10YWdib3gtc2VsZWN0LWhpZ2hsaWdodGVkJzsKCQkJdGV4dC5jbGFzc0xpc3QuYWRkKGhpZ2hsaWdodCk7CgkJCWdfdGFndmFsc2VsLmVsZW1lbnQgPSB0ZXh0OwoJCX0KCgkJdGV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrKHRhZ3ZhbCkpOwoKCQllbGVtLnRpdGxlID0gdDsKCQllbGVtLmFwcGVuZENoaWxkKHRleHQpOwoJCXkgKz0gMTU7Cgl9Cn07Cgp2YXIgc3RhdGVzZWxUYWdTZWxlY3QgPSBmdW5jdGlvbiAoZXZ0LCB0YWcpCnsKCXZhciBlbGVtLCBwcmVmaXggPSAnc3RhdGVtYXAtdGFnYm94LXRhZy0nOwoKCWlmIChnX3RhZ3NlbCkgewoJCWVsZW0gPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZChwcmVmaXggKyBnX3RhZ3NlbC50YWcpOwoJCWVsZW0uY2xhc3NMaXN0LnJlbW92ZShwcmVmaXggKyAnaGlnaGxpZ2h0ZWQnKTsKCgkJaWYgKGdfdGFnc2VsLnRhZyA9PSB0YWcpIHsKCQkJZ190YWdzZWwgPSB1bmRlZmluZWQ7CgkJCXN0YXRlc2VsVXBkYXRlKCk7CgkJCXJldHVybjsKCQl9Cgl9CgoJZWxlbSA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKHByZWZpeCArIHRhZyk7CgllbGVtLmNsYXNzTGlzdC5hZGQocHJlZml4ICsgJ2hpZ2hsaWdodGVkJyk7CglnX3RhZ3NlbCA9IHsgdGFnOiB0YWcgfTsKCXN0YXRlc2VsVXBkYXRlKCk7Cn07Cgp2YXIgc3RhdGVzZWxDbGVhclRhZ2JveCA9IGZ1bmN0aW9uICgpCnsKCXZhciB0YWdib3ggPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZCgnc3RhdGVtYXAtdGFnYm94JyksIGVsZW07CgoJaWYgKCF0YWdib3gpCgkJcmV0dXJuOwoKCXdoaWxlICh0YWdib3guY2hpbGROb2Rlcy5sZW5ndGggPiAwKQoJCXRhZ2JveC5yZW1vdmVDaGlsZCh0YWdib3guY2hpbGROb2Rlc1swXSk7CgoJZWxlbSA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC10YWdib3gtc2VsZWN0Jyk7CgoJd2hpbGUgKGVsZW0uY2hpbGROb2Rlcy5sZW5ndGggPiAwKQoJCWVsZW0ucmVtb3ZlQ2hpbGQoZWxlbS5jaGlsZE5vZGVzWzBdKTsKfTsKCnZhciBzdGF0ZXNlbFNlbGVjdCA9IGZ1bmN0aW9uIChzdGF0ZW1hcCwgc3RhdGUpCnsKCXZhciBsZWdlbmQgPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZCgnc3RhdGVtYXAtbGVnZW5kLScgKwoJICAgIGdfc3RhdGVtYXBzW3N0YXRlbWFwXS5sZWdlbmQgKyAnLScgKyBzdGF0ZSk7Cgl2YXIgc3RhdGVzID0gZ19zdGF0ZW1hcHNbc3RhdGVtYXBdLnN0YXRlczsKCXZhciBhbGx0YWdzID0gZ19zdGF0ZW1hcHNbc3RhdGVtYXBdLnRhZ3M7Cgl2YXIgdGFncyA9IHt9OwoJdmFyIGksIHQ7Cgl2YXIgbG1hcmdpbiA9IDIwOwoJdmFyIG9mZnNldCA9IGdsb2JhbHMubG1hcmdpbiArIGdsb2JhbHMucGl4ZWxXaWR0aDsKCglsZWdlbmQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtbGVnZW5kLWhpZ2hsaWdodGVkJyk7CglzdGF0ZXNlbENsZWFyVGFnYm94KCk7CgoJdCA9ICd0YWdzIGZvciAnICsgc3RhdGVzW3N0YXRlXS5uYW1lOwoKCXZhciB0YWdib3ggPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZCgnc3RhdGVtYXAtdGFnYm94Jyk7Cgl2YXIgeCA9IG9mZnNldCArIGxtYXJnaW47Cgl2YXIgeSA9IGdsb2JhbHMudG1hcmdpbjsKCXZhciB4MiA9IHggKyAoZ2xvYmFscy50YWdXaWR0aCAtIGxtYXJnaW4pOwoKCXZhciB0ZXh0ID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHRhZ2JveC5uYW1lc3BhY2VVUkksICd0ZXh0Jyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXRhZ2JveC1oZWFkZXInKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7CgoJdGV4dC5hcHBlbmRDaGlsZChnX3N2Z0RvYy5jcmVhdGVUZXh0Tm9kZSh0KSk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgeCk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd5JywgeSk7Cgl0YWdib3guYXBwZW5kQ2hpbGQodGV4dCk7Cgl5ICs9IDEwOwoKCXZhciBsaW5lID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHRhZ2JveC5uYW1lc3BhY2VVUkksICdsaW5lJyk7CglsaW5lLmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXRhZ2JveC1oZWFkZXItbGluZScpOwoJbGluZS54MS5iYXNlVmFsLnZhbHVlID0geCAtIDI7CglsaW5lLnkxLmJhc2VWYWwudmFsdWUgPSB5OwoJbGluZS54Mi5iYXNlVmFsLnZhbHVlID0geDI7CglsaW5lLnkyLmJhc2VWYWwudmFsdWUgPSB5OwoJdGFnYm94LmFwcGVuZENoaWxkKGxpbmUpOwoJeSArPSAyMDsKCgkvKgoJICogTm93IGFkZCB0ZXh0IGZvciBlYWNoIHBvc3NpYmxlIHRhZyBmb3IgdGhpcyBzdGF0ZS4KCSAqLwoJZm9yIChpID0gMDsgaSA8IGFsbHRhZ3MubGVuZ3RoOyBpKyspIHsKCQlpZiAoYWxsdGFnc1tpXS5zdGF0ZSAhPT0gc3RhdGUpCgkJCWNvbnRpbnVlOwoKCQlmb3IgKHQgaW4gYWxsdGFnc1tpXSkgewoJCQlpZiAodCA9PSAnc3RhdGUnIHx8IHQgPT0gJ3RhZycpCgkJCQljb250aW51ZTsKCgkJCXRhZ3NbdF0gPSB0cnVlOwoJCX0KCX0KCgl0YWdzID0gT2JqZWN0LmtleXModGFncykuc29ydCgpOwoKCXZhciBjbGljayA9IGZ1bmN0aW9uICh0YWcpIHsKCQlyZXR1cm4gKGZ1bmN0aW9uIChldnQpIHsgc3RhdGVzZWxUYWdTZWxlY3QoZXZ0LCB0YWcpOyB9KTsKCX07CgoJZm9yIChpID0gMDsgaSA8IHRhZ3MubGVuZ3RoOyBpKyspIHsKCQl0ZXh0ID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHRhZ2JveC5uYW1lc3BhY2VVUkksICd0ZXh0Jyk7CgkJdGV4dC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10YWdib3gtdGFnJyk7CgkJdGV4dC5jbGFzc0xpc3QuYWRkKCdzYW5zc2VyaWYnKTsKCQl0ZXh0LmlkID0gJ3N0YXRlbWFwLXRhZ2JveC10YWctJyArIHRhZ3NbaV07CgoJCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUodGFnc1tpXSkpOwoJCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnLCB4KTsKCQl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd5JywgeSk7CgkJdGV4dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsaWNrKHRhZ3NbaV0pKTsKCgkJdGFnYm94LmFwcGVuZENoaWxkKHRleHQpOwoJCXkgKz0gMTg7Cgl9CgoJZ19zdGF0ZXNlbCA9IHsgc3RhdGVtYXA6IHN0YXRlbWFwLCBzdGF0ZTogc3RhdGUsIHg6IHgsIHk6IHksIHgyOiB4MiB9OwoJc3RhdGVzZWxVcGRhdGUoKTsKfTsKCnZhciBzdGF0ZXNlbENsZWFyID0gZnVuY3Rpb24gKCkKewoJdmFyIHN0YXRlLCBzdGF0ZW1hcCwgbGVnZW5kOwoKCWlmIChnX3N0YXRlc2VsID09IHVuZGVmaW5lZCkKCQlyZXR1cm4gKC0xKTsKCglzdGF0ZSA9IGdfc3RhdGVzZWwuc3RhdGU7CglzdGF0ZW1hcCA9IGdfc3RhdGVzZWwuc3RhdGVtYXA7CglsZWdlbmQgPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZCgnc3RhdGVtYXAtbGVnZW5kLScgKwoJICAgIHN0YXRlbWFwICsgJy0nICsgc3RhdGUpOwoJbGVnZW5kLmNsYXNzTGlzdC5yZW1vdmUoJ3N0YXRlbWFwLWxlZ2VuZC1oaWdobGlnaHRlZCcpOwoKCXN0YXRlc2VsQ2xlYXJUYWdib3goKTsKCWdfc3RhdGVzZWwgPSB1bmRlZmluZWQ7CglnX3RhZ3NlbCA9IHVuZGVmaW5lZDsKCglyZXR1cm4gKHN0YXRlKTsKfTsKCnZhciBzdGF0ZW1hcHNVcGRhdGUgPSBmdW5jdGlvbiAoKQp7Cgl2YXIgaTsKCXZhciBuZXdNYXRyaXggPSAnbWF0cml4KCcgKyAgZ190cmFuc01hdHJpeC5qb2luKCcgJykgKyAnKSc7CgoJZm9yIChpID0gMDsgaSA8IGdfc3RhdGVtYXBzLmxlbmd0aDsgaSsrKSB7CgkJZ19zdGF0ZW1hcHNbaV0uZWxlbS5zZXRBdHRyaWJ1dGVOUyhudWxsLAoJCSAgICAndHJhbnNmb3JtJywgbmV3TWF0cml4KTsKCX0KfTsKCi8qCiAqIEFsbCBvZiB0aGUgZm9sbG93aW5nICpjbGljaygpIGZ1bmN0aW9ucyBhcmUgYWRkZWQgYXQgdGhlIHRpbWUgb2Ygc3RhdGVtYXAKICogZ2VuZXJhdGlvbi4KICovCnZhciBsZWdlbmRjbGljayA9IGZ1bmN0aW9uIChldnQsIHN0YXRlbWFwLCBzdGF0ZSkKewoJaWYgKGdsb2JhbHMubm90YWdzIHx8IHN0YXRlc2VsQ2xlYXIoKSA9PSBzdGF0ZSkKCQlyZXR1cm47CgoJc3RhdGVzZWxTZWxlY3Qoc3RhdGVtYXAsIHN0YXRlKTsKCXN0YXRlc2VsVXBkYXRlKCk7Cn07Cgp2YXIgbWFwY2xpY2sgPSBmdW5jdGlvbiAoZXZ0LCBpZHgpCnsKCXZhciB4ID0gZXZ0LmNsaWVudFggLSBnX29mZnNldDsKCglpZiAoZXZ0LnNoaWZ0S2V5IHx8IGV2dC5hbHRLZXkpIHsKCQlpZiAoIWdfdGltZWJhciB8fCAhZ190aW1lYmFyLmJhcikKCQkJcmV0dXJuOwoKCQl0aW1lYmFyUmVtb3ZlU3ViYmFyKGdfdGltZWJhcik7CgkJdGltZWJhckNyZWF0ZVN1YmJhcihnX3RpbWViYXIsIHgsIGV2dC5jbGllbnRZKTsKCQlyZXR1cm47Cgl9CgoJdGltZWJhclJlbW92ZShnX3RpbWViYXIpOwoJZ190aW1lYmFyID0gdGltZWJhckNyZWF0ZSh4KTsKCglzdGF0ZWJhclJlbW92ZShnX3N0YXRlYmFyKTsKCWdfc3RhdGViYXIgPSBzdGF0ZWJhckNyZWF0ZShldnQudGFyZ2V0LCBpZHgpOwoKCXN0YXRlc2VsVXBkYXRlKCk7Cn07Cgp2YXIgcGFuY2xpY2sgPSBmdW5jdGlvbiAoZHgsIGR5KQp7Cgl2YXIgbWluWCA9IC0oZ193aWR0aCAqIGdfdHJhbnNNYXRyaXhbMF0gLSBnX3dpZHRoKTsKCXZhciBtaW5ZID0gLShnX2hlaWdodCAqIGdfdHJhbnNNYXRyaXhbMF0gLSBnX2hlaWdodCk7CgoJZ190cmFuc01hdHJpeFs0XSArPSBkeDsKCWdfdHJhbnNNYXRyaXhbNV0gKz0gZHk7CgoJdGltZWJhckhpZGUoZ190aW1lYmFyKTsKCglpZiAoZ190cmFuc01hdHJpeFs0XSA+IDApCgkJZ190cmFuc01hdHJpeFs0XSA9IDA7CgoJaWYgKGdfdHJhbnNNYXRyaXhbNF0gPCBtaW5YKQoJCWdfdHJhbnNNYXRyaXhbNF0gPSBtaW5YOwoKCWlmIChnX3RyYW5zTWF0cml4WzVdID4gMCkKCQlnX3RyYW5zTWF0cml4WzVdID0gMDsKCglpZiAoZ190cmFuc01hdHJpeFs1XSA8IG1pblkpCgkJZ190cmFuc01hdHJpeFs1XSA9IG1pblk7CgoJdGltZVNldFNwYW5MYWJlbCgpOwoJc3RhdGVtYXBzVXBkYXRlKCk7Cgl0aW1lYmFyU2hvdyhnX3RpbWViYXIpOwoJc3RhdGVzZWxVcGRhdGUoKTsKfTsKCnZhciB6b29tY2xpY2sgPSBmdW5jdGlvbiAoc2NhbGUpCnsKCXZhciBpOwoKCXRpbWViYXJIaWRlKGdfdGltZWJhcik7CgoJZm9yIChpID0gMDsgaSA8IGdfdHJhbnNNYXRyaXgubGVuZ3RoOyBpKyspIHsKCQkvKgoJCSAqIFdlIGRvbid0IHNjYWxlIHRoZSBZIGRpcmVjdGlvbiBvbiBhIHpvb20uCgkJICovCgkJaWYgKGkgIT0gMykKCQkJZ190cmFuc01hdHJpeFtpXSAqPSBzY2FsZTsKCX0KCgl2YXIgbWluWCA9IC0oZ193aWR0aCAqIGdfdHJhbnNNYXRyaXhbMF0gLSBnX3dpZHRoKTsKCXZhciBtaW5ZID0gLShnX2hlaWdodCAqIGdfdHJhbnNNYXRyaXhbMF0gLSBnX2hlaWdodCk7CgoJZ190cmFuc01hdHJpeFs0XSArPSAoMSAtIHNjYWxlKSAqIGdfd2lkdGggLyAyOwoJdGltZWJhclNldE1pZGRsZShnX3RpbWViYXIpOwoKCWlmIChnX3RyYW5zTWF0cml4WzRdID4gMCkKCQlnX3RyYW5zTWF0cml4WzRdID0gMDsKCglpZiAoZ190cmFuc01hdHJpeFs0XSA8IG1pblgpCgkJZ190cmFuc01hdHJpeFs0XSA9IG1pblg7CgoJaWYgKGdfdHJhbnNNYXRyaXhbNV0gPiAwKQoJCWdfdHJhbnNNYXRyaXhbNV0gPSAwOwoKCWlmIChnX3RyYW5zTWF0cml4WzVdIDwgbWluWSkKCQlnX3RyYW5zTWF0cml4WzVdID0gbWluWTsKCglpZiAoZ190cmFuc01hdHJpeFswXSA8IDEpCgkJZ190cmFuc01hdHJpeCA9IFsxLCAwLCAwLCAxLCAwLCAwXTsKCgl0aW1lU2V0U3BhbkxhYmVsKCk7CglzdGF0ZW1hcHNVcGRhdGUoKTsKCXRpbWViYXJTaG93KGdfdGltZWJhcik7CglzdGF0ZXNlbFVwZGF0ZSgpOwp9OwoKXV0+PC9zY3JpcHQ+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+PCFbQ0RBVEFbCi8qCiAqIENvcHlyaWdodCAyMDE4LCBKb3llbnQsIEluYy4KICovCgouc2Fuc3NlcmlmIHsKCWZvbnQtZmFtaWx5OiBWZXJkYW5hLCBBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmOwp9CgouYnV0dG9uIHsKICAgICAgICBmaWxsOiAjZmZmOwp9Cgouc3RhdGVtYXAtYm9yZGVyIHsKCWZpbGw6IG5vbmU7CglzdHJva2U6IGJsYWNrOwoJc3Ryb2tlLXdpZHRoOiAwLjU7Cn0KCi5zdGF0ZW1hcC1oaWdobGlnaHQgewoJZmlsbDoJCWJsdWU7Cn0KCi5zdGF0ZW1hcC10aXRsZSB7Cglmb250LXNpemU6CTEwcHQ7Cglmb250LXdlaWdodDoJYm9sZDsKCXRleHQtYW5jaG9yOgltaWRkbGU7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGltZWxhYmVsIHsKCWZvbnQtc2l6ZToJOHB0OwoJdGV4dC1hbmNob3I6CW1pZGRsZTsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10aW1lYmFyIHsKCXN0cm9rZToJCWJsdWU7CglmaWxsOgkJYmx1ZTsKCXN0cm9rZS13aWR0aDoJMXB4Owp9Cgouc3RhdGVtYXAtdGltZXRleHQgewoJZm9udC1zaXplOgk4cHQ7Cglmb250LXdlaWdodDoJbm9ybWFsOwoJZmlsbDoJCWJsdWU7CglzdHJva2U6CQlibHVlOwoJc3Ryb2tlLXdpZHRoOgkwcHg7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGltZWJyZWFrdGV4dCB7Cglmb250LXNpemU6CThwdDsKCWZvbnQtd2VpZ2h0Oglib2xkOwoJZmlsbDoJCWJsdWU7CglzdHJva2U6CQl3aGl0ZTsKCXN0cm9rZS13aWR0aDoJMC4zcHg7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtc3ViYmFyIHsKCXN0cm9rZToJCWJsdWU7CglmaWxsOgkJYmx1ZTsKCXN0cm9rZS13aWR0aDoJMXB4OwoJc3Ryb2tlLWRhc2hhcnJheTogNS43Owp9Cgouc3RhdGVtYXAtc3ViYmFyLXNwYW4gewoJc3Ryb2tlOgkJYmx1ZTsKCWZpbGw6CQlibHVlOwoJc3Ryb2tlLXdpZHRoOgkwLjc1cHg7CglzdHJva2UtZGFzaGFycmF5OiAxOwp9Cgouc3RhdGVtYXAtc3ViYmFyLXRleHQgewoJZm9udC1zaXplOgk4cHQ7Cglmb250LXdlaWdodDoJYm9sZDsKCWZpbGw6CQlibHVlOwoJc3Ryb2tlOgkJd2hpdGU7CglzdHJva2Utd2lkdGg6CTAuM3B4OwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXN0YXRlYmFyIHsKCXN0cm9rZToJCWJsdWU7CglmaWxsOgkJYmx1ZTsKCXN0cm9rZS13aWR0aDoJMXB4Owp9Cgouc3RhdGVtYXAtc3RhdGV0ZXh0IHsKCWZvbnQtc2l6ZToJOHB0OwoJZm9udC13ZWlnaHQ6CW5vcm1hbDsKCWZpbGw6CQlibHVlOwoJc3Ryb2tlOgkJYmx1ZTsKCXN0cm9rZS13aWR0aDoJMHB4OwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRpbWVsaW5lIHsKCXN0cm9rZTogYmxhY2s7CglzdHJva2Utd2lkdGg6CTAuNXB0OwoJbWFya2VyLXN0YXJ0Ogl1cmwoI3N0YXJ0YXJyb3cpOwoJbWFya2VyLWVuZDoJdXJsKCNlbmRhcnJvdyk7Cn0KCi5zdGF0ZW1hcC1sZWdlbmQgewoJc3Ryb2tlOiBibGFjazsKCXN0cm9rZS13aWR0aDoJMC41cHQ7Cn0KCi5zdGF0ZW1hcC1sZWdlbmQtaGlnaGxpZ2h0ZWQgewoJc3Ryb2tlOgkJYmx1ZTsKCXN0cm9rZS13aWR0aDoJM3B0Owp9Cgouc3RhdGVtYXAtbGVnZW5kbGFiZWwgewoJZm9udC1zaXplOgk3cHQ7Cgl0ZXh0LWFuY2hvcjoJbWlkZGxlOwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRhZ2JveCB7CglzdHJva2U6CQlibGFjazsKCXN0cm9rZS13aWR0aDoJMC41cHQ7CglhbGlnbm1lbnQtYmFzZWxpbmU6CWhhbmdpbmc7Cgl0ZXh0LWFuY2hvcjoJc3RhcnQ7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGFnYm94LWhlYWRlciB7Cglmb250LXNpemU6CTlwdDsKCWZvbnQtd2VpZ2h0Oglib2xkOwoJdGV4dC1hbmNob3I6CXN0YXJ0OwoJZm9udC1zdHlsZToJb2JsaXF1ZTsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10YWdib3gtaGVhZGVyLWxpbmUgewoJc3Ryb2tlOgkJYmxhY2s7CglzdHJva2Utd2lkdGg6CTFwdDsKfQoKLnN0YXRlbWFwLXRhZ2JveC10YWcgewoJZm9udC1zaXplOgk5cHQ7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGFnYm94LXRhZy1oaWdobGlnaHRlZCB7Cglmb250LXdlaWdodDoJYm9sZDsKfQoKLnN0YXRlbWFwLXRhZ2JveC1zZWxlY3QtaGVhZGVyIHsKCWZvbnQtc2l6ZToJOHB0OwoJdGV4dC1hbmNob3I6CXN0YXJ0OwoJZm9udC1zdHlsZToJb2JsaXF1ZTsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10YWdib3gtc2VsZWN0IHsKCWZvbnQtc2l6ZToJOHB0OwoJdGV4dC1hbmNob3I6CXN0YXJ0OwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRhZ2JveC1zZWxlY3QtcGVyYyB7Cglmb250LXNpemU6CThwdDsKCXRleHQtYW5jaG9yOgllbmQ7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1oZWFkZXItbGluZSB7CglzdHJva2U6CQlibGFjazsKCXN0cm9rZS13aWR0aDoJMC41cHQ7Cn0KCi5zdGF0ZW1hcC10YWdib3gtc2VsZWN0LXN1bS1saW5lIHsKCXN0cm9rZToJCWJsYWNrOwoJc3Ryb2tlLXdpZHRoOgkwLjI1cHQ7Cn0KCi5zdGF0ZW1hcC10YWdib3gtc2VsZWN0LWhpZ2hsaWdodGVkIHsKCWZvbnQtd2VpZ2h0Oglib2xkOwp9CgpdXT48L3N0eWxlPgoKPCEtLSBUaGlzIGZpbGUgaXMgcHVsbGVkIGludG8gdGhlIDxkZWZzPiBzZWN0aW9uICEtLT4KCiA8bWFya2VyIGlkPSJzdGFydGFycm93IiBtYXJrZXJXaWR0aD0iMTAiIG1hcmtlckhlaWdodD0iNyIgCiAgICByZWZYPSIxMCIgcmVmWT0iMy41IiBvcmllbnQ9ImF1dG8iPgogICAgICA8cG9seWdvbiBwb2ludHM9IjEwIDAsIDEwIDcsIDAgMy41IiBmaWxsPSJibGFjayIgLz4KICAgIDwvbWFya2VyPgogICAgPG1hcmtlciBpZD0iZW5kYXJyb3ciIG1hcmtlcldpZHRoPSIxMCIgbWFya2VySGVpZ2h0PSI3IiAKICAgIHJlZlg9IjAiIHJlZlk9IjMuNSIgb3JpZW50PSJhdXRvIiBtYXJrZXJVbml0cz0ic3Ryb2tlV2lkdGgiPgogICAgICAgIDxwb2x5Z29uIHBvaW50cz0iMCAwLCAxMCAzLjUsIDAgNyIgZmlsbD0iYmxhY2siIC8+CiAgICA8L21hcmtlcj4KCgo8L2RlZnM+CjxzdmcgeD0iMTM4cHgiIHk9IjYwcHgiIHdpZHRoPSI4NjJweCIgaGVpZ2h0PSIzMDBweCI+CjxyZWN0IHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iODYycHgiIGhlaWdodD0iMzAwcHgiIGZpbGw9IiNmMGYwZjAiIGlkPSJzdGF0ZW1hcC0wLWhpZ2hsaWdodCIgLz4KPGcgaWQ9InN0YXRlbWFwLTAiIHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIDEgMCAwKSI+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTAtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDItMC1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi0wLXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMi0wLXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTItMS1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgMi0xLWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjIwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi0xLXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMi0xLXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIzMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTItMi1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgMi0yLWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjQwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi0yLXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMi0yLXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSI1MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTItMy1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgMi0zLWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjYwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi0zLXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMi0zLXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSI3MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTItNC1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgMi00LWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjgwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi00LXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMi00LXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSI5MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTItNS1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgMi01LWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjEwMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTItNS10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDItNS10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTEwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMy0wLWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSAzLTAtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTIwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMy0wLXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMy0wLXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxMzAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0zLTEtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDMtMS1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxNDAiIHdpZHRoPSIxNTIuNTEyOTA1MzcxMjU5MzQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPHJlY3QgeD0iMTUyLjExMjkwNTM3MTI1OTMzIiB5PSIxNDAiIHdpZHRoPSIwLjQyNjg3MDMyNDE4OTUyNjIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMSkiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAyNTUpIiAvPgo8cmVjdCB4PSIxNTIuMTM5Nzc1Njk1NDQ4OSIgeT0iMTQwIiB3aWR0aD0iMC40MjY4NzAzMjQxODk1MjYyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDIpIiBzdHlsZT0iZmlsbDpyZ2IoMTY1LCA0MiwgNDIpIiAvPgo8cmVjdCB4PSIxNTIuMTY2NjQ2MDE5NjM4NDIiIHk9IjE0MCIgd2lkdGg9IjEuMDcxNzU4MTA0NzM4MTU0NiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAzKSIgc3R5bGU9ImZpbGw6cmdiKDAsIDAsIDI1NSkiIC8+CjxyZWN0IHg9IjE1Mi44Mzg0MDQxMjQzNzY1NSIgeT0iMTQwIiB3aWR0aD0iNjIuNzkyODkyNzY4MDc5Nzk1IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDQpIiBzdHlsZT0iZmlsbDpyZ2IoMTI4LCAxMjgsIDEyOCkiIC8+CjxyZWN0IHg9IjIxNS4yMzEyOTY4OTI0NTYzNiIgeT0iMTQwIiB3aWR0aD0iMC40MjY4NzAzMjQxODk1MjYyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDUpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8cmVjdCB4PSIyMTUuMjU4MTY3MjE2NjQ1OSIgeT0iMTQwIiB3aWR0aD0iMC40MjY4NzAzMjQxODk1MjYyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDYpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDApIiAvPgo8cmVjdCB4PSIyMTUuMjg1MDM3NTQwODM1NDIiIHk9IjE0MCIgd2lkdGg9IjEuMDcxNzU4MTA0NzM4MTU0NiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA3KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMTY1LCAwKSIgLz4KPHJlY3QgeD0iMjE1Ljk1Njc5NTY0NTU3MzU1IiB5PSIxNDAiIHdpZHRoPSIxMDIuMzQ2MDA5OTc1MDYyMzQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgOCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPHJlY3QgeD0iMzE3LjkwMjgwNTYyMDYzNTkiIHk9IjE0MCIgd2lkdGg9IjEuMDcxNzU4MTA0NzM4MTU0NiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA5KSIgc3R5bGU9ImZpbGw6cmdiKDAsIDAsIDI1NSkiIC8+CjxyZWN0IHg9IjMxOC41NzQ1NjM3MjUzNzQxIiB5PSIxNDAiIHdpZHRoPSIzMS4xNjY1MjExOTcwMDc0NzYiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMTApIiBzdHlsZT0iZmlsbDpyZ2IoMTI4LCAxMjgsIDEyOCkiIC8+CjxyZWN0IHg9IjM0OS4zNDEwODQ5MjIzODE1IiB5PSIxNDAiIHdpZHRoPSIxLjA3MTc1ODEwNDczODE1NDYiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMTEpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8cmVjdCB4PSIzNTAuMDEyODQzMDI3MTE5NyIgeT0iMTQwIiB3aWR0aD0iMTAxLjM3ODY3ODMwNDIzOTQxIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDEyKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8cmVjdCB4PSI0NTAuOTkxNTIxMzMxMzU5MTQiIHk9IjE0MCIgd2lkdGg9IjAuNDI2ODcwMzI0MTg5NTI2MiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAxMykiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAyNTUpIiAvPgo8cmVjdCB4PSI0NTEuMDE4MzkxNjU1NTQ4NiIgeT0iMTQwIiB3aWR0aD0iMC40MjY4NzAzMjQxODk1MjYyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDE0KSIgc3R5bGU9ImZpbGw6cmdiKDE2NSwgNDIsIDQyKSIgLz4KPHJlY3QgeD0iNDUxLjA0NTI2MTk3OTczODE0IiB5PSIxNDAiIHdpZHRoPSIxLjA3MTc1ODEwNDczODE1NDYiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMTUpIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMjU1KSIgLz4KPHJlY3QgeD0iNDUxLjcxNzAyMDA4NDQ3NjI1IiB5PSIxNDAiIHdpZHRoPSIzMS44MTE0MDg5Nzc1NTYxMSIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAxNikiIHN0eWxlPSJmaWxsOnJnYigxMjgsIDEyOCwgMTI4KSIgLz4KPHJlY3QgeD0iNDgzLjEyODQyOTA2MjAzMjQiIHk9IjE0MCIgd2lkdGg9IjEuMDcxNzU4MTA0NzM4MTU0NiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAxNykiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDE2NSwgMCkiIC8+CjxyZWN0IHg9IjQ4My44MDAxODcxNjY3NzA1NyIgeT0iMTQwIiB3aWR0aD0iMTA4LjM2NDk2MjU5MzUxNjIxIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDE4KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8cmVjdCB4PSI1OTEuNzY1MTQ5NzYwMjg2NyIgeT0iMTQwIiB3aWR0aD0iMC40MjY4NzAzMjQxODk1MjYyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDE5KSIgc3R5bGU9ImZpbGw6cmdiKDAsIDAsIDI1NSkiIC8+CjxyZWN0IHg9IjU5MS43OTIwMjAwODQ0NzYzIiB5PSIxNDAiIHdpZHRoPSIwLjQyNjg3MDMyNDE4OTUyNjIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMjApIiBzdHlsZT0iZmlsbDpyZ2IoMTY1LCA0MiwgNDIpIiAvPgo8cmVjdCB4PSI1OTEuODE4ODkwNDA4NjY1OSIgeT0iMTQwIiB3aWR0aD0iMS4wNzE3NTgxMDQ3MzgxNTQ2IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDIxKSIgc3R5bGU9ImZpbGw6cmdiKDAsIDAsIDI1NSkiIC8+CjxyZWN0IHg9IjU5Mi40OTA2NDg1MTM0MDM5IiB5PSIxNDAiIHdpZHRoPSIyOC42NDA3MTA3MjMxOTIwMiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAyMikiIHN0eWxlPSJmaWxsOnJnYigxMjgsIDEyOCwgMTI4KSIgLz4KPHJlY3QgeD0iNjIwLjczMTM1OTIzNjU5NjEiIHk9IjE0MCIgd2lkdGg9IjAuNDI2ODcwMzI0MTg5NTI2MiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAyMykiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDE2NSwgMCkiIC8+CjxyZWN0IHg9IjYyMC43NTgyMjk1NjA3ODU1IiB5PSIxNDAiIHdpZHRoPSIwLjQyNjg3MDMyNDE4OTUyNjIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMjQpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDApIiAvPgo8cmVjdCB4PSI2MjAuNzg1MDk5ODg0OTc1MSIgeT0iMTQwIiB3aWR0aD0iMS4wNzE3NTgxMDQ3MzgxNTQ2IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDI1KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMTY1LCAwKSIgLz4KPHJlY3QgeD0iNjIxLjQ1Njg1Nzk4OTcxMzMiIHk9IjE0MCIgd2lkdGg9IjEwOS41NzQxMjcxODIwNDQ4OSIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAyNikiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPHJlY3QgeD0iNzMwLjYzMDk4NTE3MTc1ODEiIHk9IjE0MCIgd2lkdGg9IjEuMDcxNzU4MTA0NzM4MTU0NiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAyNykiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAyNTUpIiAvPgo8cmVjdCB4PSI3MzEuMzAyNzQzMjc2NDk2MiIgeT0iMTQwIiB3aWR0aD0iNDcuNDc2ODA3OTgwMDQ5ODgiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMjgpIiBzdHlsZT0iZmlsbDpyZ2IoMTI4LCAxMjgsIDEyOCkiIC8+CjxyZWN0IHg9Ijc3OC4zNzk1NTEyNTY1NDYyIiB5PSIxNDAiIHdpZHRoPSIxLjA3MTc1ODEwNDczODE1NDYiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMjkpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8cmVjdCB4PSI3NzkuMDUxMzA5MzYxMjg0MyIgeT0iMTQwIiB3aWR0aD0iODMuMzQ4NjkwNjM4NzE1NzIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMzApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTMtMS10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDMtMS10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTUwIiB3aWR0aD0iMTUyLjUxMjkwNTM3MTI1OTM0IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjxyZWN0IHg9IjE1Mi4xMTI5MDUzNzEyNTkzMyIgeT0iMTUwIiB3aWR0aD0iNjMuNTE4MzkxNTIxMTk3MDEiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMSkiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAwKSIgLz4KPHJlY3QgeD0iMjE1LjIzMTI5Njg5MjQ1NjM2IiB5PSIxNTAiIHdpZHRoPSIxMDMuMDcxNTA4NzI4MTc5NTciIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMikiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPHJlY3QgeD0iMzE3LjkwMjgwNTYyMDYzNTkiIHk9IjE1MCIgd2lkdGg9IjMxLjgzODI3OTMwMTc0NTYzMyIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAzKSIgc3R5bGU9ImZpbGw6cmdiKDAsIDAsIDApIiAvPgo8cmVjdCB4PSIzNDkuMzQxMDg0OTIyMzgxNSIgeT0iMTUwIiB3aWR0aD0iMTAyLjA1MDQzNjQwODk3NzU2IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDQpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjxyZWN0IHg9IjQ1MC45OTE1MjEzMzEzNTkxNCIgeT0iMTUwIiB3aWR0aD0iMzIuNTM2OTA3NzMwNjczMzEiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgNSkiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAwKSIgLz4KPHJlY3QgeD0iNDgzLjEyODQyOTA2MjAzMjQiIHk9IjE1MCIgd2lkdGg9IjEwOS4wMzY3MjA2OTgyNTQzNiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA2KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8cmVjdCB4PSI1OTEuNzY1MTQ5NzYwMjg2NyIgeT0iMTUwIiB3aWR0aD0iMjkuMzY2MjA5NDc2MzA5MjIzIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDcpIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMCkiIC8+CjxyZWN0IHg9IjYyMC43MzEzNTkyMzY1OTYxIiB5PSIxNTAiIHdpZHRoPSIxMTAuMjk5NjI1OTM1MTYyMTEiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgOCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPHJlY3QgeD0iNzMwLjYzMDk4NTE3MTc1ODEiIHk9IjE1MCIgd2lkdGg9IjQ4LjE0ODU2NjA4NDc4ODAzIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDkpIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMCkiIC8+CjxyZWN0IHg9Ijc3OC4zNzk1NTEyNTY1NDYyIiB5PSIxNTAiIHdpZHRoPSI4NC4wMjA0NDg3NDM0NTM4NyIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAxMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMy0zLWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSAzLTMtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTYwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMy0zLXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMy0zLXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxNzAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0zLTQtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDMtNC1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxODAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0zLTQtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSAzLTQtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjE5MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTQtNC1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgNC00LWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjIwMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTQtNC10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDQtNC10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMjEwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtNS00LWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSA1LTQtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMjIwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtNS00LXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgNS00LXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyMzAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC02LTQtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDYtNC1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyNDAiIHdpZHRoPSI4Mi40MDgyMjk1NjA3ODU1NCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8cmVjdCB4PSI4Mi4wMDgyMjk1NjA3ODU1NCIgeT0iMjQwIiB3aWR0aD0iMC40MjY4NzAzMjQxODk1MjYyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDEpIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMjU1KSIgLz4KPHJlY3QgeD0iODIuMDM1MDk5ODg0OTc1MDUiIHk9IjI0MCIgd2lkdGg9IjAuNDI2ODcwMzI0MTg5NTI2MiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAyKSIgc3R5bGU9ImZpbGw6cmdiKDE2NSwgNDIsIDQyKSIgLz4KPHJlY3QgeD0iODIuMDYxOTcwMjA5MTY0NTgiIHk9IjI0MCIgd2lkdGg9IjEuMDcxNzU4MTA0NzM4MTU0NiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAzKSIgc3R5bGU9ImZpbGw6cmdiKDAsIDAsIDI1NSkiIC8+CjxyZWN0IHg9IjgyLjczMzcyODMxMzkwMjc0IiB5PSIyNDAiIHdpZHRoPSIzOC41NTU4NjAzNDkxMjcxOCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA0KSIgc3R5bGU9ImZpbGw6cmdiKDEyOCwgMTI4LCAxMjgpIiAvPgo8cmVjdCB4PSIxMjAuODg5NTg4NjYzMDI5OTMiIHk9IjI0MCIgd2lkdGg9IjEuMDcxNzU4MTA0NzM4MTU0NiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA1KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMTY1LCAwKSIgLz4KPHJlY3QgeD0iMTIxLjU2MTM0Njc2Nzc2ODA5IiB5PSIyNDAiIHdpZHRoPSIxMzAuNDUyMzY5MDc3MzA2NzQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgNikiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPHJlY3QgeD0iMjUxLjYxMzcxNTg0NTA3NDgiIHk9IjI0MCIgd2lkdGg9IjEuMDcxNzU4MTA0NzM4MTU0NiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA3KSIgc3R5bGU9ImZpbGw6cmdiKDAsIDAsIDI1NSkiIC8+CjxyZWN0IHg9IjI1Mi4yODU0NzM5NDk4MTI5NyIgeT0iMjQwIiB3aWR0aD0iNDUuNTE1Mjc0MzE0MjE0NDY2IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDgpIiBzdHlsZT0iZmlsbDpyZ2IoMTI4LCAxMjgsIDEyOCkiIC8+CjxyZWN0IHg9IjI5Ny40MDA3NDgyNjQwMjc0IiB5PSIyNDAiIHdpZHRoPSIwLjQyNjg3MDMyNDE4OTUyNjIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgOSkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDE2NSwgMCkiIC8+CjxyZWN0IHg9IjI5Ny40Mjc2MTg1ODgyMTY5NCIgeT0iMjQwIiB3aWR0aD0iMC40MjY4NzAzMjQxODk1MjYyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDEwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAwKSIgLz4KPHJlY3QgeD0iMjk3LjQ1NDQ4ODkxMjQwNjUiIHk9IjI0MCIgd2lkdGg9IjEuMDcxNzU4MTA0NzM4MTU0NiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAxMSkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDE2NSwgMCkiIC8+CjxyZWN0IHg9IjI5OC4xMjYyNDcwMTcxNDQ2NCIgeT0iMjQwIiB3aWR0aD0iODUuMDQxNTIxMTk3MDA3NSIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAxMikiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPHJlY3QgeD0iMzgyLjc2Nzc2ODIxNDE1MjE3IiB5PSIyNDAiIHdpZHRoPSIwLjQyNjg3MDMyNDE4OTUyNjIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMTMpIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMjU1KSIgLz4KPHJlY3QgeD0iMzgyLjc5NDYzODUzODM0MTY0IiB5PSIyNDAiIHdpZHRoPSIwLjQyNjg3MDMyNDE4OTUyNjIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMTQpIiBzdHlsZT0iZmlsbDpyZ2IoMTY1LCA0MiwgNDIpIiAvPgo8cmVjdCB4PSIzODIuODIxNTA4ODYyNTMxMiIgeT0iMjQwIiB3aWR0aD0iMS4wNzE3NTgxMDQ3MzgxNTQ2IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDE1KSIgc3R5bGU9ImZpbGw6cmdiKDAsIDAsIDI1NSkiIC8+CjxyZWN0IHg9IjM4My40OTMyNjY5NjcyNjkzNCIgeT0iMjQwIiB3aWR0aD0iNDcuMjA4MTA0NzM4MTU0NjEiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMTYpIiBzdHlsZT0iZmlsbDpyZ2IoMTI4LCAxMjgsIDEyOCkiIC8+CjxyZWN0IHg9IjQzMC4zMDEzNzE3MDU0MjM5NSIgeT0iMjQwIiB3aWR0aD0iMS4wNzE3NTgxMDQ3MzgxNTQ2IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDE3KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMTY1LCAwKSIgLz4KPHJlY3QgeD0iNDMwLjk3MzEyOTgxMDE2MjEiIHk9IjI0MCIgd2lkdGg9Ijk4LjM5NjA3MjMxOTIwMiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAxOCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPHJlY3QgeD0iNTI4Ljk2OTIwMjEyOTM2NDEiIHk9IjI0MCIgd2lkdGg9IjEuMDcxNzU4MTA0NzM4MTU0NiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAxOSkiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAyNTUpIiAvPgo8cmVjdCB4PSI1MjkuNjQwOTYwMjM0MTAyMyIgeT0iMjQwIiB3aWR0aD0iMzcuNjk2MDA5OTc1MDYyMzQ2IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDIwKSIgc3R5bGU9ImZpbGw6cmdiKDEyOCwgMTI4LCAxMjgpIiAvPgo8cmVjdCB4PSI1NjYuOTM2OTcwMjA5MTY0NSIgeT0iMjQwIiB3aWR0aD0iMC40MjY4NzAzMjQxODk1MjYyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDIxKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMTY1LCAwKSIgLz4KPHJlY3QgeD0iNTY2Ljk2Mzg0MDUzMzM1NDEiIHk9IjI0MCIgd2lkdGg9IjAuNDI2ODcwMzI0MTg5NTI2MiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAyMikiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMCkiIC8+CjxyZWN0IHg9IjU2Ni45OTA3MTA4NTc1NDM2IiB5PSIyNDAiIHdpZHRoPSIxLjA3MTc1ODEwNDczODE1NDYiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMjMpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8cmVjdCB4PSI1NjcuNjYyNDY4OTYyMjgxOCIgeT0iMjQwIiB3aWR0aD0iODIuNDM1MDk5NzUwNjIzNDQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMjQpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjxyZWN0IHg9IjY0OS42OTc1Njg3MTI5MDUyIiB5PSIyNDAiIHdpZHRoPSIxLjA3MTc1ODEwNDczODE1NDYiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMjUpIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMjU1KSIgLz4KPHJlY3QgeD0iNjUwLjM2OTMyNjgxNzY0MzUiIHk9IjI0MCIgd2lkdGg9IjM3LjQyNzMwNjczMzE2NzA4IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDI2KSIgc3R5bGU9ImZpbGw6cmdiKDEyOCwgMTI4LCAxMjgpIiAvPgo8cmVjdCB4PSI2ODcuMzk2NjMzNTUwODEwNSIgeT0iMjQwIiB3aWR0aD0iMC40MjY4NzAzMjQxODk1MjYyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDI3KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMTY1LCAwKSIgLz4KPHJlY3QgeD0iNjg3LjQyMzUwMzg3NSIgeT0iMjQwIiB3aWR0aD0iMC40MjY4NzAzMjQxODk1MjYyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDI4KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAwKSIgLz4KPHJlY3QgeD0iNjg3LjQ1MDM3NDE5OTE4OTUiIHk9IjI0MCIgd2lkdGg9IjAuNTg4MDkyMjY5MzI2NjgzMyIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAyOSkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDE2NSwgMCkiIC8+CjxyZWN0IHg9IjY4Ny42Mzg0NjY0Njg1MTYyIiB5PSIyNDAiIHdpZHRoPSIwLjQyNjg3MDMyNDE4OTUyNjIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMzApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDApIiAvPgo8cmVjdCB4PSI2ODcuNjY1MzM2NzkyNzA1NyIgeT0iMjQwIiB3aWR0aD0iMC40MjY4NzAzMjQxODk1MjYyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDMxKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMTY1LCAwKSIgLz4KPHJlY3QgeD0iNjg3LjY5MjIwNzExNjg5NTIiIHk9IjI0MCIgd2lkdGg9IjEuMDcxNzU4MTA0NzM4MTU0NiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAzMikiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMCkiIC8+CjxyZWN0IHg9IjY4OC4zNjM5NjUyMjE2MzM0IiB5PSIyNDAiIHdpZHRoPSIwLjQ4MDYxMDk3MjU2ODU3ODU0IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDMzKSIgc3R5bGU9ImZpbGw6cmdiKDEyOCwgMTI4LCAxMjgpIiAvPgo8cmVjdCB4PSI2ODguNDQ0NTc2MTk0MjAyIiB5PSIyNDAiIHdpZHRoPSIwLjQyNjg3MDMyNDE4OTUyNjIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMzQpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8cmVjdCB4PSI2ODguNDcxNDQ2NTE4MzkxNSIgeT0iMjQwIiB3aWR0aD0iMC40MjY4NzAzMjQxODk1MjYyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDM1KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAwKSIgLz4KPHJlY3QgeD0iNjg4LjQ5ODMxNjg0MjU4MTEiIHk9IjI0MCIgd2lkdGg9IjEuMDcxNzU4MTA0NzM4MTU0NiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAzNikiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDE2NSwgMCkiIC8+CjxyZWN0IHg9IjY4OS4xNzAwNzQ5NDczMTkyIiB5PSIyNDAiIHdpZHRoPSIxNzMuMjI5OTI1MDUyNjgwOCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAzNykiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtNi00LXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgNi00LXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyNTAiIHdpZHRoPSI4Mi40MDgyMjk1NjA3ODU1NCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8cmVjdCB4PSI4Mi4wMDgyMjk1NjA3ODU1NCIgeT0iMjUwIiB3aWR0aD0iMzkuMjgxMzU5MTAyMjQ0MzkiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMSkiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAwKSIgLz4KPHJlY3QgeD0iMTIwLjg4OTU4ODY2MzAyOTkzIiB5PSIyNTAiIHdpZHRoPSIxMzEuMTI0MTI3MTgyMDQ0OSIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAyKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8cmVjdCB4PSIyNTEuNjEzNzE1ODQ1MDc0OCIgeT0iMjUwIiB3aWR0aD0iNDYuMTg3MDMyNDE4OTUyNjIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMykiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAwKSIgLz4KPHJlY3QgeD0iMjk3LjQwMDc0ODI2NDAyNzQiIHk9IjI1MCIgd2lkdGg9Ijg1Ljc2NzAxOTk1MDEyNDY5IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDQpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjxyZWN0IHg9IjM4Mi43Njc3NjgyMTQxNTIxNyIgeT0iMjUwIiB3aWR0aD0iNDcuOTMzNjAzNDkxMjcxODIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgNSkiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAwKSIgLz4KPHJlY3QgeD0iNDMwLjMwMTM3MTcwNTQyMzk1IiB5PSIyNTAiIHdpZHRoPSI5OS4wNjc4MzA0MjM5NDAxNSIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA2KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8cmVjdCB4PSI1MjguOTY5MjAyMTI5MzY0MSIgeT0iMjUwIiB3aWR0aD0iMzguMzY3NzY4MDc5ODAwNSIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA3KSIgc3R5bGU9ImZpbGw6cmdiKDAsIDAsIDApIiAvPgo8cmVjdCB4PSI1NjYuOTM2OTcwMjA5MTY0NSIgeT0iMjUwIiB3aWR0aD0iODMuMTYwNTk4NTAzNzQwNjYiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgOCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPHJlY3QgeD0iNjQ5LjY5NzU2ODcxMjkwNTIiIHk9IjI1MCIgd2lkdGg9IjM4LjA5OTA2NDgzNzkwNTIzIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDkpIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMCkiIC8+CjxyZWN0IHg9IjY4Ny4zOTY2MzM1NTA4MTA1IiB5PSIyNTAiIHdpZHRoPSIxLjM2NzMzMTY3MDgyMjk0MjYiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMTApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjxyZWN0IHg9IjY4OC4zNjM5NjUyMjE2MzM0IiB5PSIyNTAiIHdpZHRoPSIwLjQ4MDYxMDk3MjU2ODU3ODU0IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDExKSIgc3R5bGU9ImZpbGw6cmdiKDAsIDAsIDApIiAvPgo8cmVjdCB4PSI2ODguNDQ0NTc2MTk0MjAyIiB5PSIyNTAiIHdpZHRoPSIxNzMuOTU1NDIzODA1Nzk4IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDEyKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC02LTUtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDYtNS1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyNjAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC02LTUtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSA2LTUtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjI3MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTctNC1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgNy00LWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjI4MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTctNC10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDctNC10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMjkwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8L2c+CjxkZWZzPgo8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQiPjwhW0NEQVRBWwpnX3N0YXRlbWFwc1swXSA9IHsKICAib2Zmc2V0IjogMCwKICAic3RhdGVzIjogWwogICAgewogICAgICAibmFtZSI6ICJzdGFibGUtcmVsZWFzZSIsCiAgICAgICJ2YWx1ZSI6IDAsCiAgICAgICJjb2xvciI6ICJ3aGl0ZSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXJlbC10by1wcmUiLAogICAgICAidmFsdWUiOiAxLAogICAgICAiY29sb3IiOiAiYmx1ZSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXJlbC10by1yZWwiLAogICAgICAidmFsdWUiOiAyLAogICAgICAiY29sb3IiOiAiYnJvd24iCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJlbWl0LXJlbGVhc2UiLAogICAgICAidmFsdWUiOiAzLAogICAgICAiY29sb3IiOiAid2hpdGUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJzdGFibGUtcHJlc3MiLAogICAgICAidmFsdWUiOiA0LAogICAgICAiY29sb3IiOiAiZ3JleSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXByZS10by1wcmUiLAogICAgICAidmFsdWUiOiA1LAogICAgICAiY29sb3IiOiAieWVsbG93IgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiYm91bmNpbmctcHJlLXRvLXJlbCIsCiAgICAgICJ2YWx1ZSI6IDYsCiAgICAgICJjb2xvciI6ICJvcmFuZ2UiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJlbWl0LXByZXNzIiwKICAgICAgInZhbHVlIjogNywKICAgICAgImNvbG9yIjogImJsYWNrIgogICAgfQogIF0sCiAgImVudGl0eUtpbmQiOiAiRW50aXR5IiwKICAidGl0bGUiOiAia2V5Ym9hcmQgZGVib3VuY2luZyIsCiJkYXRhIjogeyAKIjItMS10cmlnZ2VyIjogWwp7ICJ0IjogNTM5NzQ2OTk5OTk5LCAicyI6IDN9Cl0KLCI0LTQtdHJpZ2dlciI6IFsKeyAidCI6IDUzOTc0Njk5OTk5OSwgInMiOiAzfQpdCiwiMy0xLXRyaWdnZXIiOiBbCnsgInQiOiA1Mzk3NDY5OTk5OTksICJzIjogM30sCnsgInQiOiA1NDA4NzkyMDAwMDAsICJzIjogN30sCnsgInQiOiA1NDEzNDkwMDAwMDAsICJzIjogM30sCnsgInQiOiA1NDIxMTMyMDAwMDAsICJzIjogN30sCnsgInQiOiA1NDIzNDcyMDAwMDAsICJzIjogM30sCnsgInQiOiA1NDMxMDM4MDAwMDAsICJzIjogN30sCnsgInQiOiA1NDMzNDMwMDAwMDAsICJzIjogM30sCnsgInQiOiA1NDQxNTE2MDAwMDAsICJzIjogN30sCnsgInQiOiA1NDQzNjcyMDAwMDAsICJzIjogM30sCnsgInQiOiA1NDUxODUyMDAwMDAsICJzIjogN30sCnsgInQiOiA1NDU1NDA2MDAwMDAsICJzIjogM30KXQosIjQtNC1kZWJvdW5jZXIiOiBbCnsgInQiOiA1Mzk3NDY5OTk5OTksICJzIjogMH0KXQosIjMtNC1kZWJvdW5jZXIiOiBbCnsgInQiOiA1Mzk3NDY5OTk5OTksICJzIjogMH0KXQosIjMtMC1kZWJvdW5jZXIiOiBbCnsgInQiOiA1Mzk3NDY5OTk5OTksICJzIjogMH0KXQosIjItNS10cmlnZ2VyIjogWwp7ICJ0IjogNTM5NzQ2OTk5OTk5LCAicyI6IDN9Cl0KLCI2LTQtZGVib3VuY2VyIjogWwp7ICJ0IjogNTM5NzQ2OTk5OTk5LCAicyI6IDB9LAp7ICJ0IjogNTQwMzU3NDAwMDAwLCAicyI6IDF9LAp7ICJ0IjogNTQwMzU3NjAwMDAwLCAicyI6IDJ9LAp7ICJ0IjogNTQwMzU3ODAwMDAwLCAicyI6IDF9LAp7ICJ0IjogNTQwMzYyODAwMDAwLCAicyI6IDR9LAp7ICJ0IjogNTQwNjQ2ODAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQwNjUxODAwMDAwLCAicyI6IDB9LAp7ICJ0IjogNTQxNjE5ODAwMDAwLCAicyI6IDF9LAp7ICJ0IjogNTQxNjI0ODAwMDAwLCAicyI6IDR9LAp7ICJ0IjogNTQxOTYwNjAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQxOTYwODAwMDAwLCAicyI6IDV9LAp7ICJ0IjogNTQxOTYxMDAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQxOTY2MDAwMDAwLCAicyI6IDB9LAp7ICJ0IjogNTQyNTk2MDAwMDAwLCAicyI6IDF9LAp7ICJ0IjogNTQyNTk2MjAwMDAwLCAicyI6IDJ9LAp7ICJ0IjogNTQyNTk2NDAwMDAwLCAicyI6IDF9LAp7ICJ0IjogNTQyNjAxNDAwMDAwLCAicyI6IDR9LAp7ICJ0IjogNTQyOTQ5ODAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQyOTU0ODAwMDAwLCAicyI6IDB9LAp7ICJ0IjogNTQzNjg0MjAwMDAwLCAicyI6IDF9LAp7ICJ0IjogNTQzNjg5MjAwMDAwLCAicyI6IDR9LAp7ICJ0IjogNTQzOTY2ODAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQzOTY3MDAwMDAwLCAicyI6IDV9LAp7ICJ0IjogNTQzOTY3MjAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQzOTcyMjAwMDAwLCAicyI6IDB9LAp7ICJ0IjogNTQ0NTgyODAwMDAwLCAicyI6IDF9LAp7ICJ0IjogNTQ0NTg3ODAwMDAwLCAicyI6IDR9LAp7ICJ0IjogNTQ0ODYzNDAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQ0ODYzNjAwMDAwLCAicyI6IDV9LAp7ICJ0IjogNTQ0ODYzODAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQ0ODY1MjAwMDAwLCAicyI6IDV9LAp7ICJ0IjogNTQ0ODY1NDAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQ0ODY1NjAwMDAwLCAicyI6IDV9LAp7ICJ0IjogNTQ0ODcwNjAwMDAwLCAicyI6IDR9LAp7ICJ0IjogNTQ0ODcxMjAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQ0ODcxNDAwMDAwLCAicyI6IDV9LAp7ICJ0IjogNTQ0ODcxNjAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQ0ODc2NjAwMDAwLCAicyI6IDB9Cl0KLCIzLTMtZGVib3VuY2VyIjogWwp7ICJ0IjogNTM5NzQ2OTk5OTk5LCAicyI6IDB9Cl0KLCIzLTQtdHJpZ2dlciI6IFsKeyAidCI6IDUzOTc0Njk5OTk5OSwgInMiOiAzfQpdCiwiMi00LXRyaWdnZXIiOiBbCnsgInQiOiA1Mzk3NDY5OTk5OTksICJzIjogM30KXQosIjYtNC10cmlnZ2VyIjogWwp7ICJ0IjogNTM5NzQ2OTk5OTk5LCAicyI6IDN9LAp7ICJ0IjogNTQwMzU3NDAwMDAwLCAicyI6IDd9LAp7ICJ0IjogNTQwNjQ2ODAwMDAwLCAicyI6IDN9LAp7ICJ0IjogNTQxNjE5ODAwMDAwLCAicyI6IDd9LAp7ICJ0IjogNTQxOTYwNjAwMDAwLCAicyI6IDN9LAp7ICJ0IjogNTQyNTk2MDAwMDAwLCAicyI6IDd9LAp7ICJ0IjogNTQyOTQ5ODAwMDAwLCAicyI6IDN9LAp7ICJ0IjogNTQzNjg0MjAwMDAwLCAicyI6IDd9LAp7ICJ0IjogNTQzOTY2ODAwMDAwLCAicyI6IDN9LAp7ICJ0IjogNTQ0NTgyODAwMDAwLCAicyI6IDd9LAp7ICJ0IjogNTQ0ODYzNDAwMDAwLCAicyI6IDN9LAp7ICJ0IjogNTQ0ODcwNjAwMDAwLCAicyI6IDd9LAp7ICJ0IjogNTQ0ODcxMjAwMDAwLCAicyI6IDN9Cl0KLCI1LTQtdHJpZ2dlciI6IFsKeyAidCI6IDUzOTc0Njk5OTk5OSwgInMiOiAzfQpdCiwiNi01LWRlYm91bmNlciI6IFsKeyAidCI6IDUzOTc0Njk5OTk5OSwgInMiOiAwfQpdCiwiMi01LWRlYm91bmNlciI6IFsKeyAidCI6IDUzOTc0Njk5OTk5OSwgInMiOiAwfQpdCiwiMi00LWRlYm91bmNlciI6IFsKeyAidCI6IDUzOTc0Njk5OTk5OSwgInMiOiAwfQpdCiwiMi0wLXRyaWdnZXIiOiBbCnsgInQiOiA1Mzk3NDY5OTk5OTksICJzIjogM30KXQosIjItMy1kZWJvdW5jZXIiOiBbCnsgInQiOiA1Mzk3NDY5OTk5OTksICJzIjogMH0KXQosIjUtNC1kZWJvdW5jZXIiOiBbCnsgInQiOiA1Mzk3NDY5OTk5OTksICJzIjogMH0KXQosIjYtNS10cmlnZ2VyIjogWwp7ICJ0IjogNTM5NzQ2OTk5OTk5LCAicyI6IDN9Cl0KLCI3LTQtdHJpZ2dlciI6IFsKeyAidCI6IDUzOTc0Njk5OTk5OSwgInMiOiAzfQpdCiwiNy00LWRlYm91bmNlciI6IFsKeyAidCI6IDUzOTc0Njk5OTk5OSwgInMiOiAwfQpdCiwiMi0wLWRlYm91bmNlciI6IFsKeyAidCI6IDUzOTc0Njk5OTk5OSwgInMiOiAwfQpdCiwiMi0xLWRlYm91bmNlciI6IFsKeyAidCI6IDUzOTc0Njk5OTk5OSwgInMiOiAwfQpdCiwiMy0wLXRyaWdnZXIiOiBbCnsgInQiOiA1Mzk3NDY5OTk5OTksICJzIjogM30KXQosIjMtMy10cmlnZ2VyIjogWwp7ICJ0IjogNTM5NzQ2OTk5OTk5LCAicyI6IDN9Cl0KLCIyLTMtdHJpZ2dlciI6IFsKeyAidCI6IDUzOTc0Njk5OTk5OSwgInMiOiAzfQpdCiwiMy0xLWRlYm91bmNlciI6IFsKeyAidCI6IDUzOTc0Njk5OTk5OSwgInMiOiAwfSwKeyAidCI6IDU0MDg3OTIwMDAwMCwgInMiOiAxfSwKeyAidCI6IDU0MDg3OTQwMDAwMCwgInMiOiAyfSwKeyAidCI6IDU0MDg3OTYwMDAwMCwgInMiOiAxfSwKeyAidCI6IDU0MDg4NDYwMDAwMCwgInMiOiA0fSwKeyAidCI6IDU0MTM0OTAwMDAwMCwgInMiOiA2fSwKeyAidCI6IDU0MTM0OTIwMDAwMCwgInMiOiA1fSwKeyAidCI6IDU0MTM0OTQwMDAwMCwgInMiOiA2fSwKeyAidCI6IDU0MTM1NDQwMDAwMCwgInMiOiAwfSwKeyAidCI6IDU0MjExMzIwMDAwMCwgInMiOiAxfSwKeyAidCI6IDU0MjExODIwMDAwMCwgInMiOiA0fSwKeyAidCI6IDU0MjM0NzIwMDAwMCwgInMiOiA2fSwKeyAidCI6IDU0MjM1MjIwMDAwMCwgInMiOiAwfSwKeyAidCI6IDU0MzEwMzgwMDAwMCwgInMiOiAxfSwKeyAidCI6IDU0MzEwNDAwMDAwMCwgInMiOiAyfSwKeyAidCI6IDU0MzEwNDIwMDAwMCwgInMiOiAxfSwKeyAidCI6IDU0MzEwOTIwMDAwMCwgInMiOiA0fSwKeyAidCI6IDU0MzM0MzAwMDAwMCwgInMiOiA2fSwKeyAidCI6IDU0MzM0ODAwMDAwMCwgInMiOiAwfSwKeyAidCI6IDU0NDE1MTYwMDAwMCwgInMiOiAxfSwKeyAidCI6IDU0NDE1MTgwMDAwMCwgInMiOiAyfSwKeyAidCI6IDU0NDE1MjAwMDAwMCwgInMiOiAxfSwKeyAidCI6IDU0NDE1NzAwMDAwMCwgInMiOiA0fSwKeyAidCI6IDU0NDM2NzIwMDAwMCwgInMiOiA2fSwKeyAidCI6IDU0NDM2NzQwMDAwMCwgInMiOiA1fSwKeyAidCI6IDU0NDM2NzYwMDAwMCwgInMiOiA2fSwKeyAidCI6IDU0NDM3MjYwMDAwMCwgInMiOiAwfSwKeyAidCI6IDU0NTE4NTIwMDAwMCwgInMiOiAxfSwKeyAidCI6IDU0NTE5MDIwMDAwMCwgInMiOiA0fSwKeyAidCI6IDU0NTU0MDYwMDAwMCwgInMiOiA2fSwKeyAidCI6IDU0NTU0NTYwMDAwMCwgInMiOiAwfQpdCiwiMi0yLWRlYm91bmNlciI6IFsKeyAidCI6IDUzOTc0Njk5OTk5OSwgInMiOiAwfQpdCiwiMi0yLXRyaWdnZXIiOiBbCnsgInQiOiA1Mzk3NDY5OTk5OTksICJzIjogM30KXQp9LAplbnRpdGllczogewogICAgICIzLTMtdHJpZ2dlciI6IHsgIH0KICAgICwgIjMtMS1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICI1LTQtZGVib3VuY2VyIjogeyAgfQogICAgLCAiMy0zLWRlYm91bmNlciI6IHsgIH0KICAgICwgIjItMi10cmlnZ2VyIjogeyAgfQogICAgLCAiMi01LWRlYm91bmNlciI6IHsgIH0KICAgICwgIjItMS1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICIzLTAtdHJpZ2dlciI6IHsgIH0KICAgICwgIjYtNC1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICI2LTUtdHJpZ2dlciI6IHsgIH0KICAgICwgIjUtNC10cmlnZ2VyIjogeyAgfQogICAgLCAiMi0wLWRlYm91bmNlciI6IHsgIH0KICAgICwgIjItNC10cmlnZ2VyIjogeyAgfQogICAgLCAiNy00LWRlYm91bmNlciI6IHsgIH0KICAgICwgIjItMy10cmlnZ2VyIjogeyAgfQogICAgLCAiMi00LWRlYm91bmNlciI6IHsgIH0KICAgICwgIjYtNS1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICIzLTQtdHJpZ2dlciI6IHsgIH0KICAgICwgIjItMy1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICIzLTQtZGVib3VuY2VyIjogeyAgfQogICAgLCAiMi0wLXRyaWdnZXIiOiB7ICB9CiAgICAsICIzLTEtdHJpZ2dlciI6IHsgIH0KICAgICwgIjctNC10cmlnZ2VyIjogeyAgfQogICAgLCAiMi0xLXRyaWdnZXIiOiB7ICB9CiAgICAsICI0LTQtZGVib3VuY2VyIjogeyAgfQogICAgLCAiMi01LXRyaWdnZXIiOiB7ICB9CiAgICAsICIzLTAtZGVib3VuY2VyIjogeyAgfQogICAgLCAiNi00LXRyaWdnZXIiOiB7ICB9CiAgICAsICIyLTItZGVib3VuY2VyIjogeyAgfQogICAgLCAiNC00LXRyaWdnZXIiOiB7ICB9Cn0KfSBdXT48L3NjcmlwdD48L2RlZnM+Cjwvc3ZnPgo8cG9seWdvbiBjbGFzcz0ic3RhdGVtYXAtYm9yZGVyIgogIHBvaW50cz0iMTM4IDYwLCAxMDAwIDYwLCAxMDAwIDM2MCwgMTM4IDM2MCIvPgo8dGV4dCB4PSI1NjkiIHk9IjE2IiBjbGFzcz0ic3RhdGVtYXAtdGl0bGUgc2Fuc3NlcmlmIj5TdGF0ZW1hcCBvZiBrZXlib2FyZCBkZWJvdW5jaW5nIGFjdGl2aXR5PC90ZXh0Pgo8dGV4dCB4PSI1NjkiIHk9IjM0IiBjbGFzcz0ic3RhdGVtYXAtdGltZWxhYmVsIHNhbnNzZXJpZiIgaWQ9InN0YXRlbWFwLXRpbWVsYWJlbCI+PC90ZXh0Pgo8bGluZSB4MT0iMTQ4IiB5MT0iNDAiIHgyPSI5OTAiIHkyPSI0MCIKY2xhc3M9InN0YXRlbWFwLXRpbWVsaW5lIiAvPgo8c3ZnIHg9IjIwcHgiIHk9IjYwcHgiIHdpZHRoPSI4OHB4IiBoZWlnaHQ9IjQ1cHgiPgo8c3ZnIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IgogICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InBhbmNsaWNrKDUwLCAwKSI+PHJlY3QgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiAKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjIycHgiIG9uY2xpY2s9InBhbmNsaWNrKDUwLCAwKSIgY2xhc3M9ImJ1dHRvbiIgLz48c3ZnIHZpZXdCb3g9IjAgMCAxNiAxNiI+DQo8cGF0aCBkPSJNMTAuMjUsMTIuNzVjMC4xOTEsMCwwLjM4NC0wLjA3MiwwLjUyOS0wLjIxOWMwLjI5NC0wLjI5NSwwLjI5NC0wLjc3LDAtMS4wNjJMNy4zMTEsOGwzLjQ2OS0zLjQ2OQ0KCWMwLjI5NC0wLjI5MywwLjI5NC0wLjc2OCwwLTEuMDYyYy0wLjI5My0wLjI5My0wLjc2OC0wLjI5My0xLjA2MSwwbC00LDRjLTAuMjkzLDAuMjkzLTAuMjkzLDAuNzY4LDAsMS4wNjJsNCw0DQoJQzkuODY2LDEyLjY3OCwxMC4wNTksMTIuNzUsMTAuMjUsMTIuNzV6Ii8+DQo8L3N2Zz4NCjwvc3ZnPgo8c3ZnIHg9IjIycHgiIHk9IjBweCIgd2lkdGg9IjIycHgiIGhlaWdodD0iMjJweCIKICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJ6b29tY2xpY2soMS4yNSkiPjxyZWN0IHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjJweCIgCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PSIyMnB4IiBvbmNsaWNrPSJ6b29tY2xpY2soMS4yNSkiIGNsYXNzPSJidXR0b24iIC8+PHN2ZyB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KPHBhdGggZD0iTTEwLjI1MSw2Ljk4OWMwLDAuMjc2LTAuMjI1LDAuNS0wLjUsMC41aC0xLjV2MS41YzAsMC4yNzUtMC4yMjQsMC41LTAuNSwwLjVzLTAuNS0wLjIyNS0wLjUtMC41di0xLjVoLTEuNQ0KCWMtMC4yNzYsMC0wLjUtMC4yMjQtMC41LTAuNXMwLjIyNC0wLjUsMC41LTAuNWgxLjV2LTEuNWMwLTAuMjc2LDAuMjI0LTAuNSwwLjUtMC41czAuNSwwLjIyNCwwLjUsMC41djEuNWgxLjUNCglDMTAuMDI2LDYuNDg5LDEwLjI1MSw2LjcxMywxMC4yNTEsNi45ODl6IE0xNC43NzEsMTQuODU3Yy0wLjI3MywwLjIyNi0wLjY4NSwwLjE3OS0wLjkxOC0wLjEwNGwtMi44NTQtMy4zMzINCgljLTAuOTExLDAuNjY5LTIuMDMxLDEuMDY4LTMuMjQ3LDEuMDY4Yy0zLjAzNywwLTUuNS0yLjQ2My01LjUtNS41czIuNDYzLTUuNSw1LjUtNS41czUuNSwyLjQ2Myw1LjUsNS41DQoJYzAsMS4zNTctMC40OTQsMi41OTgtMS4zMSwzLjU1OGwyLjkwMSwzLjM4N0MxNS4wNzcsMTQuMjE4LDE1LjA0NiwxNC42MzIsMTQuNzcxLDE0Ljg1N3ogTTcuNzUxLDExLjQ4OWMyLjQ4MSwwLDQuNS0yLjAxOSw0LjUtNC41DQoJcy0yLjAxOS00LjUtNC41LTQuNXMtNC41LDIuMDE5LTQuNSw0LjVTNS4yNywxMS40ODksNy43NTEsMTEuNDg5eiIvPg0KPC9zdmc+DQo8L3N2Zz4KPHN2ZyB4PSI0NHB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjIycHgiCiAgICAgICAgICAgICAgICAgICAgb25jbGljaz0iem9vbWNsaWNrKDAuOCkiPjxyZWN0IHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjJweCIgCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PSIyMnB4IiBvbmNsaWNrPSJ6b29tY2xpY2soMC44KSIgY2xhc3M9ImJ1dHRvbiIgLz48c3ZnIHZpZXdCb3g9IjAgMCAxNiAxNiI+DQo8cGF0aCBkPSJNMTAuMjUxLDYuOTg5YzAsMC4yNzYtMC4yMjUsMC41LTAuNSwwLjVoLTRjLTAuMjc2LDAtMC41LTAuMjI0LTAuNS0wLjVsMCwwYzAtMC4yNzYsMC4yMjQtMC41LDAuNS0wLjVoNA0KCUMxMC4wMjYsNi40ODksMTAuMjUxLDYuNzEzLDEwLjI1MSw2Ljk4OUwxMC4yNTEsNi45ODl6IE0xNC43NzEsMTQuODU3Yy0wLjI3MywwLjIyNi0wLjY4NSwwLjE3OS0wLjkxOC0wLjEwNGwtMi44NTQtMy4zMzINCgljLTAuOTExLDAuNjY5LTIuMDMxLDEuMDY4LTMuMjQ3LDEuMDY4Yy0zLjAzNywwLTUuNS0yLjQ2My01LjUtNS41czIuNDYzLTUuNSw1LjUtNS41czUuNSwyLjQ2Myw1LjUsNS41DQoJYzAsMS4zNTctMC40OTQsMi41OTgtMS4zMSwzLjU1OGwyLjkwMSwzLjM4N0MxNS4wNzcsMTQuMjE4LDE1LjA0NiwxNC42MzIsMTQuNzcxLDE0Ljg1N3ogTTcuNzUxLDExLjQ4OWMyLjQ4MSwwLDQuNS0yLjAxOSw0LjUtNC41DQoJcy0yLjAxOS00LjUtNC41LTQuNXMtNC41LDIuMDE5LTQuNSw0LjVTNS4yNywxMS40ODksNy43NTEsMTEuNDg5eiIvPg0KPC9zdmc+DQo8L3N2Zz4KPHN2ZyB4PSI2NnB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjIycHgiCiAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icGFuY2xpY2soLTUwLCAwKSI+PHJlY3QgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiAKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjIycHgiIG9uY2xpY2s9InBhbmNsaWNrKC01MCwgMCkiIGNsYXNzPSJidXR0b24iIC8+PHN2ZyB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KPHBhdGggZD0iTTYuMjQ5LDEyLjc1Yy0wLjE5MSwwLTAuMzg0LTAuMDcyLTAuNTI5LTAuMjE5Yy0wLjI5NC0wLjI5NS0wLjI5NC0wLjc3LDAtMS4wNjJMOS4xODgsOEw1LjcyLDQuNTMxDQoJYy0wLjI5NC0wLjI5My0wLjI5NC0wLjc2OCwwLTEuMDYyYzAuMjkzLTAuMjkzLDAuNzY4LTAuMjkzLDEuMDYxLDBsNCw0YzAuMjkzLDAuMjkzLDAuMjkzLDAuNzY4LDAsMS4wNjJsLTQsNA0KCUM2LjYzMywxMi42NzgsNi40NCwxMi43NSw2LjI0OSwxMi43NXoiLz4NCjwvc3ZnPg0KPC9zdmc+Cjwvc3ZnPgo8cmVjdCB4PSIyMCIgeT0iMTA1IiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC0wIiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDApIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+Cjx0ZXh0IHg9IjY0IiB5PSIxMzAiIGNsYXNzPSJzdGF0ZW1hcC1sZWdlbmRsYWJlbCBzYW5zc2VyaWYiPnN0YWJsZS1yZWxlYXNlPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMTQwIiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC0xIiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDEpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMjU1KSIgLz4KPHRleHQgeD0iNjQiIHk9IjE2NSIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZGxhYmVsIHNhbnNzZXJpZiI+Ym91bmNpbmctcmVsLXRvLXByZTwvdGV4dD4KPHJlY3QgeD0iMjAiIHk9IjE3NSIgd2lkdGg9Ijg4IiBoZWlnaHQ9IjE1IiBpZD0ic3RhdGVtYXAtbGVnZW5kLTAtMiIgb25jbGljaz0ibGVnZW5kY2xpY2soZXZ0LCAwLCAyKSIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZCIgc3R5bGU9ImZpbGw6cmdiKDE2NSwgNDIsIDQyKSIgLz4KPHRleHQgeD0iNjQiIHk9IjIwMCIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZGxhYmVsIHNhbnNzZXJpZiI+Ym91bmNpbmctcmVsLXRvLXJlbDwvdGV4dD4KPHJlY3QgeD0iMjAiIHk9IjIxMCIgd2lkdGg9Ijg4IiBoZWlnaHQ9IjE1IiBpZD0ic3RhdGVtYXAtbGVnZW5kLTAtMyIgb25jbGljaz0ibGVnZW5kY2xpY2soZXZ0LCAwLCAzKSIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZCIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8dGV4dCB4PSI2NCIgeT0iMjM1IiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kbGFiZWwgc2Fuc3NlcmlmIj5lbWl0LXJlbGVhc2U8L3RleHQ+CjxyZWN0IHg9IjIwIiB5PSIyNDUiIHdpZHRoPSI4OCIgaGVpZ2h0PSIxNSIgaWQ9InN0YXRlbWFwLWxlZ2VuZC0wLTQiIG9uY2xpY2s9ImxlZ2VuZGNsaWNrKGV2dCwgMCwgNCkiIGNsYXNzPSJzdGF0ZW1hcC1sZWdlbmQiIHN0eWxlPSJmaWxsOnJnYigxMjgsIDEyOCwgMTI4KSIgLz4KPHRleHQgeD0iNjQiIHk9IjI3MCIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZGxhYmVsIHNhbnNzZXJpZiI+c3RhYmxlLXByZXNzPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMjgwIiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC01IiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDUpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDApIiAvPgo8dGV4dCB4PSI2NCIgeT0iMzA1IiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kbGFiZWwgc2Fuc3NlcmlmIj5ib3VuY2luZy1wcmUtdG8tcHJlPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMzE1IiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC02IiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDYpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8dGV4dCB4PSI2NCIgeT0iMzQwIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kbGFiZWwgc2Fuc3NlcmlmIj5ib3VuY2luZy1wcmUtdG8tcmVsPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMzUwIiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC03IiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDcpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMCkiIC8+Cjx0ZXh0IHg9IjY0IiB5PSIzNzUiIGNsYXNzPSJzdGF0ZW1hcC1sZWdlbmRsYWJlbCBzYW5zc2VyaWYiPmVtaXQtcHJlc3M8L3RleHQ+CjxnIGlkPSJzdGF0ZW1hcC10YWdib3giPjwvZz4KPGcgaWQ9InN0YXRlbWFwLXRhZ2JveC1zZWxlY3QiPjwvZz4KPC9zdmc+Cg==" /></p>
<p>Now, I know that it was the second to last key press in the sequence, but it's
really hard to see without zooming.
You can play with the statemaps on this page by right-clicking and selecting
&quot;view image&quot;, well at least in Firefox.</p>
<p>So, now that we can see that the keys are, in fact, alternating, I zoom in on
the offending double press:
<br />
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CiAgICAgICAgICAgIDwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAgICAgICAgICAgICAgICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgogICAgICAgICAgICA8c3ZnIHdpZHRoPSIxMjUwIiBoZWlnaHQ9IjM4NSIKICAgICAgICAgICAgICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgICAgICAgICAgICAgIHZlcnNpb249IjEuMSIKICAgICAgICAgICAgICAgIG9ubG9hZD0iaW5pdChldnQpIj4KPGRlZnM+CjxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vZWNtYXNjcmlwdCI+PCFbQ0RBVEFbCnZhciBnbG9iYWxzID0gewogICJzdHJpcEhlaWdodCI6IDEwLAogICJsZWdlbmRXaWR0aCI6IDEzOCwKICAidGFnV2lkdGgiOiAyNTAsCiAgInN0cmlwV2lkdGgiOiA4NjIsCiAgImJhY2tncm91bmQiOiAiI2YwZjBmMCIsCiAgInNvcnRieSI6IG51bGwsCiAgInN0YWNrc29ydGJ5IjogbnVsbCwKICAiYmVnaW4iOiA1NDQ0NjIwMDAwMDAsCiAgImVuZCI6IDU0NTAxMzAwMDAwMCwKICAiZW50aXR5UHJlZml4IjogInN0YXRlbWFwLWVudGl0eS0iLAogICJwaXhlbEhlaWdodCI6IDMwMCwKICAicGl4ZWxXaWR0aCI6IDg2MiwKICAidG90YWxIZWlnaHQiOiAzODUsCiAgInRpbWVXaWR0aCI6IDU1MTAwMDAwMCwKICAibG1hcmdpbiI6IDEzOCwKICAidG1hcmdpbiI6IDYwLAogICJzbWFyZ2luIjogMTAsCiAgInN0YXRlcyI6IFsKICAgIHsKICAgICAgIm5hbWUiOiAic3RhYmxlLXJlbGVhc2UiLAogICAgICAidmFsdWUiOiAwLAogICAgICAiY29sb3IiOiAid2hpdGUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJib3VuY2luZy1yZWwtdG8tcHJlIiwKICAgICAgInZhbHVlIjogMSwKICAgICAgImNvbG9yIjogImJsdWUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJib3VuY2luZy1yZWwtdG8tcmVsIiwKICAgICAgInZhbHVlIjogMiwKICAgICAgImNvbG9yIjogImJyb3duIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiZW1pdC1yZWxlYXNlIiwKICAgICAgInZhbHVlIjogMywKICAgICAgImNvbG9yIjogIndoaXRlIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAic3RhYmxlLXByZXNzIiwKICAgICAgInZhbHVlIjogNCwKICAgICAgImNvbG9yIjogImdyZXkiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJib3VuY2luZy1wcmUtdG8tcHJlIiwKICAgICAgInZhbHVlIjogNSwKICAgICAgImNvbG9yIjogInllbGxvdyIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXByZS10by1yZWwiLAogICAgICAidmFsdWUiOiA2LAogICAgICAiY29sb3IiOiAib3JhbmdlIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiZW1pdC1wcmVzcyIsCiAgICAgICJ2YWx1ZSI6IDcsCiAgICAgICJjb2xvciI6ICJibGFjayIKICAgIH0KICBdLAogICJzdGFydCI6IFsKICAgIDAsCiAgICAxODM1NjQ4MjcyMDAwMDAKICBdLAogICJlbnRpdHlLaW5kIjogIkVudGl0eSIsCn0KLyoKICogQ29weXJpZ2h0IDIwMTgsIEpveWVudCwgSW5jLgogKi8KCi8qCiAqIFRoaXMgZmlsZSBpcyBkcm9wcGVkIGludG8gdGhlIGdlbmVyYXRlZCBTVkcgLS0gYW5kIGlmIHlvdSdyZSBsb29raW5nIGF0CiAqIHRoZSBnZW5lcmF0ZWQgU1ZHIGFuZCB3b25kZXJpbmcgd2hlcmUgdGhpcyBjb21lcyBmcm9tLCBsb29rIGZvcgogKiBzdGF0ZW1hcC1zdmcuanMgaW4gc3RhdGVtYXAncyBzcmMgZGlyZWN0b3J5LgogKi8KCnZhciBnX3RyYW5zTWF0cml4ID0gWzEsIDAsIDAsIDEsIDAsIDBdOwkJLyogdHJhbnNmb3JtIG9mIHN0YXRlbWFwICovCnZhciBnX3N2Z0RvYzsJCQkJCS8qIG91ciBTVkcgZG9jdW1lbnQgKi8KdmFyIGdfb2Zmc2V0OwkJCQkJLyogeCBvZmZzZXQgb2Ygc3RhdGVtYXAgKi8KdmFyIGdfdGltZWxhYmVsOwkJCQkvKiBsYWJlbCBmb3IgdGltZSBzcGFubmVkICovCnZhciBnX3RpbWViYXI7CQkJCQkvKiB0aW1lYmFyLCBpZiBhbnkgKi8KdmFyIGdfc3RhdGViYXI7CQkJCQkvKiBzdGF0ZWJhciwgaWYgYW55ICovCnZhciBnX2hlaWdodDsJCQkJCS8qIHBpeGVsIGhlaWdodCBvZiBzdGF0ZW1hcCAqLwp2YXIgZ193aWR0aDsJCQkJCS8qIHBpeGVsIHdpZHRoIG9mIHN0YXRlbWFwICovCnZhciBnX3N0YXRlc2VsOwkJCQkJLyogc3RhdGUgc2VsZWN0aW9uLCBpZiBhbnkgKi8KdmFyIGdfdGFnc2VsOwkJCQkJLyogdGFnIHNlbGVjdGlvbiwgaWYgYW55ICovCnZhciBnX3RhZ3ZhbHNlbDsJCQkJLyogdGFnIHZhbCBzZWxlY3Rpb24sIGlmIGFueSAqLwoKdmFyIGdfc3RhdGVtYXBzID0gW107CQkJCS8qIGFycmF5IG9mIHN0YXRlbWFwcyAqLwoKdmFyIHRpbWV1bml0cyA9IGZ1bmN0aW9uICh0aW1ldmFsKQp7Cgl2YXIgaSwgcmVtOwoJdmFyIHN1ZmZpeGVzID0gWyAnbnMnLCAnzrxzJywgJ21zJywgJ3MnIF07CgoJaWYgKHRpbWV2YWwgPT09IDApCgkJcmV0dXJuICgnMCcpOwoKCWZvciAoaSA9IDA7ICh0aW1ldmFsID4gMTAwMCB8fCB0aW1ldmFsIDwgLTEwMDApICYmCgkgICAgaSA8IHN1ZmZpeGVzLmxlbmd0aCAtIDE7IGkrKykKCQl0aW1ldmFsIC89IDEwMDA7CgoJcmVtID0gTWF0aC5mbG9vcigodGltZXZhbCAtIE1hdGguZmxvb3IodGltZXZhbCkpICogMTAwMCk7CgoJcmV0dXJuIChNYXRoLmZsb29yKHRpbWV2YWwpICsgJy4nICsKCSAgICAocmVtIDwgMTAwID8gJzAnIDogJycpICsgKHJlbSA8IDEwID8gJzAnIDogJycpICsgcmVtICsKCSAgICBzdWZmaXhlc1tpXSk7Cn07Cgp2YXIgdGltZUZyb21NYXBYID0gZnVuY3Rpb24gKG1hcFgpCnsKCXZhciBiYXNlLCBvZmZzOwoJdmFyIHRpbWVXaWR0aCA9IGdsb2JhbHMudGltZVdpZHRoOwoKCS8qCgkgKiBPdXIgYmFzZSAoaW4gbmFub3NlY29uZHMpIGlzIG91ciBYIG9mZnNldCBpbiB0aGUgdHJhbnNmb3JtYXRpb24KCSAqIG1hdHJpeCBhcyBhIHJhdGlvIG9mIG91ciB0b3RhbCAoc2NhbGVkKSB3aWR0aCwgdGltZXMgb3VyIHRpbWVXaWR0aC4KCSAqLwoJYmFzZSA9ICgtZ190cmFuc01hdHJpeFs0XSAvIChnX3RyYW5zTWF0cml4WzBdICogZ193aWR0aCkpICogdGltZVdpZHRoOwoKCS8qCgkgKiBPdXIgb2Zmc2V0IChpbiBuYW5vc2Vjb25kcykgaXMgdGhlIFggb2Zmc2V0IHdpdGhpbiB0aGUgc3RhdGVtYXAKCSAqIGFzIGEgcmF0aW8gb2YgdGhlIHN0YXRlbWFwIHdpZHRoLCB0aW1lcyB0aGUgbnVtYmVyIG9mIG5hbm9zZWNvbmRzCgkgKiB2aXNpYmxlIGluIHRoZSBzdGF0ZW1hcCAod2hpY2ggaXRzZWxmIGlzIHRoZSB0aW1lV2lkdGggZGl2aWRlZCBieQoJICogb3VyIHNjYWxpbmcgZmFjdG9yKS4KCSAqLwoJb2ZmcyA9IChtYXBYIC8gZ193aWR0aCkgKiAodGltZVdpZHRoIC8gZ190cmFuc01hdHJpeFswXSk7CgoJcmV0dXJuIChiYXNlICsgb2Zmcyk7Cn07Cgp2YXIgdGltZVRvTWFwWCA9IGZ1bmN0aW9uICh0aW1lKQp7CgkvKgoJICogV2UgdGFrZSB0aGUgcmF0aW8gb2YgdGhlIHRpbWUgb2YgdGhlIHRpbWViYXIgb2YgdGhlIHRvdGFsIHRpbWUKCSAqIHdpZHRoIHRpbWVzIHRoZSB3aWR0aCB0aW1lcyB0aGUgc2NhbGUsIGFuZCB0aGVuIGFkZCB0aGF0IHRvIHRoZQoJICogWCBvZmZzZXQgaW4gdGhlIHRyYW5zZm9ybWF0aW9uIG1hdHJpeC4KCSAqLwoJcmV0dXJuICgoKHRpbWUgLyBnbG9iYWxzLnRpbWVXaWR0aCkgKiBnX3dpZHRoICoKCSAgICBnX3RyYW5zTWF0cml4WzBdKSArIGdfdHJhbnNNYXRyaXhbNF0pOwp9OwoKdmFyIHRpbWVUb1RleHQgPSBmdW5jdGlvbiAodGltZSkKewoJdmFyIHQ7CgoJaWYgKGdfdHJhbnNNYXRyaXhbMF0gPT09IDEgJiYgZ2xvYmFscy5iZWdpbiA9PT0gMCkgewoJCXQgPSAnb2Zmc2V0ID0gJyArIHRpbWV1bml0cyh0aW1lKTsKCX0gZWxzZSB7CgkJdCA9ICdvZmZzZXQgPSAnICsgdGltZXVuaXRzKHRpbWUpICsgJywgJyArCgkJICAgIHRpbWV1bml0cyh0aW1lICsgZ2xvYmFscy5iZWdpbikgKyAnIG92ZXJhbGwnOwoJfQoKCWlmIChnbG9iYWxzLnN0YXJ0KSB7CgkJdmFyIHMgPSBnbG9iYWxzLnN0YXJ0WzBdICsKCQkgICAgKHRpbWUgKyBnbG9iYWxzLnN0YXJ0WzFdKSAvIDEwMDAwMDAwMDA7CgoJCXQgKz0gJyAoRXBvY2ggKyAnICsgTWF0aC5mbG9vcihzKSArICdzKSc7Cgl9CgoJcmV0dXJuICh0KTsKfTsKCnZhciB0aW1lU2V0U3BhbkxhYmVsID0gZnVuY3Rpb24gKCkKewoJdmFyIHQgPSAnc3BhbiA9ICcgKyB0aW1ldW5pdHMoZ2xvYmFscy50aW1lV2lkdGggLyBnX3RyYW5zTWF0cml4WzBdKTsKCglpZiAoZ190cmFuc01hdHJpeFswXSAhPSAxIHx8IGdsb2JhbHMuYmVnaW4gIT09IDApCgkJdCArPSAnOyAnICsgdGltZVRvVGV4dCh0aW1lRnJvbU1hcFgoMCkpOwoKCWdfdGltZWxhYmVsLnRleHRDb250ZW50ID0gdDsKfTsKCnZhciBpbml0U3RhdGVtYXAgPSBmdW5jdGlvbiAoc3RhdGVtYXAsIGVsZW0sIHBvc2l0aW9uKQp7Cgl2YXIgaSwgaGlnaGxpZ2h0OwoJdmFyIHByZWZpeCA9IGdsb2JhbHMuZW50aXR5UHJlZml4ICsgc3RhdGVtYXAgKyAnLSc7CgoJZ19zdGF0ZW1hcHNbc3RhdGVtYXBdLmVsZW0gPSBlbGVtOwoJZ19zdGF0ZW1hcHNbc3RhdGVtYXBdLnBvc2l0aW9uID0gcG9zaXRpb247CglnX3N0YXRlbWFwc1tzdGF0ZW1hcF0ubmVudGl0aWVzID0gMDsKCgkvKgoJICogSXRlcmF0ZSBvdmVyIHRoaXMgc3RhdGVtYXAncyBjaGlsZHJlbiwgbG9va2luZyBmb3IgZW50aXRpZXMuCgkgKi8KCWZvciAoaSA9IDA7IGkgPCBlbGVtLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHsKCQl2YXIgaWQgPSBlbGVtLmNoaWxkTm9kZXNbaV0uaWQsIGVudGl0eTsKCgkJaWYgKCFpZCB8fCBpZC5pbmRleE9mKHByZWZpeCkgIT09IDApCgkJCWNvbnRpbnVlOwoKCQllbnRpdHkgPSB7CgkJCW5hbWU6IGlkLnN1YnN0cihwcmVmaXgubGVuZ3RoKSwKCQkJZWxlbWVudDogZWxlbS5jaGlsZE5vZGVzW2ldLAoJCQlwb3NpdGlvbjogcG9zaXRpb24rKywKCQkJc3RhdGVtYXA6IHN0YXRlbWFwCgkJfTsKCgkJZW50aXR5LmRlc2NyaXB0aW9uID0KCQkgICAgZ19zdGF0ZW1hcHNbc3RhdGVtYXBdLmVudGl0aWVzW2VudGl0eS5uYW1lXS5kZXNjcmlwdGlvbjsKCgkJZ19lbnRpdGllc1tpZF0gPSBlbnRpdHk7CgkJZ19zdGF0ZW1hcHNbc3RhdGVtYXBdLm5lbnRpdGllcysrOwoJfQoKCS8qCgkgKiBEZXRlcm1pbmUgdGhlIGxlZ2VuZCB0aGF0IHRoaXMgc3RhdGVtYXAgaXMgdXNpbmcuCgkgKi8KCWZvciAoaSA9IHN0YXRlbWFwOyBpID49IDA7IGktLSkgewoJCWlmIChnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZCgnc3RhdGVtYXAtbGVnZW5kLScgKyBpICsgJy0wJykpIHsKCQkJZ19zdGF0ZW1hcHNbc3RhdGVtYXBdLmxlZ2VuZCA9IGk7CgkJCWJyZWFrOwoJCX0KCX0KCgljb25zb2xlLmFzc2VydChpID49IDApOwoKCS8qCgkgKiBEeW5hbWljYWxseSBjaGFuZ2UgdGhlIHN0eWxpbmcgb2YgdGhlIGhpZ2hsaWdodCByZWN0YW5nbGUuCgkgKi8KCWhpZ2hsaWdodCA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC0nICsKCSAgICBzdGF0ZW1hcCArICctaGlnaGxpZ2h0Jyk7CgloaWdobGlnaHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtaGlnaGxpZ2h0Jyk7CgoJcmV0dXJuIChwb3NpdGlvbik7Cn07Cgp2YXIgaW5pdCA9IGZ1bmN0aW9uIChldnQpCnsKCXZhciBpID0gMCwgcG9zaXRpb24gPSAwLCBzdGF0ZW1hcDsKCglnX3N2Z0RvYyA9IGV2dC50YXJnZXQub3duZXJEb2N1bWVudDsKCWdfZW50aXRpZXMgPSBbXTsKCgl3aGlsZSAoKHN0YXRlbWFwID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLScgKyBpKSkgIT0gbnVsbCkKCQlwb3NpdGlvbiA9IGluaXRTdGF0ZW1hcChpKyssIHN0YXRlbWFwLCBwb3NpdGlvbik7CgoJZ19oZWlnaHQgPSBnbG9iYWxzLnBpeGVsSGVpZ2h0OwoJZ193aWR0aCA9IGdsb2JhbHMucGl4ZWxXaWR0aDsKCglnX29mZnNldCA9IGV2dC50YXJnZXQuZ2V0QXR0cmlidXRlTlMobnVsbCwgJ3dpZHRoJykgLQoJICAgIChnX3dpZHRoICsgZ2xvYmFscy50YWdXaWR0aCk7CgoJZ190aW1lbGFiZWwgPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZCgnc3RhdGVtYXAtdGltZWxhYmVsJyk7Cgl0aW1lU2V0U3BhbkxhYmVsKCk7CgoJZ190aW1lYmFyID0gdW5kZWZpbmVkOwp9OwoKdmFyIGVudGl0eUZvckVhY2hEYXR1bSA9IGZ1bmN0aW9uIChlbnRpdHksIHRpbWUsIGV0aW1lLCBmdW5jKQp7Cgl2YXIgZGF0YSA9IGdfc3RhdGVtYXBzW2VudGl0eS5zdGF0ZW1hcF0uZGF0YVtlbnRpdHkubmFtZV07CgoJdmFyIGlkeCwgbGVuZ3RoID0gZGF0YS5sZW5ndGg7Cgl2YXIgZmxvb3IgPSAwOwoJdmFyIGNlaWwgPSBsZW5ndGg7Cgl2YXIgZGF0dW0sIHQsIHNwYW47CgoJaWYgKGxlbmd0aCA9PT0gMCB8fCAoZGF0YVswXS50ID4gdGltZSAmJiAhZXRpbWUpKQoJCXJldHVybjsKCglpZiAoZGF0YVswXS50ID4gdGltZSkgewoJCWlkeCA9IDA7Cgl9IGVsc2UgewoJCS8qCgkJICogQmluYXJ5IHNlYXJjaCBvdXIgZGF0YSB1bnRpbCB3ZSBmaW5kIGEgZGF0dW0gdGhhdCBjb250YWlucwoJCSAqIHRoZSBzdGFydCBvZiBvdXIgdGltZSByYW5nZS4KCQkgKi8KCQlmb3IgKDs7KSB7CgkJCWlkeCA9IGZsb29yICsgTWF0aC5mbG9vcigoY2VpbCAtIGZsb29yKSAvIDIpOwoKCQkJaWYgKGRhdGFbaWR4XS50ID4gdGltZSkgewoJCQkJY2VpbCA9IGlkeDsKCQkJCWNvbnRpbnVlOwoJCQl9CgoJCQlpZiAoaWR4ICsgMSA9PSBsZW5ndGggfHwgZGF0YVtpZHggKyAxXS50ID4gdGltZSkKCQkJCWJyZWFrOwoKCQkJZmxvb3IgPSBpZHg7CgkJfQoJfQoKCS8qCgkgKiBJZiB3ZSBkb24ndCBoYXZlIGEgc3BlY2lmaWVkIGV0aW1lLCB3ZSBoYXZlIGZvdW5kIHRoZSBkYXR1bSB0aGF0CgkgKiBjb250YWlucyB0aGUgdGltZTsganVzdCBjYWxsIG91ciBmdW5jdGlvbiBhbmQgcmV0dXJuLgoJICovCglpZiAoIWV0aW1lKSB7CgkJZnVuYyhkYXRhW2lkeF0sIGlkeCwgMSk7CgkJcmV0dXJuOwoJfQoKCS8qCgkgKiBOb3cgd2UncmUgZ29pbmcgdG8gaXRlcmF0ZSBmb3J3YXJkLCBjYWxsaW5nIG91ciBmdW5jdGlvbiB1bnRpbCB3ZQoJICogZ2V0IHBhc3Qgb3VyIHNwZWNpZmllZCBldGltZS4KCSAqLwoJZm9yICg7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKCQlkYXR1bSA9IGRhdGFbaWR4XTsKCgkJaWYgKGRhdHVtLnQgPiBldGltZSkKCQkJcmV0dXJuOwoKCQlpZiAoKHQgPSBkYXR1bS50KSA8IHRpbWUpCgkJCXQgPSB0aW1lOwoKCQlpZiAoaWR4ICsgMSA9PSBsZW5ndGggfHwgZGF0YVtpZHggKyAxXS50ID4gZXRpbWUpIHsKCQkJLyoKCQkJICogVGhpcyBkYXR1bSBjb250YWlucyB0aGUgZW5kIG9mIHRoZSByYW5nZTsgb3VyIHNwYW4KCQkJICogaXMgb3VyIGV0aW1lIG1pbnVzIHRoaXMgZGF0dW0ncyBzdGFydCB0aW1lIChvciBvdXIKCQkJICogc3BlY2lmaWVkIHRpbWUsIHdoaWNoZXZlciBpcyBncmVhdGVyKS4KCQkJICovCgkJCXNwYW4gPSBldGltZSAtIHQ7CgkJfSBlbHNlIHsKCQkJLyoKCQkJICogVGhlIGVuZCBvZiB0aGUgZGF0dW0gaXMgY292ZXJlZCBieSB0aGUgcmFuZ2U7IG91cgoJCQkgKiBzcGFuIGlzIHRoZSB0aW1lIHdpZHRoIG9mIHRoZSBkYXR1bS4KCQkJICovCgkJCXNwYW4gPSBkYXRhW2lkeCArIDFdLnQgLSB0OwoJCX0KCgkJZnVuYyhkYXR1bSwgaWR4LCBzcGFuKTsKCX0KfTsKCnZhciBlbnRpdHlEYXR1bSA9IGZ1bmN0aW9uIChlbnRpdHksIGlkeCkKewoJdmFyIGRhdGEgPSBnX3N0YXRlbWFwc1tlbnRpdHkuc3RhdGVtYXBdLmRhdGFbZW50aXR5Lm5hbWVdOwoJdmFyIGRhdHVtID0gZGF0YVtpZHhdOwoJdmFyIHJ2YWwgPSB7IHRpbWU6IGRhdHVtLnQgfTsKCglpZiAoZGF0dW0ucyBpbnN0YW5jZW9mIE9iamVjdCkgewoJCXJ2YWwuc3RhdGVzID0gZGF0dW0uczsKCX0gZWxzZSB7CgkJcnZhbC5zdGF0ZSA9IGRhdHVtLnM7Cgl9CgoJaWYgKGlkeCArIDEgPCBkYXRhLmxlbmd0aCkgewoJCXJ2YWwuZXRpbWUgPSBkYXRhW2lkeCArIDFdLnQ7Cgl9IGVsc2UgewoJCXJ2YWwuZXRpbWUgPSBnbG9iYWxzLnRpbWVXaWR0aCArIGdsb2JhbHMuYmVnaW47Cgl9CgoJcmV0dXJuIChydmFsKTsKfTsKCnZhciBlbnRpdHlCcmVha2Rvd24gPSBmdW5jdGlvbiAoZW50aXR5LCB0aW1lLCBldGltZSkKewoJdmFyIGRhdGEgPSBnX3N0YXRlbWFwc1tlbnRpdHkuc3RhdGVtYXBdLmRhdGFbZW50aXR5Lm5hbWVdOwoJdmFyIHJ2YWwgPSB7fTsKCgl2YXIgaWR4LCBsZW5ndGggPSBkYXRhLmxlbmd0aDsKCXZhciBmbG9vciA9IDA7Cgl2YXIgY2VpbCA9IGxlbmd0aDsKCXZhciBkYXR1bSwgdCwgc3Bhbiwgc3RhdGU7CgoJdGltZSArPSBnX3N0YXRlbWFwc1tlbnRpdHkuc3RhdGVtYXBdLm9mZnNldDsKCglpZiAobGVuZ3RoID09PSAwIHx8IGRhdGFbMF0udCA+IHRpbWUpCgkJcmV0dXJuICh7fSk7CgoJLyoKCSAqIEJpbmFyeSBzZWFyY2ggb3VyIGRhdGEgdW50aWwgd2UgZmluZCBhIGRhdHVtIHRoYXQgY29udGFpbnMgdGhlCgkgKiBzcGVjaWZpZWQgdGltZS4KCSAqLwoJZm9yICg7OykgewoJCWlkeCA9IGZsb29yICsgTWF0aC5mbG9vcigoY2VpbCAtIGZsb29yKSAvIDIpOwoKCQlpZiAoZGF0YVtpZHhdLnQgPiB0aW1lKSB7CgkJCWNlaWwgPSBpZHg7CgkJCWNvbnRpbnVlOwoJCX0KCgkJaWYgKGlkeCArIDEgPT0gbGVuZ3RoIHx8IGRhdGFbaWR4ICsgMV0udCA+IHRpbWUpCgkJCWJyZWFrOwoKCQlmbG9vciA9IGlkeDsKCX0KCgkvKgoJICogSWYgd2UgZG9uJ3QgaGF2ZSBhIHNwZWNpZmllZCBldGltZSwgd2Ugd2FudCB0byBqdXN0IHJldHVybiB0aGUgc3RhdGUKCSAqIGJyZWFrZG93biBhdCB0aGUgc3BlY2lmaWVkIHRpbWUuCgkgKi8KCWlmICghZXRpbWUpIHsKCQlkYXR1bSA9IGRhdGFbaWR4XTsKCgkJaWYgKGRhdHVtLnMgaW5zdGFuY2VvZiBPYmplY3QpCgkJCXJldHVybiAoZGF0dW0ucyk7CgoJCXJ2YWxbZGF0dW0uc10gPSAxLjA7CgoJCXJldHVybiAocnZhbCk7Cgl9CgoJLyoKCSAqIE5vdyB3ZSdyZSBnb2luZyB0byBpdGVyYXRlIGZvcndhcmQgdW50aWwgd2UgZ2V0IHBhc3Qgb3VyIHNwZWNpZmllZAoJICogZXRpbWUuCgkgKi8KCWZvciAoOyBpZHggPCBsZW5ndGg7IGlkeCsrKSB7CgkJZGF0dW0gPSBkYXRhW2lkeF07CgoJCWlmIChkYXR1bS50ID4gZXRpbWUpCgkJCWJyZWFrOwoKCQlpZiAoKHQgPSBkYXR1bS50KSA8IHRpbWUpCgkJCXQgPSB0aW1lOwoKCQlpZiAoaWR4ICsgMSA9PSBsZW5ndGggfHwgZGF0YVtpZHggKyAxXS50ID4gZXRpbWUpIHsKCQkJLyoKCQkJICogVGhpcyBkYXR1bSBjb250YWlucyB0aGUgZW5kIG9mIHRoZSByYW5nZTsgb3VyIHNwYW4KCQkJICogaXMgb3VyIGV0aW1lIG1pbnVzIHRoaXMgZGF0dW0ncyBzdGFydCB0aW1lIChvciBvdXIKCQkJICogc3BlY2lmaWVkIHRpbWUsIHdoaWNoZXZlciBpcyBncmVhdGVyKS4KCQkJICovCgkJCXNwYW4gPSBldGltZSAtIHQ7CgkJfSBlbHNlIHsKCQkJLyoKCQkJICogVGhlIGVuZCBvZiB0aGUgZGF0dW0gaXMgY292ZXJlZCBieSB0aGUgcmFuZ2U7IG91cgoJCQkgKiBzcGFuIGlzIHRoZSB0aW1lIHdpZHRoIG9mIHRoZSBkYXR1bS4KCQkJICovCgkJCXNwYW4gPSBkYXRhW2lkeCArIDFdLnQgLSB0OwoJCX0KCgkJLyoKCQkgKiBFeHByZXNzIG91ciBzcGFuIGFzIGEgcmF0aW8gb2YgdGhlIG92ZXJhbGwgdGltZS4KCQkgKi8KCQlzcGFuIC89IChldGltZSAtIHRpbWUpOwoKCQlpZiAoZGF0dW0ucyBpbnN0YW5jZW9mIE9iamVjdCkgewoJCQlmb3IgKHN0YXRlIGluIGRhdHVtLnMpIHsKCQkJCWlmICghcnZhbC5oYXNPd25Qcm9wZXJ0eShzdGF0ZSkpCgkJCQkJcnZhbFtzdGF0ZV0gPSAwOwoKCQkJCXJ2YWxbc3RhdGVdICs9IChkYXR1bVtzdGF0ZV0gKiBzcGFuKTsKCQkJfQoJCX0gZWxzZSB7CgkJCXN0YXRlID0gZGF0dW0uczsKCgkJCWlmICghcnZhbC5oYXNPd25Qcm9wZXJ0eShzdGF0ZSkpCgkJCQlydmFsW3N0YXRlXSA9IDA7CgoJCQlydmFsW3N0YXRlXSArPSBzcGFuOwoJCX0KCX0KCglyZXR1cm4gKHJ2YWwpOwp9OwoKdmFyIHN0YXRlYmFyQ3JlYXRlQmFyID0gZnVuY3Rpb24gKHN0YXRlYmFyLCB4MSwgeTEsIHgyLCB5MikKewoJdmFyIHBhcmVudCA9IHN0YXRlYmFyLnBhcmVudDsKCgl2YXIgYmFyID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHBhcmVudC5uYW1lc3BhY2VVUkksICdsaW5lJyk7CgliYXIuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtc3RhdGViYXInKTsKCWJhci54MS5iYXNlVmFsLnZhbHVlID0geDE7CgliYXIueTEuYmFzZVZhbC52YWx1ZSA9IHkxOwoJYmFyLngyLmJhc2VWYWwudmFsdWUgPSB4MjsKCWJhci55Mi5iYXNlVmFsLnZhbHVlID0geTI7CglwYXJlbnQuYXBwZW5kQ2hpbGQoYmFyKTsKCXN0YXRlYmFyLmJhcnMucHVzaChiYXIpOwp9OwoKdmFyIHN0YXRlYmFyQ3JlYXRlID0gZnVuY3Rpb24gKGVsZW0sIGlkeCkKewoJdmFyIHBhcmVudCA9IGdfc3RhdGVtYXBzWzBdLmVsZW0ucGFyZW50Tm9kZS5wYXJlbnROb2RlOwoJdmFyIHN0YXRlYmFyID0geyBwYXJlbnQ6IHBhcmVudCwgaGlkZGVuOiBmYWxzZSB9OwoJdmFyIGVudGl0eSA9IGdfZW50aXRpZXNbZWxlbS5wYXJlbnROb2RlLmlkXTsKCXZhciBzdGF0ZW1hcCA9IGdfc3RhdGVtYXBzW2VudGl0eS5zdGF0ZW1hcF07Cgl2YXIgc3RhdGVzID0gc3RhdGVtYXAuc3RhdGVzOwoJdmFyIGRhdHVtID0gZW50aXR5RGF0dW0oZW50aXR5LCBpZHgpOwoJdmFyIHBvcyA9IChlbnRpdHkucG9zaXRpb24gKiBnbG9iYWxzLnN0cmlwSGVpZ2h0KSArCgkgICAgKGVudGl0eS5zdGF0ZW1hcCAqIGdsb2JhbHMuc21hcmdpbik7Cgl2YXIgeCA9IGdsb2JhbHMubG1hcmdpbiAtIDI7Cgl2YXIgeSA9IGdsb2JhbHMudG1hcmdpbiArIHBvczsKCXZhciBlbGJvdyA9IHsgeDogOCwgeTogMTAgfTsKCXZhciBudWRnZSA9IHsgeDogMywgeTogMiB9OwoJdmFyIGRpcmVjdGlvbiA9IDEsIGFuY2hvcjsKCXZhciBhbmNob3JzID0gWyAnc3RhcnQnLCAnZW5kJyBdOwoJdmFyIHRleHQ7CgoJaWYgKHBvcyA8IChnbG9iYWxzLnRvdGFsSGVpZ2h0IC0gZ2xvYmFscy50bWFyZ2luKSAvIDIpIHsKCQlkaXJlY3Rpb24gPSAxOwoJCWFuY2hvciA9IDE7Cgl9IGVsc2UgewoJCWRpcmVjdGlvbiA9IC0xOwoJCWFuY2hvciA9IDA7Cgl9CgoJc3RhdGViYXIuYmFycyA9IFtdOwoKCS8qCgkgKiBXZSBoYXZlIHRocmVlIGJhcnMgdG8gZHJhdzogIG91ciBiYXIgdGhhdCBydW5zIHRoZSBoZWlnaHQgb2YgdGhlCgkgKiBzdHJpcCwgZm9sbG93ZWQgYnkgb3VyIGVsYm93LgoJICovCglzdGF0ZWJhckNyZWF0ZUJhcihzdGF0ZWJhciwgeCwgeSwgeCwgeSArIGdsb2JhbHMuc3RyaXBIZWlnaHQpOwoKCXkgKz0gMC41ICogZ2xvYmFscy5zdHJpcEhlaWdodDsKCXN0YXRlYmFyQ3JlYXRlQmFyKHN0YXRlYmFyLCB4IC0gZWxib3cueCwgeSwgeCwgeSk7CgoJeCAtPSBlbGJvdy54OwoJc3RhdGViYXJDcmVhdGVCYXIoc3RhdGViYXIsIHgsIHksIHgsIHkgKyAoZWxib3cueSAqIGRpcmVjdGlvbikpOwoKCS8qCgkgKiBOb3cgY3JlYXRlIHRoZSB0ZXh0IGF0IHRoZSBlbmQgb2YgdGhlIGVsYm93LgoJICovCgl5ICs9IChlbGJvdy55ICsgbnVkZ2UueSkgKiBkaXJlY3Rpb247Cgl4ICs9IG51ZGdlLng7Cgl0ZXh0ID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHBhcmVudC5uYW1lc3BhY2VVUkksICd0ZXh0Jyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3NhbnNzZXJpZicpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC1zdGF0ZXRleHQnKTsKCgl2YXIgdCA9IHN0YXRlbWFwLmVudGl0eUtpbmQgKyAnICcgKyBlbnRpdHkubmFtZTsKCglpZiAoZW50aXR5LmRlc2NyaXB0aW9uKQoJCXQgKz0gJyAoJyArIGVudGl0eS5kZXNjcmlwdGlvbiArICcpJzsKCglpZiAoZGF0dW0uaGFzT3duUHJvcGVydHkoJ3N0YXRlJykpIHsKCQl0ICs9ICcsICcgKyBzdGF0ZXNbZGF0dW0uc3RhdGVdLm5hbWU7Cgl9IGVsc2UgewoJCXZhciBpLCB0b3RhbCA9IDAsIG1heCA9IDAsIG1heHN0YXRlOwoKCQlmb3IgKGkgaW4gZGF0dW0uc3RhdGVzKSB7CgkJCXRvdGFsICs9IGRhdHVtLnN0YXRlc1tpXTsKCgkJCWlmIChkYXR1bS5zdGF0ZXNbaV0gPiBtYXgpIHsKCQkJCW1heHN0YXRlID0gaTsKCQkJCW1heCA9IGRhdHVtLnN0YXRlc1tpXTsKCQkJfQoJCX0KCgkJdCArPSAnLCAnICsgTWF0aC5mbG9vcigoZGF0dW0uc3RhdGVzW21heHN0YXRlXSAvIHRvdGFsKSAqIDEwMCk7CgkJdCArPSAnJSAnICsgc3RhdGVzW21heHN0YXRlXS5uYW1lOwoJfQoKCXQgKz0gJyBhdCAnICsgdGltZXVuaXRzKGRhdHVtLnRpbWUpOwoJdCArPSAnIGZvciAnICsgdGltZXVuaXRzKGRhdHVtLmV0aW1lIC0gZGF0dW0udGltZSk7CgoJdGV4dC5hcHBlbmRDaGlsZChnX3N2Z0RvYy5jcmVhdGVUZXh0Tm9kZSh0KSk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgeCk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd5JywgeSk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd0cmFuc2Zvcm0nLAoJICAgICdyb3RhdGUoMjcwLCcgKyB4ICsgJywnICsgeSArICcpJyk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd0ZXh0LWFuY2hvcicsIGFuY2hvcnNbYW5jaG9yXSk7Cgl0ZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgewoJCXN0YXRlYmFyUmVtb3ZlKHN0YXRlYmFyKTsKCQlzdGF0ZXNlbFVwZGF0ZSgpOwoJfSk7CgoJcGFyZW50LmFwcGVuZENoaWxkKHRleHQpOwoJc3RhdGViYXIuYmFycy5wdXNoKHRleHQpOwoKCXN0YXRlYmFyLmVudGl0eSA9IGVudGl0eTsKCglpZiAoZ19zdGF0ZW1hcHMubGVuZ3RoID09IDEpCgkJcmV0dXJuIChzdGF0ZWJhcik7CgoJLyoKCSAqIElmIHdlIGhhdmUgbW9yZSB0aGFuIG9uZSBzdGF0ZW1hcCwgd2Ugd2FudCB0byBhZGQgYSBiYXIgdG8gdGhlIHJpZ2h0CgkgKiBzaWRlIHRvIGluZGljYXRlIHdoaWNoIHN0YXRlbWFwIHRoaXMgaXMuCgkgKi8KCXZhciBwb3MgPSAoc3RhdGVtYXAucG9zaXRpb24gKiBnbG9iYWxzLnN0cmlwSGVpZ2h0KSArCgkgICAgKGVudGl0eS5zdGF0ZW1hcCAqIGdsb2JhbHMuc21hcmdpbik7CgoJeCA9IGdsb2JhbHMubG1hcmdpbiArIGdfd2lkdGggKyAyOwoJeSA9IGdsb2JhbHMudG1hcmdpbiArIHBvczsKCgl2YXIgcG9zID0gKHN0YXRlbWFwLnBvc2l0aW9uICogZ2xvYmFscy5zdHJpcEhlaWdodCkgKwoJICAgIChlbnRpdHkuc3RhdGVtYXAgKiBnbG9iYWxzLnNtYXJnaW4pOwoKCXZhciBoZWlnaHQgPSBzdGF0ZW1hcC5uZW50aXRpZXMgKiBnbG9iYWxzLnN0cmlwSGVpZ2h0OwoKCXN0YXRlYmFyQ3JlYXRlQmFyKHN0YXRlYmFyLCB4LCB5LCB4LCB5ICsgaGVpZ2h0KTsKCgl5ICs9IDAuNSAqIGhlaWdodDsKCXN0YXRlYmFyQ3JlYXRlQmFyKHN0YXRlYmFyLCB4ICsgZWxib3cueCwgeSwgeCwgeSk7CgoJeCArPSBlbGJvdy54OwoJc3RhdGViYXJDcmVhdGVCYXIoc3RhdGViYXIsIHgsIHksIHgsIHkgKyAoZWxib3cueSAqIGRpcmVjdGlvbikpOwoKCS8qCgkgKiBOb3cgY3JlYXRlIHRoZSB0ZXh0IGF0IHRoZSBlbmQgb2YgdGhlIGVsYm93LgoJICovCgl5ICs9IChlbGJvdy55ICsgbnVkZ2UueSkgKiBkaXJlY3Rpb247Cgl4IC09IG51ZGdlLng7Cgl0ZXh0ID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHBhcmVudC5uYW1lc3BhY2VVUkksICd0ZXh0Jyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3NhbnNzZXJpZicpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC1zdGF0ZXRleHQnKTsKCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUoc3RhdGVtYXAudGl0bGUpKTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnLCB4KTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3knLCB5KTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3RyYW5zZm9ybScsCgkgICAgJ3JvdGF0ZSg5MCwnICsgeCArICcsJyArIHkgKyAnKScpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAndGV4dC1hbmNob3InLCBhbmNob3JzW2FuY2hvciBeIDFdKTsKCglwYXJlbnQuYXBwZW5kQ2hpbGQodGV4dCk7CglzdGF0ZWJhci5iYXJzLnB1c2godGV4dCk7CgoJcmV0dXJuIChzdGF0ZWJhcik7Cn07Cgp2YXIgc3RhdGViYXJSZW1vdmUgPSBmdW5jdGlvbiAoc3RhdGViYXIpCnsKCXZhciBpOwoKCWlmICghc3RhdGViYXIpCgkJcmV0dXJuOwoKCWlmIChzdGF0ZWJhci5iYXJzKSB7CgkJZm9yIChpID0gMDsgaSA8IHN0YXRlYmFyLmJhcnMubGVuZ3RoOyBpKyspCgkJCXN0YXRlYmFyLnBhcmVudC5yZW1vdmVDaGlsZChzdGF0ZWJhci5iYXJzW2ldKTsKCX0KCglzdGF0ZWJhci5iYXJzID0gdW5kZWZpbmVkOwoJc3RhdGViYXIuZW50aXR5ID0gdW5kZWZpbmVkOwp9OwoKdmFyIHRpbWViYXJSZW1vdmUgPSBmdW5jdGlvbiAodGltZWJhcikKewoJaWYgKCF0aW1lYmFyKQoJCXJldHVybjsKCgl0aW1lYmFyUmVtb3ZlU3ViYmFyKHRpbWViYXIpOwoKCWlmICh0aW1lYmFyLmJhciAmJiAhdGltZWJhci5oaWRkZW4pIHsKCQl0aW1lYmFyLnBhcmVudC5yZW1vdmVDaGlsZCh0aW1lYmFyLmJhcik7CgkJdGltZWJhci5wYXJlbnQucmVtb3ZlQ2hpbGQodGltZWJhci50ZXh0KTsKCX0KCglpZiAodGltZWJhci5icmVha2Rvd24pIHsKCQl2YXIgaTsKCgkJZm9yIChpID0gMDsgaSA8IHRpbWViYXIuYnJlYWtkb3duLmxlbmd0aDsgaSsrKSB7CgkJCXZhciBlbGVtID0gdGltZWJhci5icmVha2Rvd25baV07CgkJCWVsZW0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtKTsKCQl9Cgl9CgoJdGltZWJhci5iYXIgPSB1bmRlZmluZWQ7Cgl0aW1lYmFyLnRleHQgPSB1bmRlZmluZWQ7Cgl0aW1lYmFyLmJyZWFrZG93biA9IHVuZGVmaW5lZDsKfTsKCnZhciB0aW1lYmFyU2V0QmFyTG9jYXRpb24gPSBmdW5jdGlvbiAoYmFyLCBtYXBYKQp7Cgl2YXIgYWJzWCA9IG1hcFggKyBnX29mZnNldDsKCXZhciBudWJoZWlnaHQgPSAxNTsKCgliYXIueDEuYmFzZVZhbC52YWx1ZSA9IGFic1g7CgliYXIueTEuYmFzZVZhbC52YWx1ZSA9IGdsb2JhbHMudG1hcmdpbiAtIG51YmhlaWdodDsKCWJhci54Mi5iYXNlVmFsLnZhbHVlID0gYWJzWDsKCWJhci55Mi5iYXNlVmFsLnZhbHVlID0gZ2xvYmFscy50bWFyZ2luICsgZ19oZWlnaHQ7Cn07Cgp2YXIgdGltZWJhclNldFN1YmJhckxvY2F0aW9uID0gZnVuY3Rpb24gKHN1YmJhciwgbWFwWCwgdGltZWJhclgpCnsKCXZhciBhYnNYID0gbWFwWCArIGdfb2Zmc2V0LCB4OwoJdmFyIGJhciA9IHN1YmJhci5iYXI7Cgl2YXIgc3BhbiA9IHN1YmJhci5zcGFuOwoJdmFyIHRleHQgPSBzdWJiYXIudGV4dDsKCXZhciBudWRnZSA9IHsgeDogMCwgeTogMTAgfTsKCgliYXIueDEuYmFzZVZhbC52YWx1ZSA9IGFic1g7CgliYXIueTEuYmFzZVZhbC52YWx1ZSA9IGdsb2JhbHMudG1hcmdpbjsKCWJhci54Mi5iYXNlVmFsLnZhbHVlID0gYWJzWDsKCWJhci55Mi5iYXNlVmFsLnZhbHVlID0gZ2xvYmFscy50bWFyZ2luICsgZ19oZWlnaHQ7CgoJc3Bhbi54MS5iYXNlVmFsLnZhbHVlID0gdGltZWJhclggKyBnX29mZnNldDsKCXNwYW4ueTEuYmFzZVZhbC52YWx1ZSA9IHN1YmJhci55OwoJc3Bhbi54Mi5iYXNlVmFsLnZhbHVlID0gYWJzWDsKCXNwYW4ueTIuYmFzZVZhbC52YWx1ZSA9IHN1YmJhci55OwoKCXggPSAodGltZWJhclggPCBtYXBYID8gdGltZWJhclggOiBtYXBYKSArCgkgICAgTWF0aC5hYnModGltZWJhclggLSBtYXBYKSAvIDI7CgoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAndGV4dC1hbmNob3InLCAnbWlkZGxlJyk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgeCArIGdfb2Zmc2V0KTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3knLCBzdWJiYXIueSArIG51ZGdlLnkpOwp9OwoKdmFyIHRpbWViYXJTZXRUZXh0TG9jYXRpb24gPSBmdW5jdGlvbiAodGV4dCwgbWFwWCkKewoJdmFyIGFic1ggPSBtYXBYICsgZ19vZmZzZXQ7Cgl2YXIgbnVkZ2UgPSB7IHg6IDMsIHk6IDUgfTsKCXZhciBkaXJlY3Rpb24sIGFuY2hvcjsKCXZhciB0aW1lOwoKCS8qCgkgKiBUaGUgc2lkZSBvZiB0aGUgdGltZWJhciB0aGF0IHdlIGFjdHVhbGx5IHJlbmRlciB0aGUgdGV4dCBjb250YWluaW5nCgkgKiB0aGUgb2Zmc2V0IGFuZCB0aGUgdGltZSBkZXBlbmRzIG9uIHRoZSBsb2NhdGlvbiBvZiBvdXIgdGltZWJhciB3aXRoCgkgKiByZXNwZWN0IHRvIHRoZSBjZW50ZXIgb2YgdGhlIHZpc2libGUgc3RhdGVtYXAuCgkgKi8KCWlmIChtYXBYIDwgKGdfd2lkdGggLyAyKSkgewoJCWRpcmVjdGlvbiA9IDE7CgkJYW5jaG9yID0gJ3N0YXJ0JzsKCX0gZWxzZSB7CgkJZGlyZWN0aW9uID0gLTE7CgkJYW5jaG9yID0gJ2VuZCc7Cgl9CgoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIGFic1ggKyAoZGlyZWN0aW9uICogbnVkZ2UueCkpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIGdsb2JhbHMudG1hcmdpbiAtIG51ZGdlLnkpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAndGV4dC1hbmNob3InLCBhbmNob3IpOwoKCXRpbWUgPSB0aW1lRnJvbU1hcFgobWFwWCk7Cgl0ZXh0LmNoaWxkTm9kZXNbMF0udGV4dENvbnRlbnQgPSB0aW1lVG9UZXh0KHRpbWUpOwoKCXJldHVybiAodGltZSk7Cn07Cgp2YXIgdGltZWJhckhpZGVTdWJiYXIgPSBmdW5jdGlvbiAodGltZWJhcikKewoJdmFyIHBhcmVudCwgc3ViYmFyOwoKCWlmICghdGltZWJhciB8fCAhKHN1YmJhciA9IHRpbWViYXIuc3ViYmFyKSB8fCBzdWJiYXIuaGlkZGVuKQoJCXJldHVybjsKCglwYXJlbnQgPSB0aW1lYmFyLnBhcmVudDsKCXBhcmVudC5yZW1vdmVDaGlsZChzdWJiYXIuYmFyKTsKCXBhcmVudC5yZW1vdmVDaGlsZChzdWJiYXIuc3Bhbik7CglwYXJlbnQucmVtb3ZlQ2hpbGQoc3ViYmFyLnRleHQpOwoKCXN1YmJhci5oaWRkZW4gPSB0cnVlOwp9OwoKdmFyIHRpbWViYXJTaG93U3ViYmFyID0gZnVuY3Rpb24gKHRpbWViYXIpCnsKCXZhciBwYXJlbnQsIHN1YmJhciwgbWFwWDsKCglpZiAoIXRpbWViYXIgfHwgIShzdWJiYXIgPSB0aW1lYmFyLnN1YmJhcikgfHwgIXN1YmJhci5oaWRkZW4pCgkJcmV0dXJuOwoKCW1hcFggPSB0aW1lVG9NYXBYKHN1YmJhci50aW1lKQoKCWlmIChtYXBYIDwgMCB8fCBtYXBYID49IGdfd2lkdGgpCgkJcmV0dXJuOwoKCXRpbWViYXJTZXRTdWJiYXJMb2NhdGlvbihzdWJiYXIsIG1hcFgsIHRpbWViYXIueCk7CgoJcGFyZW50ID0gdGltZWJhci5wYXJlbnQ7CglwYXJlbnQuYXBwZW5kQ2hpbGQoc3ViYmFyLmJhcik7CglwYXJlbnQuYXBwZW5kQ2hpbGQoc3ViYmFyLnNwYW4pOwoJcGFyZW50LmFwcGVuZENoaWxkKHN1YmJhci50ZXh0KTsKCglzdWJiYXIuaGlkZGVuID0gZmFsc2U7Cn0KCnZhciB0aW1lYmFySGlkZSA9IGZ1bmN0aW9uICh0aW1lYmFyKQp7CglpZiAoIXRpbWViYXIgfHwgdGltZWJhci5oaWRkZW4gfHwgIXRpbWViYXIuYmFyKQoJCXJldHVybjsKCgl0aW1lYmFyLnBhcmVudC5yZW1vdmVDaGlsZCh0aW1lYmFyLmJhcik7Cgl0aW1lYmFyLnBhcmVudC5yZW1vdmVDaGlsZCh0aW1lYmFyLnRleHQpOwoJdGltZWJhci5oaWRkZW4gPSB0cnVlOwoJdGltZWJhckhpZGVTdWJiYXIodGltZWJhcik7Cn07Cgp2YXIgdGltZWJhclNob3cgPSBmdW5jdGlvbiAodGltZWJhcikKewoJdmFyIG1hcFg7CgoJaWYgKCF0aW1lYmFyIHx8ICF0aW1lYmFyLmhpZGRlbikKCQlyZXR1cm47CgoJbWFwWCA9IHRpbWVUb01hcFgodGltZWJhci50aW1lKTsKCglpZiAobWFwWCA8IDAgfHwgbWFwWCA+PSBnX3dpZHRoKQoJCXJldHVybjsKCgl0aW1lYmFyU2V0QmFyTG9jYXRpb24odGltZWJhci5iYXIsIG1hcFgpOwoJdGltZWJhclNldFRleHRMb2NhdGlvbih0aW1lYmFyLnRleHQsIG1hcFgpOwoJdGltZWJhci54ID0gbWFwWDsKCgl0aW1lYmFyLnBhcmVudC5hcHBlbmRDaGlsZCh0aW1lYmFyLmJhcik7Cgl0aW1lYmFyLnBhcmVudC5hcHBlbmRDaGlsZCh0aW1lYmFyLnRleHQpOwoJdGltZWJhci5oaWRkZW4gPSBmYWxzZTsKCgl0aW1lYmFyU2hvd1N1YmJhcih0aW1lYmFyKTsKfTsKCnZhciB0aW1lYmFyU2V0TWlkZGxlID0gZnVuY3Rpb24gKHRpbWViYXIpCnsKCXZhciBtYXBYID0gZ193aWR0aCAvIDI7CgoJaWYgKCF0aW1lYmFyIHx8ICF0aW1lYmFyLmJhcikKCQlyZXR1cm47CgoJLyoKCSAqIFRoaXMgaXMganVzdCBhbiBhbGdlYnJhaWMgcmVhcnJhbmdlbWVudCBvZiB0aGUgbWFwWCBjYWxjdWxhdGlvbgoJICogaW4gdGltZWJhclNob3coKSwgYWJvdmUuCgkgKi8KCWdfdHJhbnNNYXRyaXhbNF0gPSAtKCgodGltZWJhci50aW1lIC8gZ2xvYmFscy50aW1lV2lkdGgpICogZ193aWR0aCAqCgkgICAgZ190cmFuc01hdHJpeFswXSkgLSBtYXBYKTsKfTsKCnZhciB0aW1lYmFyU2V0QnJlYWtkb3duID0gZnVuY3Rpb24gKHRpbWUpCnsKCXZhciBicmVha2Rvd24sIHN0YXRlLCB0b3RhbCA9IFtdOwoJdmFyIGVudGl0eTsKCXZhciBzdW0gPSB7fTsKCXZhciBydmFsID0gW107CgoJdmFyIGNsaWNrID0gZnVuY3Rpb24gKHN0YXRlbWFwLCBzKSB7CgkJcmV0dXJuIChmdW5jdGlvbiAoZXZ0KSB7IGxlZ2VuZGNsaWNrKGV2dCwgc3RhdGVtYXAsIHMpOyB9KTsKCX07CgoJdGltZSArPSBnbG9iYWxzLmJlZ2luOwoKCWZvciAoZW50aXR5IGluIGdfZW50aXRpZXMpIHsKCQl2YXIgc3RhdGVtYXAgPSBnX3N0YXRlbWFwc1tnX2VudGl0aWVzW2VudGl0eV0uc3RhdGVtYXBdLmxlZ2VuZDsKCgkJYnJlYWtkb3duID0gZW50aXR5QnJlYWtkb3duKGdfZW50aXRpZXNbZW50aXR5XSwgdGltZSk7CgoJCWlmICghdG90YWxbc3RhdGVtYXBdKSB7CgkJCXRvdGFsW3N0YXRlbWFwXSA9IHt9OwoJCQlzdW1bc3RhdGVtYXBdID0gMDsKCQl9CgoJCWZvciAoc3RhdGUgaW4gYnJlYWtkb3duKSB7CgkJCWlmICghdG90YWxbc3RhdGVtYXBdLmhhc093blByb3BlcnR5KHN0YXRlKSkKCQkJCXRvdGFsW3N0YXRlbWFwXVtzdGF0ZV0gPSAwOwoKCQkJc3VtW3N0YXRlbWFwXSArPSBicmVha2Rvd25bc3RhdGVdOwoJCQl0b3RhbFtzdGF0ZW1hcF1bc3RhdGVdICs9IGJyZWFrZG93bltzdGF0ZV07CgkJfQoJfQoKCXZhciBzZXR0b3RhbCA9IGZ1bmN0aW9uIChzdGF0ZW1hcCwgc3RhdGUpIHsKCQl2YXIgbGVnZW5kLCBwYXJlbnQsIHRleHQ7CgkJdmFyIHgsIHksIHdpZHRoLCBoZWlnaHQsIHQ7CgkJdmFyIG51ZGdlID0gMzsKCgkJLyoKCQkgKiBJdGVyYXRlIGRvd24gdW50aWwgd2UgZmluZCBhIHZhbGlkIGxlZ2VuZC4gIFdlIGtub3cgdGhhdAoJCSAqIHRoYXQgdGhlcmUgd2lsbCBiZSBhdCBsZWFzdCBvbmUsIGJ1dCB3ZSBicmVhayBvdXQgb2YgdGhlCgkJICogbG9vcCBhbnl3YXkgaWYgd2UgZG9uJ3QgZmluZCBpdCB0byBhbGxvdyB0aGUgZmFpbHVyZSBtb2RlCgkJICogaGVyZSB0byBiZSBhbiB1bnJlZmVyZW5jZWQgcHJvcGVydHkgcmF0aGVyIHRoYW4gYW4KCQkgKiBpbmlmaW5pdGUgbG9vcC4KCQkgKi8KCQlsZWdlbmQgPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZCgnc3RhdGVtYXAtbGVnZW5kLScgKwoJCSAgICBzdGF0ZW1hcCArICctJyArIHN0YXRlKTsKCgkJcGFyZW50ID0gbGVnZW5kLnBhcmVudE5vZGU7CgoJCXggPSBwYXJzZUludChsZWdlbmQuZ2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnKSwgMTApOwoJCXkgPSBwYXJzZUludChsZWdlbmQuZ2V0QXR0cmlidXRlTlMobnVsbCwgJ3knKSwgMTApOwoJCXdpZHRoID0gcGFyc2VJbnQobGVnZW5kLmdldEF0dHJpYnV0ZU5TKG51bGwsICd3aWR0aCcpLCAxMCk7CgkJaGVpZ2h0ID0gcGFyc2VJbnQobGVnZW5kLmdldEF0dHJpYnV0ZU5TKG51bGwsICdoZWlnaHQnKSwgMTApOwoKCQl0ID0gTWF0aC5mbG9vcih0b3RhbFtzdGF0ZW1hcF1bc3RhdGVdKSArICcgKCcgKwoJCSAgICBNYXRoLmZsb29yKCh0b3RhbFtzdGF0ZW1hcF1bc3RhdGVdIC8KCQkgICAgc3VtW3N0YXRlbWFwXSkgKiAxMDApICsgJyUpJzsKCgkJdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhwYXJlbnQubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7CgkJdGV4dC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10aW1lYnJlYWt0ZXh0Jyk7CgoJCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUodCkpOwoJCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnLCB4ICsgKHdpZHRoIC8gMikpOwoJCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3knLCB5ICsgKGhlaWdodCAvIDIpICsgbnVkZ2UpOwoJCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3RleHQtYW5jaG9yJywgJ21pZGRsZScpOwoKCQl0ZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywKCQkgICAgY2xpY2soc3RhdGVtYXAsIGdfc3RhdGVtYXBzW3N0YXRlbWFwXS5zdGF0ZXNbc3RhdGVdLnZhbHVlKSk7CgoJCXBhcmVudC5hcHBlbmRDaGlsZCh0ZXh0KTsKCQlydmFsLnB1c2godGV4dCk7Cgl9OwoKCWZvciAoc3RhdGVtYXAgaW4gdG90YWwpIHsKCQlmb3IgKHN0YXRlIGluIHRvdGFsW3N0YXRlbWFwXSkKCQkJc2V0dG90YWwoc3RhdGVtYXAsIHN0YXRlKTsKCX0KCglyZXR1cm4gKHJ2YWwpOwp9OwoKdmFyIHRpbWViYXJDcmVhdGUgPSBmdW5jdGlvbiAobWFwWCkKewoJdmFyIHBhcmVudCA9IGdfc3RhdGVtYXBzWzBdLmVsZW0ucGFyZW50Tm9kZS5wYXJlbnROb2RlOwoJdmFyIGJhciwgdGV4dDsKCXZhciB0aW1lYmFyID0geyBwYXJlbnQ6IHBhcmVudCwgaGlkZGVuOiBmYWxzZSB9OwoKCWJhciA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhwYXJlbnQubmFtZXNwYWNlVVJJLCAnbGluZScpOwoJYmFyLmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXRpbWViYXInKTsKCgl0aW1lYmFyU2V0QmFyTG9jYXRpb24oYmFyLCBtYXBYKTsKCXBhcmVudC5hcHBlbmRDaGlsZChiYXIpOwoKCXRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMocGFyZW50Lm5hbWVzcGFjZVVSSSwgJ3RleHQnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXRpbWV0ZXh0Jyk7Cgl0ZXh0LmFwcGVuZENoaWxkKGdfc3ZnRG9jLmNyZWF0ZVRleHROb2RlKCcnKSk7CgoJdGltZWJhci50aW1lID0gdGltZWJhclNldFRleHRMb2NhdGlvbih0ZXh0LCBtYXBYKTsKCXRpbWViYXIuYnJlYWtkb3duID0gdGltZWJhclNldEJyZWFrZG93bih0aW1lYmFyLnRpbWUpOwoJdGltZWJhci54ID0gbWFwWDsKCgl0ZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkgewoJCXRpbWViYXJSZW1vdmUodGltZWJhcik7CgkJc3RhdGVzZWxVcGRhdGUoKTsKCX0pOwoKCXBhcmVudC5hcHBlbmRDaGlsZCh0ZXh0KTsKCgl0aW1lYmFyLmJhciA9IGJhcjsKCXRpbWViYXIudGV4dCA9IHRleHQ7CgoJcmV0dXJuICh0aW1lYmFyKTsKfTsKCnZhciB0aW1lYmFyQ3JlYXRlU3ViYmFyID0gZnVuY3Rpb24gKHRpbWViYXIsIG1hcFgsIGFic1kpCnsKCXZhciBwYXJlbnQgPSB0aW1lYmFyLnBhcmVudDsKCXZhciBzdWJiYXIsIGJhciwgc3BhbiwgdGV4dCwgdGltZSwgZGVsdGE7CgoJYmFyID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHBhcmVudC5uYW1lc3BhY2VVUkksICdsaW5lJyk7CgliYXIuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtc3ViYmFyJyk7CgoJc3BhbiA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhwYXJlbnQubmFtZXNwYWNlVVJJLCAnbGluZScpOwoJc3Bhbi5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC1zdWJiYXItc3BhbicpOwoKCXRpbWUgPSB0aW1lRnJvbU1hcFgobWFwWCk7CglkZWx0YSA9IE1hdGguYWJzKHRpbWViYXIudGltZSAtIHRpbWUpOwoKCXRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMocGFyZW50Lm5hbWVzcGFjZVVSSSwgJ3RleHQnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXN1YmJhci10ZXh0Jyk7Cgl0ZXh0LmFwcGVuZENoaWxkKGdfc3ZnRG9jLmNyZWF0ZVRleHROb2RlKHRpbWV1bml0cyhkZWx0YSkpKTsKCgl2YXIgc3ViYmFyID0geyBiYXI6IGJhciwgc3Bhbjogc3BhbiwgdGV4dDogdGV4dCwKCSAgICB0aW1lOiB0aW1lLCB5OiBhYnNZLCBoaWRkZW46IGZhbHNlIH07CgoJdGltZWJhclNldFN1YmJhckxvY2F0aW9uKHN1YmJhciwgbWFwWCwgdGltZWJhci54KTsKCglwYXJlbnQuYXBwZW5kQ2hpbGQoYmFyKTsKCXBhcmVudC5hcHBlbmRDaGlsZChzcGFuKTsKCXBhcmVudC5hcHBlbmRDaGlsZCh0ZXh0KTsKCgl0aW1lYmFyLnN1YmJhciA9IHN1YmJhcjsKfQoKdmFyIHRpbWViYXJSZW1vdmVTdWJiYXIgPSBmdW5jdGlvbiAodGltZWJhcikKewoJdmFyIHN1YmJhciA9IHRpbWViYXIuc3ViYmFyOwoKCWlmICghc3ViYmFyKQoJCXJldHVybjsKCglpZiAoIXN1YmJhci5oaWRkZW4pIHsKCQl0aW1lYmFyLnBhcmVudC5yZW1vdmVDaGlsZChzdWJiYXIuYmFyKTsKCQl0aW1lYmFyLnBhcmVudC5yZW1vdmVDaGlsZChzdWJiYXIuc3Bhbik7CgkJdGltZWJhci5wYXJlbnQucmVtb3ZlQ2hpbGQoc3ViYmFyLnRleHQpOwoJfQoKCXRpbWViYXIuc3ViYmFyID0gdW5kZWZpbmVkOwp9Cgp2YXIgc3RhdGVzZWxUYWd2YWxTZWxlY3QgPSBmdW5jdGlvbiAoZXZ0LCB0YWd2YWwpCnsKCXZhciB0YWdkZWZzID0ge307Cgl2YXIgaSwgZW50aXR5OwoJdmFyIHN0YXRlLCB0YWdzOwoJdmFyIGNoaWxkOwoJdmFyIGhpZ2hsaWdodCA9ICdzdGF0ZW1hcC10YWdib3gtc2VsZWN0LWhpZ2hsaWdodGVkJzsKCglpZiAoZ19zdGF0ZXNlbCA9PSB1bmRlZmluZWQpCgkJcmV0dXJuOwoKCXN0YXRlID0gZ19zdGF0ZXNlbC5zdGF0ZTsKCXRhZ3MgPSBnX3N0YXRlbWFwc1tnX3N0YXRlc2VsLnN0YXRlbWFwXS50YWdzOwoKCWlmIChnX3RhZ3ZhbHNlbCAmJiBnX3RhZ3ZhbHNlbC5zZWxlY3RlZCkgewoJCWZvciAoaSA9IDA7IGkgPCBnX3RhZ3ZhbHNlbC5zZWxlY3RlZC5sZW5ndGg7IGkrKykgewoJCQljaGlsZCA9IGdfdGFndmFsc2VsLnNlbGVjdGVkW2ldOwoJCQljaGlsZC5yZW1vdmVBdHRyaWJ1dGUoJ2ZpbGwtb3BhY2l0eScpOwoJCX0KCgkJaWYgKGdfdGFndmFsc2VsLmVsZW1lbnQpCgkJCWdfdGFndmFsc2VsLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShoaWdobGlnaHQpOwoKCQkvKgoJCSAqIElmIG91ciBzZWxlY3Rpb24gbWF0Y2hlcyB0aGUgc2VsZWN0aW9uIHRoYXQgd2UgaGF2ZSBhbHJlYWR5CgkJICogbWFkZSwgdGhlbiB3ZSBhcmUgdW5zZWxlY3RpbmcgdGhpcyB0YWcgdmFsdWU7IHdlIG5lZWQgb25seQoJCSAqIHJldHVybi4KCQkgKi8KCQlpZiAoZ190YWd2YWxzZWwudGFnID09IGdfdGFnc2VsLnRhZyAmJgoJCSAgICBnX3RhZ3ZhbHNlbC50YWd2YWwgPT0gdGFndmFsKSB7CgkJCWdfdGFndmFsc2VsID0gdW5kZWZpbmVkOwoJCQlyZXR1cm47CgkJfQoJfQoKCWdfdGFndmFsc2VsID0geyBzZWxlY3RlZDogW10sIHRhZzogZ190YWdzZWwudGFnLCB0YWd2YWw6IHRhZ3ZhbCB9OwoKCWV2dC50YXJnZXQuY2xhc3NMaXN0LmFkZChoaWdobGlnaHQpOwoJZ190YWd2YWxzZWwuZWxlbWVudCA9IGV2dC50YXJnZXQ7CgoJLyoKCSAqIEl0ZXJhdGUgb3ZlciBhbGwgb2Ygb3VyIHRhZyBkZWZpbml0aW9ucywgbG9va2luZyBmb3IgYSBtYXRjaCB3aGVyZQoJICogdGhlIHNwZWNpZmllZCB0YWcgKGZvciB0aGUgc3BlY2lmaWVkIHN0YXRlKSBtYXRjaGVzIHRoZSBzcGVjaWZpZWQKCSAqIHRhZyB2YWx1ZS4KCSAqLwoJZm9yIChpID0gMDsgaSA8IHRhZ3MubGVuZ3RoOyBpKyspIHsKCQlpZiAodGFnc1tpXS5zdGF0ZSAhPSBzdGF0ZSkKCQkJY29udGludWU7CgoJCWlmICh0YWdzW2ldW2dfdGFnc2VsLnRhZ10gIT0gdGFndmFsKQoJCQljb250aW51ZTsKCgkJdGFnZGVmc1tpXSA9IHRydWU7Cgl9CgoJLyoKCSAqIE5vdyBmb3IgZWFjaCBlbnRpdHksIHdlIHdpbGwgcGxvdyB0aHJvdWdoIGV2ZXJ5IHJlY3RhbmdsZS4KCSAqLwoJZm9yIChpZCBpbiBnX2VudGl0aWVzKSB7CgkJdmFyIGVudGl0eSA9IGdfZW50aXRpZXNbaWRdOwoJCXZhciBlbGVtID0gZW50aXR5LmVsZW1lbnQ7CgkJdmFyIGRhdGEgPSBnX3N0YXRlbWFwc1tlbnRpdHkuc3RhdGVtYXBdLmRhdGFbZW50aXR5Lm5hbWVdOwoJCXZhciBqID0gMDsKCgkJZm9yIChpID0gMDsgaSA8IGVsZW0uY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewoJCQljaGlsZCA9IGVsZW0uY2hpbGROb2Rlc1tpXTsKCgkJCWlmIChjaGlsZC5ub2RlTmFtZSAhPSAncmVjdCcpCgkJCQljb250aW51ZTsKCgkJCXZhciBkYXR1bSA9IGRhdGFbaisrXTsKCQkJdmFyIHRhZzsKCgkJCWlmIChkYXR1bS5zIGluc3RhbmNlb2YgT2JqZWN0KSB7CgkJCQlpZiAoIWRhdHVtLnNbc3RhdGVdKQoJCQkJCWNvbnRpbnVlOwoJCQl9IGVsc2UgewoJCQkJaWYgKGRhdHVtLnMgIT0gc3RhdGUpCgkJCQkJY29udGludWU7CgkJCX0KCgkJCWlmICghZGF0dW0uZykKCQkJCWNvbnRpbnVlOwoKCQkJdmFyIHJhdGlvID0gMDsKCgkJCWZvciAodGFnIGluIGRhdHVtLmcpIHsKCQkJCWlmICh0YWdkZWZzW3RhZ10pCgkJCQkJcmF0aW8gKz0gZGF0dW0uZ1t0YWddOwoJCQl9CgoJCQlpZiAocmF0aW8gPT09IDApCgkJCQljb250aW51ZTsKCgkJCS8qCgkJCSAqIEF0IHRoaXMgcG9pbnQgd2UgaGF2ZSBmb3VuZCBhIHJlY3RhbmdsZSB0aGF0IHdlCgkJCSAqIHdhbnQgdG8gY29sb3IsIGFuZCB3ZSBrbm93IHRoZSBkZWdyZWUgdGhhdCB3ZQoJCQkgKiB3YW50IHRvIGNvbG9yIGl0IQoJCQkgKi8KCQkJY2hpbGQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ2ZpbGwtb3BhY2l0eScsIDEgLSByYXRpbyk7CgkJCWdfdGFndmFsc2VsLnNlbGVjdGVkLnB1c2goY2hpbGQpOwoJCX0KCX0KfTsKCnZhciBzdGF0ZXNlbFVwZGF0ZSA9IGZ1bmN0aW9uICgpCnsKCXZhciBiYXNlLCBldGltZSwgbmVudGl0aWVzID0gMDsKCXZhciBzdGF0ZSwgZW50aXR5OwoJdmFyIGJ5dGFnID0ge30sIHRhZ3ZhbDsKCXZhciBoZWFkZXIsIGksIHRhZ3M7CgoJaWYgKGdfc3RhdGVzZWwgPT0gdW5kZWZpbmVkKQoJCXJldHVybjsKCglzdGF0ZSA9IGdfc3RhdGVzZWwuc3RhdGU7Cgl0YWdzID0gZ19zdGF0ZW1hcHNbZ19zdGF0ZXNlbC5zdGF0ZW1hcF0udGFnczsKCgl2YXIgc3VtID0gZnVuY3Rpb24gKGRhdHVtLCBpZCwgc3BhbikgewoJCXZhciB0aWQsIHRhZzsKCgkJaWYgKCEoZGF0dW0ucyBpbnN0YW5jZW9mIE9iamVjdCkpIHsKCQkJaWYgKGRhdHVtLnMgIT0gc3RhdGUpCgkJCQlyZXR1cm47CgkJfSBlbHNlIHsKCQkJdmFyIHJhdGlvOwoKCQkJaWYgKCEocmF0aW8gPSBkYXR1bS5zW3N0YXRlXSkpCgkJCQlyZXR1cm47CgkJfQoKCQlpZiAoIWRhdHVtLmcpCgkJCXJldHVybjsKCgkJZm9yICh0aWQgaW4gZGF0dW0uZykgewoJCQl0YWcgPSB0YWdzW3RpZF07CgoJCQlpZiAodGFnLnN0YXRlICE9IHN0YXRlKQoJCQkJY29udGludWU7CgoJCQlpZiAoISh0YWd2YWwgPSB0YWdbZ190YWdzZWwudGFnXSkpCgkJCQljb250aW51ZTsKCgkJCWlmICghYnl0YWdbdGFndmFsXSkKCQkJCWJ5dGFnW3RhZ3ZhbF0gPSAwOwoKCQkJYnl0YWdbdGFndmFsXSArPSBzcGFuICogZGF0dW0uZ1t0aWRdOwoJCX0KCX07CgoJaWYgKCFnX3RhZ3NlbCkKCQlyZXR1cm47CgoJaGVhZGVyID0gJyc7CgoJaWYgKGdfc3RhdGViYXIgJiYgZ19zdGF0ZWJhci5lbnRpdHkpIHsKCQloZWFkZXIgPSBnX3N0YXRlbWFwc1tnX3N0YXRlc2VsLnN0YXRlbWFwXS5lbnRpdHlLaW5kICsgJyAnICsKCQkgICAgZ19zdGF0ZWJhci5lbnRpdHkubmFtZSArICcgJzsKCX0KCgloZWFkZXIgKz0gJ2J5ICcgKyBnX3RhZ3NlbC50YWcgKyAnICc7CgoJaWYgKGdfdGltZWJhciAmJiBnX3RpbWViYXIuYmFyKSB7CgkJYmFzZSA9IGdfdGltZWJhci50aW1lICsgZ2xvYmFscy5iZWdpbjsKCQlldGltZSA9IDA7CgkJaGVhZGVyICs9ICdhdCAnICsgdGltZXVuaXRzKGdfdGltZWJhci50aW1lKTsKCX0gZWxzZSB7CgkJYmFzZSA9IHRpbWVGcm9tTWFwWCgwKSArIGdsb2JhbHMuYmVnaW47CgkJZXRpbWUgPSB0aW1lRnJvbU1hcFgoZ193aWR0aCkgKyBnbG9iYWxzLmJlZ2luOwoJCWhlYWRlciArPSAnb3ZlciBzcGFuJzsKCX0KCgloZWFkZXIgPSBoZWFkZXIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBoZWFkZXIuc3Vic3RyKDEpICsgJzonOwoKCWlmIChnX3N0YXRlYmFyICYmIGdfc3RhdGViYXIuZW50aXR5KSB7CgkJZW50aXR5Rm9yRWFjaERhdHVtKGdfc3RhdGViYXIuZW50aXR5LCBiYXNlLCBldGltZSwgc3VtKTsKCQluZW50aXRpZXMrKzsKCX0gZWxzZSB7CgkJLyoKCQkgKiBGb3IgZWFjaCBlbnRpdHksIHdlIG5lZWQgdG8gZGV0ZXJtaW5lIHRoZSBhbW91bnQgb2YgdGltZQoJCSAqIGluIG91ciBzZWxlY3RlZCBzdGF0ZS4KCQkgKi8KCQlmb3IgKGVudGl0eSBpbiBnX2VudGl0aWVzKSB7CgkJCWVudGl0eUZvckVhY2hEYXR1bShnX2VudGl0aWVzW2VudGl0eV0sCgkJCSAgICBiYXNlLCBldGltZSwgc3VtKTsKCQkJbmVudGl0aWVzKys7CgkJfQoJfQoKCXZhciBzb3J0ZWQgPSBPYmplY3Qua2V5cyhieXRhZykuc29ydChmdW5jdGlvbiAobGhzLCByaHMpIHsKCQlpZiAoYnl0YWdbbGhzXSA8IGJ5dGFnW3Joc10pIHsKCQkJcmV0dXJuICgxKTsKCQl9IGVsc2UgaWYgKGJ5dGFnW2xoc10gPiBieXRhZ1tyaHNdKSB7CgkJCXJldHVybiAoLTEpOwoJCX0gZWxzZSB7CgkJCXJldHVybiAoMCk7CgkJfQoJfSk7CgoJdmFyIGRpdmlzb3I7CgoJaWYgKGV0aW1lID09PSAwKSB7CgkJZGl2aXNvciA9IG5lbnRpdGllczsKCX0gZWxzZSB7CgkJZGl2aXNvciA9IChldGltZSAtIGJhc2UpICogbmVudGl0aWVzOwoJfQoKCXZhciB4ID0gZ19zdGF0ZXNlbC54OwoJdmFyIHkgPSBnX3N0YXRlc2VsLnkgKyAxMDsKCgl2YXIgZWxlbSA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC10YWdib3gtc2VsZWN0Jyk7CgoJd2hpbGUgKGVsZW0uY2hpbGROb2Rlcy5sZW5ndGggPiAwKQoJCWVsZW0ucmVtb3ZlQ2hpbGQoZWxlbS5jaGlsZE5vZGVzWzBdKTsKCglpZiAoZ190YWd2YWxzZWwgJiYgZ190YWd2YWxzZWwuZWxlbWVudCkKCQlnX3RhZ3ZhbHNlbC5lbGVtZW50ID0gdW5kZWZpbmVkOwoKCXZhciB0ZXh0ID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKGVsZW0ubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10YWdib3gtc2VsZWN0LWhlYWRlcicpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzYW5zc2VyaWYnKTsKCgl0ZXh0LmFwcGVuZENoaWxkKGdfc3ZnRG9jLmNyZWF0ZVRleHROb2RlKGhlYWRlcikpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIHgpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHkpOwoJZWxlbS5hcHBlbmRDaGlsZCh0ZXh0KTsKCXkgKz0gOTsKCgl2YXIgbGluZSA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhlbGVtLm5hbWVzcGFjZVVSSSwgJ2xpbmUnKTsKCWxpbmUuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1oZWFkZXItbGluZScpOwoJbGluZS54MS5iYXNlVmFsLnZhbHVlID0geCAtIDI7CglsaW5lLnkxLmJhc2VWYWwudmFsdWUgPSB5OwoJbGluZS54Mi5iYXNlVmFsLnZhbHVlID0gZ19zdGF0ZXNlbC54MjsKCWxpbmUueTIuYmFzZVZhbC52YWx1ZSA9IHk7CgllbGVtLmFwcGVuZENoaWxkKGxpbmUpOwoJeSArPSAxODsKCgl2YXIgYm1hcmdpbiA9IDYwOwoJdmFyIHR0bCA9IDA7Cgl2YXIgZWxsaXBzaXMgPSBmYWxzZTsKCgl2YXIgY2xpY2sgPSBmdW5jdGlvbiAodHYpIHsKCQlyZXR1cm4gKGZ1bmN0aW9uIChldnQpIHsgc3RhdGVzZWxUYWd2YWxTZWxlY3QoZXZ0LCB0dik7IH0pOwoJfTsKCglmb3IgKGkgPSAwOyBpIDw9IHNvcnRlZC5sZW5ndGg7IGkrKykgewoJCXZhciB0LCBwZXJjOwoKCQlpZiAoaSA8IHNvcnRlZC5sZW5ndGgpIHsKCQkJcGVyYyA9IChieXRhZ1tzb3J0ZWRbaV1dIC8gZGl2aXNvcikgKiAxMDAuMDsKCQkJdGFndmFsID0gc29ydGVkW2ldOwoJCQl0dGwgKz0gcGVyYzsKCgkJCWlmICh5ID4gZ2xvYmFscy50b3RhbEhlaWdodCAtIGJtYXJnaW4pIHsKCQkJCWlmIChlbGxpcHNpcykKCQkJCQljb250aW51ZTsKCgkJCQllbGxpcHNpcyA9IHRydWU7CgkJCQl0YWd2YWwgPSAnLi4uJzsKCQkJfQoJCX0gZWxzZSB7CgkJCXBlcmMgPSB0dGw7CgkJCXRhZ3ZhbCA9ICd0b3RhbCc7CgoJCQl5IC09IDU7CgkJCWxpbmUgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMoZWxlbS5uYW1lc3BhY2VVUkksCgkJCSAgICAnbGluZScpOwoJCQlsaW5lLmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXRhZ2JveC1zZWxlY3Qtc3VtLWxpbmUnKTsKCQkJbGluZS54MS5iYXNlVmFsLnZhbHVlID0geCAtIDI7CgkJCWxpbmUueTEuYmFzZVZhbC52YWx1ZSA9IHk7CgkJCWxpbmUueDIuYmFzZVZhbC52YWx1ZSA9IGdfc3RhdGVzZWwueDI7CgkJCWxpbmUueTIuYmFzZVZhbC52YWx1ZSA9IHk7CgkJCWVsZW0uYXBwZW5kQ2hpbGQobGluZSk7CgkJCXkgKz0gMTU7CgkJfQoKCQlpZiAoaSAhPSBzb3J0ZWQubGVuZ3RoICYmIGVsbGlwc2lzKSB7CgkJCXQgPSAnLi4uJzsKCQl9IGVsc2UgewoJCQl0ID0gTWF0aC50cnVuYyhwZXJjKSArICcuJyArCgkJCSAgICAoTWF0aC5yb3VuZChwZXJjICogMTAwKSAlIDEwMCkgKyAnJSc7CgkJfQoKCQl0ZXh0ID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKGVsZW0ubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1wZXJjJyk7CgkJdGV4dC5jbGFzc0xpc3QuYWRkKCdzYW5zc2VyaWYnKTsKCQl0ZXh0LmFwcGVuZENoaWxkKGdfc3ZnRG9jLmNyZWF0ZVRleHROb2RlKHQpKTsKCQl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgeCArIDQ1KTsKCQl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd5JywgeSk7CgkJZWxlbS5hcHBlbmRDaGlsZCh0ZXh0KTsKCgkJdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhlbGVtLm5hbWVzcGFjZVVSSSwgJ3RleHQnKTsKCQl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXRhZ2JveC1zZWxlY3QnKTsKCQl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3NhbnNzZXJpZicpOwoJCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUodGFndmFsKSk7CgkJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIHggKyA1MCk7CgkJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHkpOwoKCQkvKgoJCSAqIElmIHdlIGFscmVhZHkgaGF2ZSBhIHRhZyB2YWx1ZSBzZWxlY3Rpb24gYW5kIGl0IG1hdGNoZXMKCQkgKiB3aGF0IHdlJ3JlIGFib3V0IHRvIGRpc3BsYXksIGluZGljYXRlIGFzIG11Y2ggYnkKCQkgKiBoaWdobGlnaHRpbmcgaXQuCgkJICovCgkJaWYgKGdfdGFndmFsc2VsICYmIGdfdGFndmFsc2VsLnRhZyA9PSBnX3RhZ3NlbC50YWcgJiYKCQkgICAgZ190YWd2YWxzZWwudGFndmFsID09IHRhZ3ZhbCkgewoJCQl2YXIgaGlnaGxpZ2h0ID0gJ3N0YXRlbWFwLXRhZ2JveC1zZWxlY3QtaGlnaGxpZ2h0ZWQnOwoJCQl0ZXh0LmNsYXNzTGlzdC5hZGQoaGlnaGxpZ2h0KTsKCQkJZ190YWd2YWxzZWwuZWxlbWVudCA9IHRleHQ7CgkJfQoKCQl0ZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2sodGFndmFsKSk7CgoJCWVsZW0udGl0bGUgPSB0OwoJCWVsZW0uYXBwZW5kQ2hpbGQodGV4dCk7CgkJeSArPSAxNTsKCX0KfTsKCnZhciBzdGF0ZXNlbFRhZ1NlbGVjdCA9IGZ1bmN0aW9uIChldnQsIHRhZykKewoJdmFyIGVsZW0sIHByZWZpeCA9ICdzdGF0ZW1hcC10YWdib3gtdGFnLSc7CgoJaWYgKGdfdGFnc2VsKSB7CgkJZWxlbSA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKHByZWZpeCArIGdfdGFnc2VsLnRhZyk7CgkJZWxlbS5jbGFzc0xpc3QucmVtb3ZlKHByZWZpeCArICdoaWdobGlnaHRlZCcpOwoKCQlpZiAoZ190YWdzZWwudGFnID09IHRhZykgewoJCQlnX3RhZ3NlbCA9IHVuZGVmaW5lZDsKCQkJc3RhdGVzZWxVcGRhdGUoKTsKCQkJcmV0dXJuOwoJCX0KCX0KCgllbGVtID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQocHJlZml4ICsgdGFnKTsKCWVsZW0uY2xhc3NMaXN0LmFkZChwcmVmaXggKyAnaGlnaGxpZ2h0ZWQnKTsKCWdfdGFnc2VsID0geyB0YWc6IHRhZyB9OwoJc3RhdGVzZWxVcGRhdGUoKTsKfTsKCnZhciBzdGF0ZXNlbENsZWFyVGFnYm94ID0gZnVuY3Rpb24gKCkKewoJdmFyIHRhZ2JveCA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC10YWdib3gnKSwgZWxlbTsKCglpZiAoIXRhZ2JveCkKCQlyZXR1cm47CgoJd2hpbGUgKHRhZ2JveC5jaGlsZE5vZGVzLmxlbmd0aCA+IDApCgkJdGFnYm94LnJlbW92ZUNoaWxkKHRhZ2JveC5jaGlsZE5vZGVzWzBdKTsKCgllbGVtID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLXRhZ2JveC1zZWxlY3QnKTsKCgl3aGlsZSAoZWxlbS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApCgkJZWxlbS5yZW1vdmVDaGlsZChlbGVtLmNoaWxkTm9kZXNbMF0pOwp9OwoKdmFyIHN0YXRlc2VsU2VsZWN0ID0gZnVuY3Rpb24gKHN0YXRlbWFwLCBzdGF0ZSkKewoJdmFyIGxlZ2VuZCA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC1sZWdlbmQtJyArCgkgICAgZ19zdGF0ZW1hcHNbc3RhdGVtYXBdLmxlZ2VuZCArICctJyArIHN0YXRlKTsKCXZhciBzdGF0ZXMgPSBnX3N0YXRlbWFwc1tzdGF0ZW1hcF0uc3RhdGVzOwoJdmFyIGFsbHRhZ3MgPSBnX3N0YXRlbWFwc1tzdGF0ZW1hcF0udGFnczsKCXZhciB0YWdzID0ge307Cgl2YXIgaSwgdDsKCXZhciBsbWFyZ2luID0gMjA7Cgl2YXIgb2Zmc2V0ID0gZ2xvYmFscy5sbWFyZ2luICsgZ2xvYmFscy5waXhlbFdpZHRoOwoKCWxlZ2VuZC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC1sZWdlbmQtaGlnaGxpZ2h0ZWQnKTsKCXN0YXRlc2VsQ2xlYXJUYWdib3goKTsKCgl0ID0gJ3RhZ3MgZm9yICcgKyBzdGF0ZXNbc3RhdGVdLm5hbWU7CgoJdmFyIHRhZ2JveCA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC10YWdib3gnKTsKCXZhciB4ID0gb2Zmc2V0ICsgbG1hcmdpbjsKCXZhciB5ID0gZ2xvYmFscy50bWFyZ2luOwoJdmFyIHgyID0geCArIChnbG9iYWxzLnRhZ1dpZHRoIC0gbG1hcmdpbik7CgoJdmFyIHRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlModGFnYm94Lm5hbWVzcGFjZVVSSSwgJ3RleHQnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGFnYm94LWhlYWRlcicpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzYW5zc2VyaWYnKTsKCgl0ZXh0LmFwcGVuZENoaWxkKGdfc3ZnRG9jLmNyZWF0ZVRleHROb2RlKHQpKTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnLCB4KTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3knLCB5KTsKCXRhZ2JveC5hcHBlbmRDaGlsZCh0ZXh0KTsKCXkgKz0gMTA7CgoJdmFyIGxpbmUgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlModGFnYm94Lm5hbWVzcGFjZVVSSSwgJ2xpbmUnKTsKCWxpbmUuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGFnYm94LWhlYWRlci1saW5lJyk7CglsaW5lLngxLmJhc2VWYWwudmFsdWUgPSB4IC0gMjsKCWxpbmUueTEuYmFzZVZhbC52YWx1ZSA9IHk7CglsaW5lLngyLmJhc2VWYWwudmFsdWUgPSB4MjsKCWxpbmUueTIuYmFzZVZhbC52YWx1ZSA9IHk7Cgl0YWdib3guYXBwZW5kQ2hpbGQobGluZSk7Cgl5ICs9IDIwOwoKCS8qCgkgKiBOb3cgYWRkIHRleHQgZm9yIGVhY2ggcG9zc2libGUgdGFnIGZvciB0aGlzIHN0YXRlLgoJICovCglmb3IgKGkgPSAwOyBpIDwgYWxsdGFncy5sZW5ndGg7IGkrKykgewoJCWlmIChhbGx0YWdzW2ldLnN0YXRlICE9PSBzdGF0ZSkKCQkJY29udGludWU7CgoJCWZvciAodCBpbiBhbGx0YWdzW2ldKSB7CgkJCWlmICh0ID09ICdzdGF0ZScgfHwgdCA9PSAndGFnJykKCQkJCWNvbnRpbnVlOwoKCQkJdGFnc1t0XSA9IHRydWU7CgkJfQoJfQoKCXRhZ3MgPSBPYmplY3Qua2V5cyh0YWdzKS5zb3J0KCk7CgoJdmFyIGNsaWNrID0gZnVuY3Rpb24gKHRhZykgewoJCXJldHVybiAoZnVuY3Rpb24gKGV2dCkgeyBzdGF0ZXNlbFRhZ1NlbGVjdChldnQsIHRhZyk7IH0pOwoJfTsKCglmb3IgKGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkrKykgewoJCXRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlModGFnYm94Lm5hbWVzcGFjZVVSSSwgJ3RleHQnKTsKCQl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXRhZ2JveC10YWcnKTsKCQl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3NhbnNzZXJpZicpOwoJCXRleHQuaWQgPSAnc3RhdGVtYXAtdGFnYm94LXRhZy0nICsgdGFnc1tpXTsKCgkJdGV4dC5hcHBlbmRDaGlsZChnX3N2Z0RvYy5jcmVhdGVUZXh0Tm9kZSh0YWdzW2ldKSk7CgkJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIHgpOwoJCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3knLCB5KTsKCQl0ZXh0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xpY2sodGFnc1tpXSkpOwoKCQl0YWdib3guYXBwZW5kQ2hpbGQodGV4dCk7CgkJeSArPSAxODsKCX0KCglnX3N0YXRlc2VsID0geyBzdGF0ZW1hcDogc3RhdGVtYXAsIHN0YXRlOiBzdGF0ZSwgeDogeCwgeTogeSwgeDI6IHgyIH07CglzdGF0ZXNlbFVwZGF0ZSgpOwp9OwoKdmFyIHN0YXRlc2VsQ2xlYXIgPSBmdW5jdGlvbiAoKQp7Cgl2YXIgc3RhdGUsIHN0YXRlbWFwLCBsZWdlbmQ7CgoJaWYgKGdfc3RhdGVzZWwgPT0gdW5kZWZpbmVkKQoJCXJldHVybiAoLTEpOwoKCXN0YXRlID0gZ19zdGF0ZXNlbC5zdGF0ZTsKCXN0YXRlbWFwID0gZ19zdGF0ZXNlbC5zdGF0ZW1hcDsKCWxlZ2VuZCA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC1sZWdlbmQtJyArCgkgICAgc3RhdGVtYXAgKyAnLScgKyBzdGF0ZSk7CglsZWdlbmQuY2xhc3NMaXN0LnJlbW92ZSgnc3RhdGVtYXAtbGVnZW5kLWhpZ2hsaWdodGVkJyk7CgoJc3RhdGVzZWxDbGVhclRhZ2JveCgpOwoJZ19zdGF0ZXNlbCA9IHVuZGVmaW5lZDsKCWdfdGFnc2VsID0gdW5kZWZpbmVkOwoKCXJldHVybiAoc3RhdGUpOwp9OwoKdmFyIHN0YXRlbWFwc1VwZGF0ZSA9IGZ1bmN0aW9uICgpCnsKCXZhciBpOwoJdmFyIG5ld01hdHJpeCA9ICdtYXRyaXgoJyArICBnX3RyYW5zTWF0cml4LmpvaW4oJyAnKSArICcpJzsKCglmb3IgKGkgPSAwOyBpIDwgZ19zdGF0ZW1hcHMubGVuZ3RoOyBpKyspIHsKCQlnX3N0YXRlbWFwc1tpXS5lbGVtLnNldEF0dHJpYnV0ZU5TKG51bGwsCgkJICAgICd0cmFuc2Zvcm0nLCBuZXdNYXRyaXgpOwoJfQp9OwoKLyoKICogQWxsIG9mIHRoZSBmb2xsb3dpbmcgKmNsaWNrKCkgZnVuY3Rpb25zIGFyZSBhZGRlZCBhdCB0aGUgdGltZSBvZiBzdGF0ZW1hcAogKiBnZW5lcmF0aW9uLgogKi8KdmFyIGxlZ2VuZGNsaWNrID0gZnVuY3Rpb24gKGV2dCwgc3RhdGVtYXAsIHN0YXRlKQp7CglpZiAoZ2xvYmFscy5ub3RhZ3MgfHwgc3RhdGVzZWxDbGVhcigpID09IHN0YXRlKQoJCXJldHVybjsKCglzdGF0ZXNlbFNlbGVjdChzdGF0ZW1hcCwgc3RhdGUpOwoJc3RhdGVzZWxVcGRhdGUoKTsKfTsKCnZhciBtYXBjbGljayA9IGZ1bmN0aW9uIChldnQsIGlkeCkKewoJdmFyIHggPSBldnQuY2xpZW50WCAtIGdfb2Zmc2V0OwoKCWlmIChldnQuc2hpZnRLZXkgfHwgZXZ0LmFsdEtleSkgewoJCWlmICghZ190aW1lYmFyIHx8ICFnX3RpbWViYXIuYmFyKQoJCQlyZXR1cm47CgoJCXRpbWViYXJSZW1vdmVTdWJiYXIoZ190aW1lYmFyKTsKCQl0aW1lYmFyQ3JlYXRlU3ViYmFyKGdfdGltZWJhciwgeCwgZXZ0LmNsaWVudFkpOwoJCXJldHVybjsKCX0KCgl0aW1lYmFyUmVtb3ZlKGdfdGltZWJhcik7CglnX3RpbWViYXIgPSB0aW1lYmFyQ3JlYXRlKHgpOwoKCXN0YXRlYmFyUmVtb3ZlKGdfc3RhdGViYXIpOwoJZ19zdGF0ZWJhciA9IHN0YXRlYmFyQ3JlYXRlKGV2dC50YXJnZXQsIGlkeCk7CgoJc3RhdGVzZWxVcGRhdGUoKTsKfTsKCnZhciBwYW5jbGljayA9IGZ1bmN0aW9uIChkeCwgZHkpCnsKCXZhciBtaW5YID0gLShnX3dpZHRoICogZ190cmFuc01hdHJpeFswXSAtIGdfd2lkdGgpOwoJdmFyIG1pblkgPSAtKGdfaGVpZ2h0ICogZ190cmFuc01hdHJpeFswXSAtIGdfaGVpZ2h0KTsKCglnX3RyYW5zTWF0cml4WzRdICs9IGR4OwoJZ190cmFuc01hdHJpeFs1XSArPSBkeTsKCgl0aW1lYmFySGlkZShnX3RpbWViYXIpOwoKCWlmIChnX3RyYW5zTWF0cml4WzRdID4gMCkKCQlnX3RyYW5zTWF0cml4WzRdID0gMDsKCglpZiAoZ190cmFuc01hdHJpeFs0XSA8IG1pblgpCgkJZ190cmFuc01hdHJpeFs0XSA9IG1pblg7CgoJaWYgKGdfdHJhbnNNYXRyaXhbNV0gPiAwKQoJCWdfdHJhbnNNYXRyaXhbNV0gPSAwOwoKCWlmIChnX3RyYW5zTWF0cml4WzVdIDwgbWluWSkKCQlnX3RyYW5zTWF0cml4WzVdID0gbWluWTsKCgl0aW1lU2V0U3BhbkxhYmVsKCk7CglzdGF0ZW1hcHNVcGRhdGUoKTsKCXRpbWViYXJTaG93KGdfdGltZWJhcik7CglzdGF0ZXNlbFVwZGF0ZSgpOwp9OwoKdmFyIHpvb21jbGljayA9IGZ1bmN0aW9uIChzY2FsZSkKewoJdmFyIGk7CgoJdGltZWJhckhpZGUoZ190aW1lYmFyKTsKCglmb3IgKGkgPSAwOyBpIDwgZ190cmFuc01hdHJpeC5sZW5ndGg7IGkrKykgewoJCS8qCgkJICogV2UgZG9uJ3Qgc2NhbGUgdGhlIFkgZGlyZWN0aW9uIG9uIGEgem9vbS4KCQkgKi8KCQlpZiAoaSAhPSAzKQoJCQlnX3RyYW5zTWF0cml4W2ldICo9IHNjYWxlOwoJfQoKCXZhciBtaW5YID0gLShnX3dpZHRoICogZ190cmFuc01hdHJpeFswXSAtIGdfd2lkdGgpOwoJdmFyIG1pblkgPSAtKGdfaGVpZ2h0ICogZ190cmFuc01hdHJpeFswXSAtIGdfaGVpZ2h0KTsKCglnX3RyYW5zTWF0cml4WzRdICs9ICgxIC0gc2NhbGUpICogZ193aWR0aCAvIDI7Cgl0aW1lYmFyU2V0TWlkZGxlKGdfdGltZWJhcik7CgoJaWYgKGdfdHJhbnNNYXRyaXhbNF0gPiAwKQoJCWdfdHJhbnNNYXRyaXhbNF0gPSAwOwoKCWlmIChnX3RyYW5zTWF0cml4WzRdIDwgbWluWCkKCQlnX3RyYW5zTWF0cml4WzRdID0gbWluWDsKCglpZiAoZ190cmFuc01hdHJpeFs1XSA+IDApCgkJZ190cmFuc01hdHJpeFs1XSA9IDA7CgoJaWYgKGdfdHJhbnNNYXRyaXhbNV0gPCBtaW5ZKQoJCWdfdHJhbnNNYXRyaXhbNV0gPSBtaW5ZOwoKCWlmIChnX3RyYW5zTWF0cml4WzBdIDwgMSkKCQlnX3RyYW5zTWF0cml4ID0gWzEsIDAsIDAsIDEsIDAsIDBdOwoKCXRpbWVTZXRTcGFuTGFiZWwoKTsKCXN0YXRlbWFwc1VwZGF0ZSgpOwoJdGltZWJhclNob3coZ190aW1lYmFyKTsKCXN0YXRlc2VsVXBkYXRlKCk7Cn07CgpdXT48L3NjcmlwdD4KPHN0eWxlIHR5cGU9InRleHQvY3NzIj48IVtDREFUQVsKLyoKICogQ29weXJpZ2h0IDIwMTgsIEpveWVudCwgSW5jLgogKi8KCi5zYW5zc2VyaWYgewoJZm9udC1mYW1pbHk6IFZlcmRhbmEsIEFyaWFsLCBIZWx2ZXRpY2EsIHNhbnMtc2VyaWY7Cn0KCi5idXR0b24gewogICAgICAgIGZpbGw6ICNmZmY7Cn0KCi5zdGF0ZW1hcC1ib3JkZXIgewoJZmlsbDogbm9uZTsKCXN0cm9rZTogYmxhY2s7CglzdHJva2Utd2lkdGg6IDAuNTsKfQoKLnN0YXRlbWFwLWhpZ2hsaWdodCB7CglmaWxsOgkJYmx1ZTsKfQoKLnN0YXRlbWFwLXRpdGxlIHsKCWZvbnQtc2l6ZToJMTBwdDsKCWZvbnQtd2VpZ2h0Oglib2xkOwoJdGV4dC1hbmNob3I6CW1pZGRsZTsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10aW1lbGFiZWwgewoJZm9udC1zaXplOgk4cHQ7Cgl0ZXh0LWFuY2hvcjoJbWlkZGxlOwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRpbWViYXIgewoJc3Ryb2tlOgkJYmx1ZTsKCWZpbGw6CQlibHVlOwoJc3Ryb2tlLXdpZHRoOgkxcHg7Cn0KCi5zdGF0ZW1hcC10aW1ldGV4dCB7Cglmb250LXNpemU6CThwdDsKCWZvbnQtd2VpZ2h0Oglub3JtYWw7CglmaWxsOgkJYmx1ZTsKCXN0cm9rZToJCWJsdWU7CglzdHJva2Utd2lkdGg6CTBweDsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10aW1lYnJlYWt0ZXh0IHsKCWZvbnQtc2l6ZToJOHB0OwoJZm9udC13ZWlnaHQ6CWJvbGQ7CglmaWxsOgkJYmx1ZTsKCXN0cm9rZToJCXdoaXRlOwoJc3Ryb2tlLXdpZHRoOgkwLjNweDsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC1zdWJiYXIgewoJc3Ryb2tlOgkJYmx1ZTsKCWZpbGw6CQlibHVlOwoJc3Ryb2tlLXdpZHRoOgkxcHg7CglzdHJva2UtZGFzaGFycmF5OiA1Ljc7Cn0KCi5zdGF0ZW1hcC1zdWJiYXItc3BhbiB7CglzdHJva2U6CQlibHVlOwoJZmlsbDoJCWJsdWU7CglzdHJva2Utd2lkdGg6CTAuNzVweDsKCXN0cm9rZS1kYXNoYXJyYXk6IDE7Cn0KCi5zdGF0ZW1hcC1zdWJiYXItdGV4dCB7Cglmb250LXNpemU6CThwdDsKCWZvbnQtd2VpZ2h0Oglib2xkOwoJZmlsbDoJCWJsdWU7CglzdHJva2U6CQl3aGl0ZTsKCXN0cm9rZS13aWR0aDoJMC4zcHg7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtc3RhdGViYXIgewoJc3Ryb2tlOgkJYmx1ZTsKCWZpbGw6CQlibHVlOwoJc3Ryb2tlLXdpZHRoOgkxcHg7Cn0KCi5zdGF0ZW1hcC1zdGF0ZXRleHQgewoJZm9udC1zaXplOgk4cHQ7Cglmb250LXdlaWdodDoJbm9ybWFsOwoJZmlsbDoJCWJsdWU7CglzdHJva2U6CQlibHVlOwoJc3Ryb2tlLXdpZHRoOgkwcHg7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGltZWxpbmUgewoJc3Ryb2tlOiBibGFjazsKCXN0cm9rZS13aWR0aDoJMC41cHQ7CgltYXJrZXItc3RhcnQ6CXVybCgjc3RhcnRhcnJvdyk7CgltYXJrZXItZW5kOgl1cmwoI2VuZGFycm93KTsKfQoKLnN0YXRlbWFwLWxlZ2VuZCB7CglzdHJva2U6IGJsYWNrOwoJc3Ryb2tlLXdpZHRoOgkwLjVwdDsKfQoKLnN0YXRlbWFwLWxlZ2VuZC1oaWdobGlnaHRlZCB7CglzdHJva2U6CQlibHVlOwoJc3Ryb2tlLXdpZHRoOgkzcHQ7Cn0KCi5zdGF0ZW1hcC1sZWdlbmRsYWJlbCB7Cglmb250LXNpemU6CTdwdDsKCXRleHQtYW5jaG9yOgltaWRkbGU7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGFnYm94IHsKCXN0cm9rZToJCWJsYWNrOwoJc3Ryb2tlLXdpZHRoOgkwLjVwdDsKCWFsaWdubWVudC1iYXNlbGluZToJaGFuZ2luZzsKCXRleHQtYW5jaG9yOglzdGFydDsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10YWdib3gtaGVhZGVyIHsKCWZvbnQtc2l6ZToJOXB0OwoJZm9udC13ZWlnaHQ6CWJvbGQ7Cgl0ZXh0LWFuY2hvcjoJc3RhcnQ7Cglmb250LXN0eWxlOglvYmxpcXVlOwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRhZ2JveC1oZWFkZXItbGluZSB7CglzdHJva2U6CQlibGFjazsKCXN0cm9rZS13aWR0aDoJMXB0Owp9Cgouc3RhdGVtYXAtdGFnYm94LXRhZyB7Cglmb250LXNpemU6CTlwdDsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10YWdib3gtdGFnLWhpZ2hsaWdodGVkIHsKCWZvbnQtd2VpZ2h0Oglib2xkOwp9Cgouc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1oZWFkZXIgewoJZm9udC1zaXplOgk4cHQ7Cgl0ZXh0LWFuY2hvcjoJc3RhcnQ7Cglmb250LXN0eWxlOglvYmxpcXVlOwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRhZ2JveC1zZWxlY3QgewoJZm9udC1zaXplOgk4cHQ7Cgl0ZXh0LWFuY2hvcjoJc3RhcnQ7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1wZXJjIHsKCWZvbnQtc2l6ZToJOHB0OwoJdGV4dC1hbmNob3I6CWVuZDsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10YWdib3gtc2VsZWN0LWhlYWRlci1saW5lIHsKCXN0cm9rZToJCWJsYWNrOwoJc3Ryb2tlLXdpZHRoOgkwLjVwdDsKfQoKLnN0YXRlbWFwLXRhZ2JveC1zZWxlY3Qtc3VtLWxpbmUgewoJc3Ryb2tlOgkJYmxhY2s7CglzdHJva2Utd2lkdGg6CTAuMjVwdDsKfQoKLnN0YXRlbWFwLXRhZ2JveC1zZWxlY3QtaGlnaGxpZ2h0ZWQgewoJZm9udC13ZWlnaHQ6CWJvbGQ7Cn0KCl1dPjwvc3R5bGU+Cgo8IS0tIFRoaXMgZmlsZSBpcyBwdWxsZWQgaW50byB0aGUgPGRlZnM+IHNlY3Rpb24gIS0tPgoKIDxtYXJrZXIgaWQ9InN0YXJ0YXJyb3ciIG1hcmtlcldpZHRoPSIxMCIgbWFya2VySGVpZ2h0PSI3IiAKICAgIHJlZlg9IjEwIiByZWZZPSIzLjUiIG9yaWVudD0iYXV0byI+CiAgICAgIDxwb2x5Z29uIHBvaW50cz0iMTAgMCwgMTAgNywgMCAzLjUiIGZpbGw9ImJsYWNrIiAvPgogICAgPC9tYXJrZXI+CiAgICA8bWFya2VyIGlkPSJlbmRhcnJvdyIgbWFya2VyV2lkdGg9IjEwIiBtYXJrZXJIZWlnaHQ9IjciIAogICAgcmVmWD0iMCIgcmVmWT0iMy41IiBvcmllbnQ9ImF1dG8iIG1hcmtlclVuaXRzPSJzdHJva2VXaWR0aCI+CiAgICAgICAgPHBvbHlnb24gcG9pbnRzPSIwIDAsIDEwIDMuNSwgMCA3IiBmaWxsPSJibGFjayIgLz4KICAgIDwvbWFya2VyPgoKCjwvZGVmcz4KPHN2ZyB4PSIxMzhweCIgeT0iNjBweCIgd2lkdGg9Ijg2MnB4IiBoZWlnaHQ9IjMwMHB4Ij4KPHJlY3QgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSI4NjJweCIgaGVpZ2h0PSIzMDBweCIgZmlsbD0iI2YwZjBmMCIgaWQ9InN0YXRlbWFwLTAtaGlnaGxpZ2h0IiAvPgo8ZyBpZD0ic3RhdGVtYXAtMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgMSAwIDApIj4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTItMC1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgMi0wLWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTAtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSAyLTAtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjEwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi0xLWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSAyLTEtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMjAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTEtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSAyLTEtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjMwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi0yLWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSAyLTItZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iNDAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTItdHJpZ2dlciI+PHRpdGxlPkVudGl0eSAyLTItdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjUwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi0zLWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSAyLTMtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iNjAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTMtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSAyLTMtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjcwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi00LWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSAyLTQtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iODAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTQtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSAyLTQtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjkwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi01LWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSAyLTUtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTAwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi01LXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMi01LXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxMTAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0zLTAtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDMtMC1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxMjAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0zLTAtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSAzLTAtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjEzMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTMtMS1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgMy0xLWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjE0MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTMtMS10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDMtMS10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTUwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMy0zLWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSAzLTMtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTYwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMy0zLXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMy0zLXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxNzAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0zLTQtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDMtNC1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxODAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0zLTQtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSAzLTQtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjE5MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTQtNC1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgNC00LWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjIwMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTQtNC10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDQtNC10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMjEwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtNS00LWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSA1LTQtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMjIwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtNS00LXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgNS00LXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyMzAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC02LTQtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDYtNC1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyNDAiIHdpZHRoPSIxODkuMzgyOTQwMTA4ODkyOTQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPHJlY3QgeD0iMTg4Ljk4Mjk0MDEwODg5MjkzIiB5PSIyNDAiIHdpZHRoPSI4LjIyMjE0MTU2MDc5ODU0OCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAxKSIgc3R5bGU9ImZpbGw6cmdiKDAsIDAsIDI1NSkiIC8+CjxyZWN0IHg9IjE5Ni44MDUwODE2Njk2OTE0OCIgeT0iMjQwIiB3aWR0aD0iNDMxLjU1NjQ0MjgzMTIxNiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAyKSIgc3R5bGU9ImZpbGw6cmdiKDEyOCwgMTI4LCAxMjgpIiAvPgo8cmVjdCB4PSI2MjcuOTYxNTI0NTAwOTA3NCIgeT0iMjQwIiB3aWR0aD0iMC43MTI4ODU2NjI0MzE5NDIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMykiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDE2NSwgMCkiIC8+CjxyZWN0IHg9IjYyOC4yNzQ0MTAxNjMzMzkzIiB5PSIyNDAiIHdpZHRoPSIwLjcxMjg4NTY2MjQzMTk0MiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA0KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAwKSIgLz4KPHJlY3QgeD0iNjI4LjU4NzI5NTgyNTc3MTMiIHk9IjI0MCIgd2lkdGg9IjIuNTkwMTk5NjM3MDIzNTkzNiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA1KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMTY1LCAwKSIgLz4KPHJlY3QgeD0iNjMwLjc3NzQ5NTQ2Mjc5NDgiIHk9IjI0MCIgd2lkdGg9IjAuNzEyODg1NjYyNDMxOTQyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDYpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDApIiAvPgo8cmVjdCB4PSI2MzEuMDkwMzgxMTI1MjI2OCIgeT0iMjQwIiB3aWR0aD0iMC43MTI4ODU2NjI0MzE5NDIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgNykiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDE2NSwgMCkiIC8+CjxyZWN0IHg9IjYzMS40MDMyNjY3ODc2NTg4IiB5PSIyNDAiIHdpZHRoPSI4LjIyMjE0MTU2MDc5ODU0OCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA4KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAwKSIgLz4KPHJlY3QgeD0iNjM5LjIyNTQwODM0ODQ1NzQiIHk9IjI0MCIgd2lkdGg9IjEuMzM4NjU2OTg3Mjk1ODI1OCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA5KSIgc3R5bGU9ImZpbGw6cmdiKDEyOCwgMTI4LCAxMjgpIiAvPgo8cmVjdCB4PSI2NDAuMTY0MDY1MzM1NzUzMiIgeT0iMjQwIiB3aWR0aD0iMC43MTI4ODU2NjI0MzE5NDIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMTApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8cmVjdCB4PSI2NDAuNDc2OTUwOTk4MTg1MiIgeT0iMjQwIiB3aWR0aD0iMC43MTI4ODU2NjI0MzE5NDIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMTEpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDApIiAvPgo8cmVjdCB4PSI2NDAuNzg5ODM2NjYwNjE3IiB5PSIyNDAiIHdpZHRoPSI4LjIyMjE0MTU2MDc5ODU0OCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAxMikiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDE2NSwgMCkiIC8+CjxyZWN0IHg9IjY0OC42MTE5NzgyMjE0MTU2IiB5PSIyNDAiIHdpZHRoPSIyMTMuNzg4MDIxNzc4NTg0NCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAxMykiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtNi00LXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgNi00LXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyNTAiIHdpZHRoPSIxODkuMzgyOTQwMTA4ODkyOTQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPHJlY3QgeD0iMTg4Ljk4Mjk0MDEwODg5MjkzIiB5PSIyNTAiIHdpZHRoPSI0MzkuMzc4NTg0MzkyMDE0NDMiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMSkiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAwKSIgLz4KPHJlY3QgeD0iNjI3Ljk2MTUyNDUwMDkwNzQiIHk9IjI1MCIgd2lkdGg9IjExLjY2Mzg4Mzg0NzU0OTkxIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDIpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjxyZWN0IHg9IjYzOS4yMjU0MDgzNDg0NTc0IiB5PSIyNTAiIHdpZHRoPSIxLjMzODY1Njk4NzI5NTgyNTgiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMykiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAwKSIgLz4KPHJlY3QgeD0iNjQwLjE2NDA2NTMzNTc1MzIiIHk9IjI1MCIgd2lkdGg9IjIyMi4yMzU5MzQ2NjQyNDY4MyIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA0KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC02LTUtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDYtNS1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyNjAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC02LTUtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSA2LTUtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjI3MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTctNC1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgNy00LWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjI4MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTctNC10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDctNC10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMjkwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8L2c+CjxkZWZzPgo8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQiPjwhW0NEQVRBWwpnX3N0YXRlbWFwc1swXSA9IHsKICAib2Zmc2V0IjogMCwKICAic3RhdGVzIjogWwogICAgewogICAgICAibmFtZSI6ICJzdGFibGUtcmVsZWFzZSIsCiAgICAgICJ2YWx1ZSI6IDAsCiAgICAgICJjb2xvciI6ICJ3aGl0ZSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXJlbC10by1wcmUiLAogICAgICAidmFsdWUiOiAxLAogICAgICAiY29sb3IiOiAiYmx1ZSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXJlbC10by1yZWwiLAogICAgICAidmFsdWUiOiAyLAogICAgICAiY29sb3IiOiAiYnJvd24iCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJlbWl0LXJlbGVhc2UiLAogICAgICAidmFsdWUiOiAzLAogICAgICAiY29sb3IiOiAid2hpdGUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJzdGFibGUtcHJlc3MiLAogICAgICAidmFsdWUiOiA0LAogICAgICAiY29sb3IiOiAiZ3JleSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXByZS10by1wcmUiLAogICAgICAidmFsdWUiOiA1LAogICAgICAiY29sb3IiOiAieWVsbG93IgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiYm91bmNpbmctcHJlLXRvLXJlbCIsCiAgICAgICJ2YWx1ZSI6IDYsCiAgICAgICJjb2xvciI6ICJvcmFuZ2UiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJlbWl0LXByZXNzIiwKICAgICAgInZhbHVlIjogNywKICAgICAgImNvbG9yIjogImJsYWNrIgogICAgfQogIF0sCiAgImVudGl0eUtpbmQiOiAiRW50aXR5IiwKICAidGl0bGUiOiAia2V5Ym9hcmQgZGVib3VuY2luZyIsCiJkYXRhIjogeyAKIjItNS1kZWJvdW5jZXIiOiBbCnsgInQiOiA1NDQ0NjIwMDAwMDAsICJzIjogMH0KXQosIjItMS1kZWJvdW5jZXIiOiBbCnsgInQiOiA1NDQ0NjIwMDAwMDAsICJzIjogMH0KXQosIjctNC10cmlnZ2VyIjogWwp7ICJ0IjogNTQ0NDYyMDAwMDAwLCAicyI6IDN9Cl0KLCIyLTItZGVib3VuY2VyIjogWwp7ICJ0IjogNTQ0NDYyMDAwMDAwLCAicyI6IDB9Cl0KLCIyLTQtdHJpZ2dlciI6IFsKeyAidCI6IDU0NDQ2MjAwMDAwMCwgInMiOiAzfQpdCiwiNS00LWRlYm91bmNlciI6IFsKeyAidCI6IDU0NDQ2MjAwMDAwMCwgInMiOiAwfQpdCiwiMy0xLXRyaWdnZXIiOiBbCnsgInQiOiA1NDQ0NjIwMDAwMDAsICJzIjogM30KXQosIjItNS10cmlnZ2VyIjogWwp7ICJ0IjogNTQ0NDYyMDAwMDAwLCAicyI6IDN9Cl0KLCIzLTAtZGVib3VuY2VyIjogWwp7ICJ0IjogNTQ0NDYyMDAwMDAwLCAicyI6IDB9Cl0KLCI2LTUtZGVib3VuY2VyIjogWwp7ICJ0IjogNTQ0NDYyMDAwMDAwLCAicyI6IDB9Cl0KLCIzLTQtdHJpZ2dlciI6IFsKeyAidCI6IDU0NDQ2MjAwMDAwMCwgInMiOiAzfQpdCiwiMy0zLXRyaWdnZXIiOiBbCnsgInQiOiA1NDQ0NjIwMDAwMDAsICJzIjogM30KXQosIjMtNC1kZWJvdW5jZXIiOiBbCnsgInQiOiA1NDQ0NjIwMDAwMDAsICJzIjogMH0KXQosIjYtNC1kZWJvdW5jZXIiOiBbCnsgInQiOiA1NDQ0NjIwMDAwMDAsICJzIjogMH0sCnsgInQiOiA1NDQ1ODI4MDAwMDAsICJzIjogMX0sCnsgInQiOiA1NDQ1ODc4MDAwMDAsICJzIjogNH0sCnsgInQiOiA1NDQ4NjM0MDAwMDAsICJzIjogNn0sCnsgInQiOiA1NDQ4NjM2MDAwMDAsICJzIjogNX0sCnsgInQiOiA1NDQ4NjM4MDAwMDAsICJzIjogNn0sCnsgInQiOiA1NDQ4NjUyMDAwMDAsICJzIjogNX0sCnsgInQiOiA1NDQ4NjU0MDAwMDAsICJzIjogNn0sCnsgInQiOiA1NDQ4NjU2MDAwMDAsICJzIjogNX0sCnsgInQiOiA1NDQ4NzA2MDAwMDAsICJzIjogNH0sCnsgInQiOiA1NDQ4NzEyMDAwMDAsICJzIjogNn0sCnsgInQiOiA1NDQ4NzE0MDAwMDAsICJzIjogNX0sCnsgInQiOiA1NDQ4NzE2MDAwMDAsICJzIjogNn0sCnsgInQiOiA1NDQ4NzY2MDAwMDAsICJzIjogMH0KXQosIjMtMC10cmlnZ2VyIjogWwp7ICJ0IjogNTQ0NDYyMDAwMDAwLCAicyI6IDN9Cl0KLCI2LTUtdHJpZ2dlciI6IFsKeyAidCI6IDU0NDQ2MjAwMDAwMCwgInMiOiAzfQpdCiwiNC00LXRyaWdnZXIiOiBbCnsgInQiOiA1NDQ0NjIwMDAwMDAsICJzIjogM30KXQosIjItMy1kZWJvdW5jZXIiOiBbCnsgInQiOiA1NDQ0NjIwMDAwMDAsICJzIjogMH0KXQosIjMtMy1kZWJvdW5jZXIiOiBbCnsgInQiOiA1NDQ0NjIwMDAwMDAsICJzIjogMH0KXQosIjMtMS1kZWJvdW5jZXIiOiBbCnsgInQiOiA1NDQ0NjIwMDAwMDAsICJzIjogMH0KXQosIjItMy10cmlnZ2VyIjogWwp7ICJ0IjogNTQ0NDYyMDAwMDAwLCAicyI6IDN9Cl0KLCI3LTQtZGVib3VuY2VyIjogWwp7ICJ0IjogNTQ0NDYyMDAwMDAwLCAicyI6IDB9Cl0KLCI0LTQtZGVib3VuY2VyIjogWwp7ICJ0IjogNTQ0NDYyMDAwMDAwLCAicyI6IDB9Cl0KLCIyLTAtdHJpZ2dlciI6IFsKeyAidCI6IDU0NDQ2MjAwMDAwMCwgInMiOiAzfQpdCiwiNi00LXRyaWdnZXIiOiBbCnsgInQiOiA1NDQ0NjIwMDAwMDAsICJzIjogM30sCnsgInQiOiA1NDQ1ODI4MDAwMDAsICJzIjogN30sCnsgInQiOiA1NDQ4NjM0MDAwMDAsICJzIjogM30sCnsgInQiOiA1NDQ4NzA2MDAwMDAsICJzIjogN30sCnsgInQiOiA1NDQ4NzEyMDAwMDAsICJzIjogM30KXQosIjItMi10cmlnZ2VyIjogWwp7ICJ0IjogNTQ0NDYyMDAwMDAwLCAicyI6IDN9Cl0KLCIyLTQtZGVib3VuY2VyIjogWwp7ICJ0IjogNTQ0NDYyMDAwMDAwLCAicyI6IDB9Cl0KLCIyLTEtdHJpZ2dlciI6IFsKeyAidCI6IDU0NDQ2MjAwMDAwMCwgInMiOiAzfQpdCiwiMi0wLWRlYm91bmNlciI6IFsKeyAidCI6IDU0NDQ2MjAwMDAwMCwgInMiOiAwfQpdCiwiNS00LXRyaWdnZXIiOiBbCnsgInQiOiA1NDQ0NjIwMDAwMDAsICJzIjogM30KXQp9LAplbnRpdGllczogewogICAgICIyLTUtZGVib3VuY2VyIjogeyAgfQogICAgLCAiMy0wLWRlYm91bmNlciI6IHsgIH0KICAgICwgIjItNC10cmlnZ2VyIjogeyAgfQogICAgLCAiMy00LWRlYm91bmNlciI6IHsgIH0KICAgICwgIjMtMC10cmlnZ2VyIjogeyAgfQogICAgLCAiMi0yLXRyaWdnZXIiOiB7ICB9CiAgICAsICI2LTQtZGVib3VuY2VyIjogeyAgfQogICAgLCAiMi0zLWRlYm91bmNlciI6IHsgIH0KICAgICwgIjItMi1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICI3LTQtZGVib3VuY2VyIjogeyAgfQogICAgLCAiNi01LWRlYm91bmNlciI6IHsgIH0KICAgICwgIjItNC1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICIyLTAtdHJpZ2dlciI6IHsgIH0KICAgICwgIjItMS1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICI1LTQtZGVib3VuY2VyIjogeyAgfQogICAgLCAiMy00LXRyaWdnZXIiOiB7ICB9CiAgICAsICIzLTMtZGVib3VuY2VyIjogeyAgfQogICAgLCAiMy0xLXRyaWdnZXIiOiB7ICB9CiAgICAsICIyLTAtZGVib3VuY2VyIjogeyAgfQogICAgLCAiNS00LXRyaWdnZXIiOiB7ICB9CiAgICAsICIyLTUtdHJpZ2dlciI6IHsgIH0KICAgICwgIjMtMS1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICIyLTMtdHJpZ2dlciI6IHsgIH0KICAgICwgIjItMS10cmlnZ2VyIjogeyAgfQogICAgLCAiMy0zLXRyaWdnZXIiOiB7ICB9CiAgICAsICI2LTUtdHJpZ2dlciI6IHsgIH0KICAgICwgIjQtNC1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICI3LTQtdHJpZ2dlciI6IHsgIH0KICAgICwgIjQtNC10cmlnZ2VyIjogeyAgfQogICAgLCAiNi00LXRyaWdnZXIiOiB7ICB9Cn0KfSBdXT48L3NjcmlwdD48L2RlZnM+Cjwvc3ZnPgo8cG9seWdvbiBjbGFzcz0ic3RhdGVtYXAtYm9yZGVyIgogIHBvaW50cz0iMTM4IDYwLCAxMDAwIDYwLCAxMDAwIDM2MCwgMTM4IDM2MCIvPgo8dGV4dCB4PSI1NjkiIHk9IjE2IiBjbGFzcz0ic3RhdGVtYXAtdGl0bGUgc2Fuc3NlcmlmIj5TdGF0ZW1hcCBvZiBrZXlib2FyZCBkZWJvdW5jaW5nIGFjdGl2aXR5PC90ZXh0Pgo8dGV4dCB4PSI1NjkiIHk9IjM0IiBjbGFzcz0ic3RhdGVtYXAtdGltZWxhYmVsIHNhbnNzZXJpZiIgaWQ9InN0YXRlbWFwLXRpbWVsYWJlbCI+PC90ZXh0Pgo8bGluZSB4MT0iMTQ4IiB5MT0iNDAiIHgyPSI5OTAiIHkyPSI0MCIKY2xhc3M9InN0YXRlbWFwLXRpbWVsaW5lIiAvPgo8c3ZnIHg9IjIwcHgiIHk9IjYwcHgiIHdpZHRoPSI4OHB4IiBoZWlnaHQ9IjQ1cHgiPgo8c3ZnIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IgogICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InBhbmNsaWNrKDUwLCAwKSI+PHJlY3QgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiAKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjIycHgiIG9uY2xpY2s9InBhbmNsaWNrKDUwLCAwKSIgY2xhc3M9ImJ1dHRvbiIgLz48c3ZnIHZpZXdCb3g9IjAgMCAxNiAxNiI+DQo8cGF0aCBkPSJNMTAuMjUsMTIuNzVjMC4xOTEsMCwwLjM4NC0wLjA3MiwwLjUyOS0wLjIxOWMwLjI5NC0wLjI5NSwwLjI5NC0wLjc3LDAtMS4wNjJMNy4zMTEsOGwzLjQ2OS0zLjQ2OQ0KCWMwLjI5NC0wLjI5MywwLjI5NC0wLjc2OCwwLTEuMDYyYy0wLjI5My0wLjI5My0wLjc2OC0wLjI5My0xLjA2MSwwbC00LDRjLTAuMjkzLDAuMjkzLTAuMjkzLDAuNzY4LDAsMS4wNjJsNCw0DQoJQzkuODY2LDEyLjY3OCwxMC4wNTksMTIuNzUsMTAuMjUsMTIuNzV6Ii8+DQo8L3N2Zz4NCjwvc3ZnPgo8c3ZnIHg9IjIycHgiIHk9IjBweCIgd2lkdGg9IjIycHgiIGhlaWdodD0iMjJweCIKICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJ6b29tY2xpY2soMS4yNSkiPjxyZWN0IHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjJweCIgCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PSIyMnB4IiBvbmNsaWNrPSJ6b29tY2xpY2soMS4yNSkiIGNsYXNzPSJidXR0b24iIC8+PHN2ZyB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KPHBhdGggZD0iTTEwLjI1MSw2Ljk4OWMwLDAuMjc2LTAuMjI1LDAuNS0wLjUsMC41aC0xLjV2MS41YzAsMC4yNzUtMC4yMjQsMC41LTAuNSwwLjVzLTAuNS0wLjIyNS0wLjUtMC41di0xLjVoLTEuNQ0KCWMtMC4yNzYsMC0wLjUtMC4yMjQtMC41LTAuNXMwLjIyNC0wLjUsMC41LTAuNWgxLjV2LTEuNWMwLTAuMjc2LDAuMjI0LTAuNSwwLjUtMC41czAuNSwwLjIyNCwwLjUsMC41djEuNWgxLjUNCglDMTAuMDI2LDYuNDg5LDEwLjI1MSw2LjcxMywxMC4yNTEsNi45ODl6IE0xNC43NzEsMTQuODU3Yy0wLjI3MywwLjIyNi0wLjY4NSwwLjE3OS0wLjkxOC0wLjEwNGwtMi44NTQtMy4zMzINCgljLTAuOTExLDAuNjY5LTIuMDMxLDEuMDY4LTMuMjQ3LDEuMDY4Yy0zLjAzNywwLTUuNS0yLjQ2My01LjUtNS41czIuNDYzLTUuNSw1LjUtNS41czUuNSwyLjQ2Myw1LjUsNS41DQoJYzAsMS4zNTctMC40OTQsMi41OTgtMS4zMSwzLjU1OGwyLjkwMSwzLjM4N0MxNS4wNzcsMTQuMjE4LDE1LjA0NiwxNC42MzIsMTQuNzcxLDE0Ljg1N3ogTTcuNzUxLDExLjQ4OWMyLjQ4MSwwLDQuNS0yLjAxOSw0LjUtNC41DQoJcy0yLjAxOS00LjUtNC41LTQuNXMtNC41LDIuMDE5LTQuNSw0LjVTNS4yNywxMS40ODksNy43NTEsMTEuNDg5eiIvPg0KPC9zdmc+DQo8L3N2Zz4KPHN2ZyB4PSI0NHB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjIycHgiCiAgICAgICAgICAgICAgICAgICAgb25jbGljaz0iem9vbWNsaWNrKDAuOCkiPjxyZWN0IHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjJweCIgCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PSIyMnB4IiBvbmNsaWNrPSJ6b29tY2xpY2soMC44KSIgY2xhc3M9ImJ1dHRvbiIgLz48c3ZnIHZpZXdCb3g9IjAgMCAxNiAxNiI+DQo8cGF0aCBkPSJNMTAuMjUxLDYuOTg5YzAsMC4yNzYtMC4yMjUsMC41LTAuNSwwLjVoLTRjLTAuMjc2LDAtMC41LTAuMjI0LTAuNS0wLjVsMCwwYzAtMC4yNzYsMC4yMjQtMC41LDAuNS0wLjVoNA0KCUMxMC4wMjYsNi40ODksMTAuMjUxLDYuNzEzLDEwLjI1MSw2Ljk4OUwxMC4yNTEsNi45ODl6IE0xNC43NzEsMTQuODU3Yy0wLjI3MywwLjIyNi0wLjY4NSwwLjE3OS0wLjkxOC0wLjEwNGwtMi44NTQtMy4zMzINCgljLTAuOTExLDAuNjY5LTIuMDMxLDEuMDY4LTMuMjQ3LDEuMDY4Yy0zLjAzNywwLTUuNS0yLjQ2My01LjUtNS41czIuNDYzLTUuNSw1LjUtNS41czUuNSwyLjQ2Myw1LjUsNS41DQoJYzAsMS4zNTctMC40OTQsMi41OTgtMS4zMSwzLjU1OGwyLjkwMSwzLjM4N0MxNS4wNzcsMTQuMjE4LDE1LjA0NiwxNC42MzIsMTQuNzcxLDE0Ljg1N3ogTTcuNzUxLDExLjQ4OWMyLjQ4MSwwLDQuNS0yLjAxOSw0LjUtNC41DQoJcy0yLjAxOS00LjUtNC41LTQuNXMtNC41LDIuMDE5LTQuNSw0LjVTNS4yNywxMS40ODksNy43NTEsMTEuNDg5eiIvPg0KPC9zdmc+DQo8L3N2Zz4KPHN2ZyB4PSI2NnB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjIycHgiCiAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icGFuY2xpY2soLTUwLCAwKSI+PHJlY3QgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiAKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjIycHgiIG9uY2xpY2s9InBhbmNsaWNrKC01MCwgMCkiIGNsYXNzPSJidXR0b24iIC8+PHN2ZyB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KPHBhdGggZD0iTTYuMjQ5LDEyLjc1Yy0wLjE5MSwwLTAuMzg0LTAuMDcyLTAuNTI5LTAuMjE5Yy0wLjI5NC0wLjI5NS0wLjI5NC0wLjc3LDAtMS4wNjJMOS4xODgsOEw1LjcyLDQuNTMxDQoJYy0wLjI5NC0wLjI5My0wLjI5NC0wLjc2OCwwLTEuMDYyYzAuMjkzLTAuMjkzLDAuNzY4LTAuMjkzLDEuMDYxLDBsNCw0YzAuMjkzLDAuMjkzLDAuMjkzLDAuNzY4LDAsMS4wNjJsLTQsNA0KCUM2LjYzMywxMi42NzgsNi40NCwxMi43NSw2LjI0OSwxMi43NXoiLz4NCjwvc3ZnPg0KPC9zdmc+Cjwvc3ZnPgo8cmVjdCB4PSIyMCIgeT0iMTA1IiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC0wIiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDApIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+Cjx0ZXh0IHg9IjY0IiB5PSIxMzAiIGNsYXNzPSJzdGF0ZW1hcC1sZWdlbmRsYWJlbCBzYW5zc2VyaWYiPnN0YWJsZS1yZWxlYXNlPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMTQwIiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC0xIiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDEpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMjU1KSIgLz4KPHRleHQgeD0iNjQiIHk9IjE2NSIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZGxhYmVsIHNhbnNzZXJpZiI+Ym91bmNpbmctcmVsLXRvLXByZTwvdGV4dD4KPHJlY3QgeD0iMjAiIHk9IjE3NSIgd2lkdGg9Ijg4IiBoZWlnaHQ9IjE1IiBpZD0ic3RhdGVtYXAtbGVnZW5kLTAtMiIgb25jbGljaz0ibGVnZW5kY2xpY2soZXZ0LCAwLCAyKSIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZCIgc3R5bGU9ImZpbGw6cmdiKDE2NSwgNDIsIDQyKSIgLz4KPHRleHQgeD0iNjQiIHk9IjIwMCIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZGxhYmVsIHNhbnNzZXJpZiI+Ym91bmNpbmctcmVsLXRvLXJlbDwvdGV4dD4KPHJlY3QgeD0iMjAiIHk9IjIxMCIgd2lkdGg9Ijg4IiBoZWlnaHQ9IjE1IiBpZD0ic3RhdGVtYXAtbGVnZW5kLTAtMyIgb25jbGljaz0ibGVnZW5kY2xpY2soZXZ0LCAwLCAzKSIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZCIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8dGV4dCB4PSI2NCIgeT0iMjM1IiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kbGFiZWwgc2Fuc3NlcmlmIj5lbWl0LXJlbGVhc2U8L3RleHQ+CjxyZWN0IHg9IjIwIiB5PSIyNDUiIHdpZHRoPSI4OCIgaGVpZ2h0PSIxNSIgaWQ9InN0YXRlbWFwLWxlZ2VuZC0wLTQiIG9uY2xpY2s9ImxlZ2VuZGNsaWNrKGV2dCwgMCwgNCkiIGNsYXNzPSJzdGF0ZW1hcC1sZWdlbmQiIHN0eWxlPSJmaWxsOnJnYigxMjgsIDEyOCwgMTI4KSIgLz4KPHRleHQgeD0iNjQiIHk9IjI3MCIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZGxhYmVsIHNhbnNzZXJpZiI+c3RhYmxlLXByZXNzPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMjgwIiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC01IiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDUpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDApIiAvPgo8dGV4dCB4PSI2NCIgeT0iMzA1IiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kbGFiZWwgc2Fuc3NlcmlmIj5ib3VuY2luZy1wcmUtdG8tcHJlPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMzE1IiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC02IiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDYpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8dGV4dCB4PSI2NCIgeT0iMzQwIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kbGFiZWwgc2Fuc3NlcmlmIj5ib3VuY2luZy1wcmUtdG8tcmVsPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMzUwIiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC03IiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDcpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMCkiIC8+Cjx0ZXh0IHg9IjY0IiB5PSIzNzUiIGNsYXNzPSJzdGF0ZW1hcC1sZWdlbmRsYWJlbCBzYW5zc2VyaWYiPmVtaXQtcHJlc3M8L3RleHQ+CjxnIGlkPSJzdGF0ZW1hcC10YWdib3giPjwvZz4KPGcgaWQ9InN0YXRlbWFwLXRhZ2JveC1zZWxlY3QiPjwvZz4KPC9zdmc+Cg==" /></p>
<p>The end of that key press looks a bit funky, I think. Just to be sure, let's
take a closer look.
<br />
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CiAgICAgICAgICAgIDwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAgICAgICAgICAgICAgICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgogICAgICAgICAgICA8c3ZnIHdpZHRoPSIxMjUwIiBoZWlnaHQ9IjM4NSIKICAgICAgICAgICAgICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgICAgICAgICAgICAgIHZlcnNpb249IjEuMSIKICAgICAgICAgICAgICAgIG9ubG9hZD0iaW5pdChldnQpIj4KPGRlZnM+CjxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vZWNtYXNjcmlwdCI+PCFbQ0RBVEFbCnZhciBnbG9iYWxzID0gewogICJzdHJpcEhlaWdodCI6IDEwLAogICJsZWdlbmRXaWR0aCI6IDEzOCwKICAidGFnV2lkdGgiOiAyNTAsCiAgInN0cmlwV2lkdGgiOiA4NjIsCiAgImJhY2tncm91bmQiOiAiI2YwZjBmMCIsCiAgInNvcnRieSI6IG51bGwsCiAgInN0YWNrc29ydGJ5IjogbnVsbCwKICAiYmVnaW4iOiA1NDQ4NTI5OTk5OTksCiAgImVuZCI6IDU0NDg5MDc5OTk5OSwKICAiZW50aXR5UHJlZml4IjogInN0YXRlbWFwLWVudGl0eS0iLAogICJwaXhlbEhlaWdodCI6IDMwMCwKICAicGl4ZWxXaWR0aCI6IDg2MiwKICAidG90YWxIZWlnaHQiOiAzODUsCiAgInRpbWVXaWR0aCI6IDM3ODAwMDAwLAogICJsbWFyZ2luIjogMTM4LAogICJ0bWFyZ2luIjogNjAsCiAgInNtYXJnaW4iOiAxMCwKICAic3RhdGVzIjogWwogICAgewogICAgICAibmFtZSI6ICJzdGFibGUtcmVsZWFzZSIsCiAgICAgICJ2YWx1ZSI6IDAsCiAgICAgICJjb2xvciI6ICJ3aGl0ZSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXJlbC10by1wcmUiLAogICAgICAidmFsdWUiOiAxLAogICAgICAiY29sb3IiOiAiYmx1ZSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXJlbC10by1yZWwiLAogICAgICAidmFsdWUiOiAyLAogICAgICAiY29sb3IiOiAiYnJvd24iCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJlbWl0LXJlbGVhc2UiLAogICAgICAidmFsdWUiOiAzLAogICAgICAiY29sb3IiOiAid2hpdGUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJzdGFibGUtcHJlc3MiLAogICAgICAidmFsdWUiOiA0LAogICAgICAiY29sb3IiOiAiZ3JleSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXByZS10by1wcmUiLAogICAgICAidmFsdWUiOiA1LAogICAgICAiY29sb3IiOiAieWVsbG93IgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiYm91bmNpbmctcHJlLXRvLXJlbCIsCiAgICAgICJ2YWx1ZSI6IDYsCiAgICAgICJjb2xvciI6ICJvcmFuZ2UiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJlbWl0LXByZXNzIiwKICAgICAgInZhbHVlIjogNywKICAgICAgImNvbG9yIjogImJsYWNrIgogICAgfQogIF0sCiAgInN0YXJ0IjogWwogICAgMCwKICAgIDE4MzU2NDgyNzIwMDAwMAogIF0sCiAgImVudGl0eUtpbmQiOiAiRW50aXR5IiwKfQovKgogKiBDb3B5cmlnaHQgMjAxOCwgSm95ZW50LCBJbmMuCiAqLwoKLyoKICogVGhpcyBmaWxlIGlzIGRyb3BwZWQgaW50byB0aGUgZ2VuZXJhdGVkIFNWRyAtLSBhbmQgaWYgeW91J3JlIGxvb2tpbmcgYXQKICogdGhlIGdlbmVyYXRlZCBTVkcgYW5kIHdvbmRlcmluZyB3aGVyZSB0aGlzIGNvbWVzIGZyb20sIGxvb2sgZm9yCiAqIHN0YXRlbWFwLXN2Zy5qcyBpbiBzdGF0ZW1hcCdzIHNyYyBkaXJlY3RvcnkuCiAqLwoKdmFyIGdfdHJhbnNNYXRyaXggPSBbMSwgMCwgMCwgMSwgMCwgMF07CQkvKiB0cmFuc2Zvcm0gb2Ygc3RhdGVtYXAgKi8KdmFyIGdfc3ZnRG9jOwkJCQkJLyogb3VyIFNWRyBkb2N1bWVudCAqLwp2YXIgZ19vZmZzZXQ7CQkJCQkvKiB4IG9mZnNldCBvZiBzdGF0ZW1hcCAqLwp2YXIgZ190aW1lbGFiZWw7CQkJCS8qIGxhYmVsIGZvciB0aW1lIHNwYW5uZWQgKi8KdmFyIGdfdGltZWJhcjsJCQkJCS8qIHRpbWViYXIsIGlmIGFueSAqLwp2YXIgZ19zdGF0ZWJhcjsJCQkJCS8qIHN0YXRlYmFyLCBpZiBhbnkgKi8KdmFyIGdfaGVpZ2h0OwkJCQkJLyogcGl4ZWwgaGVpZ2h0IG9mIHN0YXRlbWFwICovCnZhciBnX3dpZHRoOwkJCQkJLyogcGl4ZWwgd2lkdGggb2Ygc3RhdGVtYXAgKi8KdmFyIGdfc3RhdGVzZWw7CQkJCQkvKiBzdGF0ZSBzZWxlY3Rpb24sIGlmIGFueSAqLwp2YXIgZ190YWdzZWw7CQkJCQkvKiB0YWcgc2VsZWN0aW9uLCBpZiBhbnkgKi8KdmFyIGdfdGFndmFsc2VsOwkJCQkvKiB0YWcgdmFsIHNlbGVjdGlvbiwgaWYgYW55ICovCgp2YXIgZ19zdGF0ZW1hcHMgPSBbXTsJCQkJLyogYXJyYXkgb2Ygc3RhdGVtYXBzICovCgp2YXIgdGltZXVuaXRzID0gZnVuY3Rpb24gKHRpbWV2YWwpCnsKCXZhciBpLCByZW07Cgl2YXIgc3VmZml4ZXMgPSBbICducycsICfOvHMnLCAnbXMnLCAncycgXTsKCglpZiAodGltZXZhbCA9PT0gMCkKCQlyZXR1cm4gKCcwJyk7CgoJZm9yIChpID0gMDsgKHRpbWV2YWwgPiAxMDAwIHx8IHRpbWV2YWwgPCAtMTAwMCkgJiYKCSAgICBpIDwgc3VmZml4ZXMubGVuZ3RoIC0gMTsgaSsrKQoJCXRpbWV2YWwgLz0gMTAwMDsKCglyZW0gPSBNYXRoLmZsb29yKCh0aW1ldmFsIC0gTWF0aC5mbG9vcih0aW1ldmFsKSkgKiAxMDAwKTsKCglyZXR1cm4gKE1hdGguZmxvb3IodGltZXZhbCkgKyAnLicgKwoJICAgIChyZW0gPCAxMDAgPyAnMCcgOiAnJykgKyAocmVtIDwgMTAgPyAnMCcgOiAnJykgKyByZW0gKwoJICAgIHN1ZmZpeGVzW2ldKTsKfTsKCnZhciB0aW1lRnJvbU1hcFggPSBmdW5jdGlvbiAobWFwWCkKewoJdmFyIGJhc2UsIG9mZnM7Cgl2YXIgdGltZVdpZHRoID0gZ2xvYmFscy50aW1lV2lkdGg7CgoJLyoKCSAqIE91ciBiYXNlIChpbiBuYW5vc2Vjb25kcykgaXMgb3VyIFggb2Zmc2V0IGluIHRoZSB0cmFuc2Zvcm1hdGlvbgoJICogbWF0cml4IGFzIGEgcmF0aW8gb2Ygb3VyIHRvdGFsIChzY2FsZWQpIHdpZHRoLCB0aW1lcyBvdXIgdGltZVdpZHRoLgoJICovCgliYXNlID0gKC1nX3RyYW5zTWF0cml4WzRdIC8gKGdfdHJhbnNNYXRyaXhbMF0gKiBnX3dpZHRoKSkgKiB0aW1lV2lkdGg7CgoJLyoKCSAqIE91ciBvZmZzZXQgKGluIG5hbm9zZWNvbmRzKSBpcyB0aGUgWCBvZmZzZXQgd2l0aGluIHRoZSBzdGF0ZW1hcAoJICogYXMgYSByYXRpbyBvZiB0aGUgc3RhdGVtYXAgd2lkdGgsIHRpbWVzIHRoZSBudW1iZXIgb2YgbmFub3NlY29uZHMKCSAqIHZpc2libGUgaW4gdGhlIHN0YXRlbWFwICh3aGljaCBpdHNlbGYgaXMgdGhlIHRpbWVXaWR0aCBkaXZpZGVkIGJ5CgkgKiBvdXIgc2NhbGluZyBmYWN0b3IpLgoJICovCglvZmZzID0gKG1hcFggLyBnX3dpZHRoKSAqICh0aW1lV2lkdGggLyBnX3RyYW5zTWF0cml4WzBdKTsKCglyZXR1cm4gKGJhc2UgKyBvZmZzKTsKfTsKCnZhciB0aW1lVG9NYXBYID0gZnVuY3Rpb24gKHRpbWUpCnsKCS8qCgkgKiBXZSB0YWtlIHRoZSByYXRpbyBvZiB0aGUgdGltZSBvZiB0aGUgdGltZWJhciBvZiB0aGUgdG90YWwgdGltZQoJICogd2lkdGggdGltZXMgdGhlIHdpZHRoIHRpbWVzIHRoZSBzY2FsZSwgYW5kIHRoZW4gYWRkIHRoYXQgdG8gdGhlCgkgKiBYIG9mZnNldCBpbiB0aGUgdHJhbnNmb3JtYXRpb24gbWF0cml4LgoJICovCglyZXR1cm4gKCgodGltZSAvIGdsb2JhbHMudGltZVdpZHRoKSAqIGdfd2lkdGggKgoJICAgIGdfdHJhbnNNYXRyaXhbMF0pICsgZ190cmFuc01hdHJpeFs0XSk7Cn07Cgp2YXIgdGltZVRvVGV4dCA9IGZ1bmN0aW9uICh0aW1lKQp7Cgl2YXIgdDsKCglpZiAoZ190cmFuc01hdHJpeFswXSA9PT0gMSAmJiBnbG9iYWxzLmJlZ2luID09PSAwKSB7CgkJdCA9ICdvZmZzZXQgPSAnICsgdGltZXVuaXRzKHRpbWUpOwoJfSBlbHNlIHsKCQl0ID0gJ29mZnNldCA9ICcgKyB0aW1ldW5pdHModGltZSkgKyAnLCAnICsKCQkgICAgdGltZXVuaXRzKHRpbWUgKyBnbG9iYWxzLmJlZ2luKSArICcgb3ZlcmFsbCc7Cgl9CgoJaWYgKGdsb2JhbHMuc3RhcnQpIHsKCQl2YXIgcyA9IGdsb2JhbHMuc3RhcnRbMF0gKwoJCSAgICAodGltZSArIGdsb2JhbHMuc3RhcnRbMV0pIC8gMTAwMDAwMDAwMDsKCgkJdCArPSAnIChFcG9jaCArICcgKyBNYXRoLmZsb29yKHMpICsgJ3MpJzsKCX0KCglyZXR1cm4gKHQpOwp9OwoKdmFyIHRpbWVTZXRTcGFuTGFiZWwgPSBmdW5jdGlvbiAoKQp7Cgl2YXIgdCA9ICdzcGFuID0gJyArIHRpbWV1bml0cyhnbG9iYWxzLnRpbWVXaWR0aCAvIGdfdHJhbnNNYXRyaXhbMF0pOwoKCWlmIChnX3RyYW5zTWF0cml4WzBdICE9IDEgfHwgZ2xvYmFscy5iZWdpbiAhPT0gMCkKCQl0ICs9ICc7ICcgKyB0aW1lVG9UZXh0KHRpbWVGcm9tTWFwWCgwKSk7CgoJZ190aW1lbGFiZWwudGV4dENvbnRlbnQgPSB0Owp9OwoKdmFyIGluaXRTdGF0ZW1hcCA9IGZ1bmN0aW9uIChzdGF0ZW1hcCwgZWxlbSwgcG9zaXRpb24pCnsKCXZhciBpLCBoaWdobGlnaHQ7Cgl2YXIgcHJlZml4ID0gZ2xvYmFscy5lbnRpdHlQcmVmaXggKyBzdGF0ZW1hcCArICctJzsKCglnX3N0YXRlbWFwc1tzdGF0ZW1hcF0uZWxlbSA9IGVsZW07CglnX3N0YXRlbWFwc1tzdGF0ZW1hcF0ucG9zaXRpb24gPSBwb3NpdGlvbjsKCWdfc3RhdGVtYXBzW3N0YXRlbWFwXS5uZW50aXRpZXMgPSAwOwoKCS8qCgkgKiBJdGVyYXRlIG92ZXIgdGhpcyBzdGF0ZW1hcCdzIGNoaWxkcmVuLCBsb29raW5nIGZvciBlbnRpdGllcy4KCSAqLwoJZm9yIChpID0gMDsgaSA8IGVsZW0uY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewoJCXZhciBpZCA9IGVsZW0uY2hpbGROb2Rlc1tpXS5pZCwgZW50aXR5OwoKCQlpZiAoIWlkIHx8IGlkLmluZGV4T2YocHJlZml4KSAhPT0gMCkKCQkJY29udGludWU7CgoJCWVudGl0eSA9IHsKCQkJbmFtZTogaWQuc3Vic3RyKHByZWZpeC5sZW5ndGgpLAoJCQllbGVtZW50OiBlbGVtLmNoaWxkTm9kZXNbaV0sCgkJCXBvc2l0aW9uOiBwb3NpdGlvbisrLAoJCQlzdGF0ZW1hcDogc3RhdGVtYXAKCQl9OwoKCQllbnRpdHkuZGVzY3JpcHRpb24gPQoJCSAgICBnX3N0YXRlbWFwc1tzdGF0ZW1hcF0uZW50aXRpZXNbZW50aXR5Lm5hbWVdLmRlc2NyaXB0aW9uOwoKCQlnX2VudGl0aWVzW2lkXSA9IGVudGl0eTsKCQlnX3N0YXRlbWFwc1tzdGF0ZW1hcF0ubmVudGl0aWVzKys7Cgl9CgoJLyoKCSAqIERldGVybWluZSB0aGUgbGVnZW5kIHRoYXQgdGhpcyBzdGF0ZW1hcCBpcyB1c2luZy4KCSAqLwoJZm9yIChpID0gc3RhdGVtYXA7IGkgPj0gMDsgaS0tKSB7CgkJaWYgKGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC1sZWdlbmQtJyArIGkgKyAnLTAnKSkgewoJCQlnX3N0YXRlbWFwc1tzdGF0ZW1hcF0ubGVnZW5kID0gaTsKCQkJYnJlYWs7CgkJfQoJfQoKCWNvbnNvbGUuYXNzZXJ0KGkgPj0gMCk7CgoJLyoKCSAqIER5bmFtaWNhbGx5IGNoYW5nZSB0aGUgc3R5bGluZyBvZiB0aGUgaGlnaGxpZ2h0IHJlY3RhbmdsZS4KCSAqLwoJaGlnaGxpZ2h0ID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLScgKwoJICAgIHN0YXRlbWFwICsgJy1oaWdobGlnaHQnKTsKCWhpZ2hsaWdodC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC1oaWdobGlnaHQnKTsKCglyZXR1cm4gKHBvc2l0aW9uKTsKfTsKCnZhciBpbml0ID0gZnVuY3Rpb24gKGV2dCkKewoJdmFyIGkgPSAwLCBwb3NpdGlvbiA9IDAsIHN0YXRlbWFwOwoKCWdfc3ZnRG9jID0gZXZ0LnRhcmdldC5vd25lckRvY3VtZW50OwoJZ19lbnRpdGllcyA9IFtdOwoKCXdoaWxlICgoc3RhdGVtYXAgPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZCgnc3RhdGVtYXAtJyArIGkpKSAhPSBudWxsKQoJCXBvc2l0aW9uID0gaW5pdFN0YXRlbWFwKGkrKywgc3RhdGVtYXAsIHBvc2l0aW9uKTsKCglnX2hlaWdodCA9IGdsb2JhbHMucGl4ZWxIZWlnaHQ7CglnX3dpZHRoID0gZ2xvYmFscy5waXhlbFdpZHRoOwoKCWdfb2Zmc2V0ID0gZXZ0LnRhcmdldC5nZXRBdHRyaWJ1dGVOUyhudWxsLCAnd2lkdGgnKSAtCgkgICAgKGdfd2lkdGggKyBnbG9iYWxzLnRhZ1dpZHRoKTsKCglnX3RpbWVsYWJlbCA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC10aW1lbGFiZWwnKTsKCXRpbWVTZXRTcGFuTGFiZWwoKTsKCglnX3RpbWViYXIgPSB1bmRlZmluZWQ7Cn07Cgp2YXIgZW50aXR5Rm9yRWFjaERhdHVtID0gZnVuY3Rpb24gKGVudGl0eSwgdGltZSwgZXRpbWUsIGZ1bmMpCnsKCXZhciBkYXRhID0gZ19zdGF0ZW1hcHNbZW50aXR5LnN0YXRlbWFwXS5kYXRhW2VudGl0eS5uYW1lXTsKCgl2YXIgaWR4LCBsZW5ndGggPSBkYXRhLmxlbmd0aDsKCXZhciBmbG9vciA9IDA7Cgl2YXIgY2VpbCA9IGxlbmd0aDsKCXZhciBkYXR1bSwgdCwgc3BhbjsKCglpZiAobGVuZ3RoID09PSAwIHx8IChkYXRhWzBdLnQgPiB0aW1lICYmICFldGltZSkpCgkJcmV0dXJuOwoKCWlmIChkYXRhWzBdLnQgPiB0aW1lKSB7CgkJaWR4ID0gMDsKCX0gZWxzZSB7CgkJLyoKCQkgKiBCaW5hcnkgc2VhcmNoIG91ciBkYXRhIHVudGlsIHdlIGZpbmQgYSBkYXR1bSB0aGF0IGNvbnRhaW5zCgkJICogdGhlIHN0YXJ0IG9mIG91ciB0aW1lIHJhbmdlLgoJCSAqLwoJCWZvciAoOzspIHsKCQkJaWR4ID0gZmxvb3IgKyBNYXRoLmZsb29yKChjZWlsIC0gZmxvb3IpIC8gMik7CgoJCQlpZiAoZGF0YVtpZHhdLnQgPiB0aW1lKSB7CgkJCQljZWlsID0gaWR4OwoJCQkJY29udGludWU7CgkJCX0KCgkJCWlmIChpZHggKyAxID09IGxlbmd0aCB8fCBkYXRhW2lkeCArIDFdLnQgPiB0aW1lKQoJCQkJYnJlYWs7CgoJCQlmbG9vciA9IGlkeDsKCQl9Cgl9CgoJLyoKCSAqIElmIHdlIGRvbid0IGhhdmUgYSBzcGVjaWZpZWQgZXRpbWUsIHdlIGhhdmUgZm91bmQgdGhlIGRhdHVtIHRoYXQKCSAqIGNvbnRhaW5zIHRoZSB0aW1lOyBqdXN0IGNhbGwgb3VyIGZ1bmN0aW9uIGFuZCByZXR1cm4uCgkgKi8KCWlmICghZXRpbWUpIHsKCQlmdW5jKGRhdGFbaWR4XSwgaWR4LCAxKTsKCQlyZXR1cm47Cgl9CgoJLyoKCSAqIE5vdyB3ZSdyZSBnb2luZyB0byBpdGVyYXRlIGZvcndhcmQsIGNhbGxpbmcgb3VyIGZ1bmN0aW9uIHVudGlsIHdlCgkgKiBnZXQgcGFzdCBvdXIgc3BlY2lmaWVkIGV0aW1lLgoJICovCglmb3IgKDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewoJCWRhdHVtID0gZGF0YVtpZHhdOwoKCQlpZiAoZGF0dW0udCA+IGV0aW1lKQoJCQlyZXR1cm47CgoJCWlmICgodCA9IGRhdHVtLnQpIDwgdGltZSkKCQkJdCA9IHRpbWU7CgoJCWlmIChpZHggKyAxID09IGxlbmd0aCB8fCBkYXRhW2lkeCArIDFdLnQgPiBldGltZSkgewoJCQkvKgoJCQkgKiBUaGlzIGRhdHVtIGNvbnRhaW5zIHRoZSBlbmQgb2YgdGhlIHJhbmdlOyBvdXIgc3BhbgoJCQkgKiBpcyBvdXIgZXRpbWUgbWludXMgdGhpcyBkYXR1bSdzIHN0YXJ0IHRpbWUgKG9yIG91cgoJCQkgKiBzcGVjaWZpZWQgdGltZSwgd2hpY2hldmVyIGlzIGdyZWF0ZXIpLgoJCQkgKi8KCQkJc3BhbiA9IGV0aW1lIC0gdDsKCQl9IGVsc2UgewoJCQkvKgoJCQkgKiBUaGUgZW5kIG9mIHRoZSBkYXR1bSBpcyBjb3ZlcmVkIGJ5IHRoZSByYW5nZTsgb3VyCgkJCSAqIHNwYW4gaXMgdGhlIHRpbWUgd2lkdGggb2YgdGhlIGRhdHVtLgoJCQkgKi8KCQkJc3BhbiA9IGRhdGFbaWR4ICsgMV0udCAtIHQ7CgkJfQoKCQlmdW5jKGRhdHVtLCBpZHgsIHNwYW4pOwoJfQp9OwoKdmFyIGVudGl0eURhdHVtID0gZnVuY3Rpb24gKGVudGl0eSwgaWR4KQp7Cgl2YXIgZGF0YSA9IGdfc3RhdGVtYXBzW2VudGl0eS5zdGF0ZW1hcF0uZGF0YVtlbnRpdHkubmFtZV07Cgl2YXIgZGF0dW0gPSBkYXRhW2lkeF07Cgl2YXIgcnZhbCA9IHsgdGltZTogZGF0dW0udCB9OwoKCWlmIChkYXR1bS5zIGluc3RhbmNlb2YgT2JqZWN0KSB7CgkJcnZhbC5zdGF0ZXMgPSBkYXR1bS5zOwoJfSBlbHNlIHsKCQlydmFsLnN0YXRlID0gZGF0dW0uczsKCX0KCglpZiAoaWR4ICsgMSA8IGRhdGEubGVuZ3RoKSB7CgkJcnZhbC5ldGltZSA9IGRhdGFbaWR4ICsgMV0udDsKCX0gZWxzZSB7CgkJcnZhbC5ldGltZSA9IGdsb2JhbHMudGltZVdpZHRoICsgZ2xvYmFscy5iZWdpbjsKCX0KCglyZXR1cm4gKHJ2YWwpOwp9OwoKdmFyIGVudGl0eUJyZWFrZG93biA9IGZ1bmN0aW9uIChlbnRpdHksIHRpbWUsIGV0aW1lKQp7Cgl2YXIgZGF0YSA9IGdfc3RhdGVtYXBzW2VudGl0eS5zdGF0ZW1hcF0uZGF0YVtlbnRpdHkubmFtZV07Cgl2YXIgcnZhbCA9IHt9OwoKCXZhciBpZHgsIGxlbmd0aCA9IGRhdGEubGVuZ3RoOwoJdmFyIGZsb29yID0gMDsKCXZhciBjZWlsID0gbGVuZ3RoOwoJdmFyIGRhdHVtLCB0LCBzcGFuLCBzdGF0ZTsKCgl0aW1lICs9IGdfc3RhdGVtYXBzW2VudGl0eS5zdGF0ZW1hcF0ub2Zmc2V0OwoKCWlmIChsZW5ndGggPT09IDAgfHwgZGF0YVswXS50ID4gdGltZSkKCQlyZXR1cm4gKHt9KTsKCgkvKgoJICogQmluYXJ5IHNlYXJjaCBvdXIgZGF0YSB1bnRpbCB3ZSBmaW5kIGEgZGF0dW0gdGhhdCBjb250YWlucyB0aGUKCSAqIHNwZWNpZmllZCB0aW1lLgoJICovCglmb3IgKDs7KSB7CgkJaWR4ID0gZmxvb3IgKyBNYXRoLmZsb29yKChjZWlsIC0gZmxvb3IpIC8gMik7CgoJCWlmIChkYXRhW2lkeF0udCA+IHRpbWUpIHsKCQkJY2VpbCA9IGlkeDsKCQkJY29udGludWU7CgkJfQoKCQlpZiAoaWR4ICsgMSA9PSBsZW5ndGggfHwgZGF0YVtpZHggKyAxXS50ID4gdGltZSkKCQkJYnJlYWs7CgoJCWZsb29yID0gaWR4OwoJfQoKCS8qCgkgKiBJZiB3ZSBkb24ndCBoYXZlIGEgc3BlY2lmaWVkIGV0aW1lLCB3ZSB3YW50IHRvIGp1c3QgcmV0dXJuIHRoZSBzdGF0ZQoJICogYnJlYWtkb3duIGF0IHRoZSBzcGVjaWZpZWQgdGltZS4KCSAqLwoJaWYgKCFldGltZSkgewoJCWRhdHVtID0gZGF0YVtpZHhdOwoKCQlpZiAoZGF0dW0ucyBpbnN0YW5jZW9mIE9iamVjdCkKCQkJcmV0dXJuIChkYXR1bS5zKTsKCgkJcnZhbFtkYXR1bS5zXSA9IDEuMDsKCgkJcmV0dXJuIChydmFsKTsKCX0KCgkvKgoJICogTm93IHdlJ3JlIGdvaW5nIHRvIGl0ZXJhdGUgZm9yd2FyZCB1bnRpbCB3ZSBnZXQgcGFzdCBvdXIgc3BlY2lmaWVkCgkgKiBldGltZS4KCSAqLwoJZm9yICg7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKCQlkYXR1bSA9IGRhdGFbaWR4XTsKCgkJaWYgKGRhdHVtLnQgPiBldGltZSkKCQkJYnJlYWs7CgoJCWlmICgodCA9IGRhdHVtLnQpIDwgdGltZSkKCQkJdCA9IHRpbWU7CgoJCWlmIChpZHggKyAxID09IGxlbmd0aCB8fCBkYXRhW2lkeCArIDFdLnQgPiBldGltZSkgewoJCQkvKgoJCQkgKiBUaGlzIGRhdHVtIGNvbnRhaW5zIHRoZSBlbmQgb2YgdGhlIHJhbmdlOyBvdXIgc3BhbgoJCQkgKiBpcyBvdXIgZXRpbWUgbWludXMgdGhpcyBkYXR1bSdzIHN0YXJ0IHRpbWUgKG9yIG91cgoJCQkgKiBzcGVjaWZpZWQgdGltZSwgd2hpY2hldmVyIGlzIGdyZWF0ZXIpLgoJCQkgKi8KCQkJc3BhbiA9IGV0aW1lIC0gdDsKCQl9IGVsc2UgewoJCQkvKgoJCQkgKiBUaGUgZW5kIG9mIHRoZSBkYXR1bSBpcyBjb3ZlcmVkIGJ5IHRoZSByYW5nZTsgb3VyCgkJCSAqIHNwYW4gaXMgdGhlIHRpbWUgd2lkdGggb2YgdGhlIGRhdHVtLgoJCQkgKi8KCQkJc3BhbiA9IGRhdGFbaWR4ICsgMV0udCAtIHQ7CgkJfQoKCQkvKgoJCSAqIEV4cHJlc3Mgb3VyIHNwYW4gYXMgYSByYXRpbyBvZiB0aGUgb3ZlcmFsbCB0aW1lLgoJCSAqLwoJCXNwYW4gLz0gKGV0aW1lIC0gdGltZSk7CgoJCWlmIChkYXR1bS5zIGluc3RhbmNlb2YgT2JqZWN0KSB7CgkJCWZvciAoc3RhdGUgaW4gZGF0dW0ucykgewoJCQkJaWYgKCFydmFsLmhhc093blByb3BlcnR5KHN0YXRlKSkKCQkJCQlydmFsW3N0YXRlXSA9IDA7CgoJCQkJcnZhbFtzdGF0ZV0gKz0gKGRhdHVtW3N0YXRlXSAqIHNwYW4pOwoJCQl9CgkJfSBlbHNlIHsKCQkJc3RhdGUgPSBkYXR1bS5zOwoKCQkJaWYgKCFydmFsLmhhc093blByb3BlcnR5KHN0YXRlKSkKCQkJCXJ2YWxbc3RhdGVdID0gMDsKCgkJCXJ2YWxbc3RhdGVdICs9IHNwYW47CgkJfQoJfQoKCXJldHVybiAocnZhbCk7Cn07Cgp2YXIgc3RhdGViYXJDcmVhdGVCYXIgPSBmdW5jdGlvbiAoc3RhdGViYXIsIHgxLCB5MSwgeDIsIHkyKQp7Cgl2YXIgcGFyZW50ID0gc3RhdGViYXIucGFyZW50OwoKCXZhciBiYXIgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMocGFyZW50Lm5hbWVzcGFjZVVSSSwgJ2xpbmUnKTsKCWJhci5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC1zdGF0ZWJhcicpOwoJYmFyLngxLmJhc2VWYWwudmFsdWUgPSB4MTsKCWJhci55MS5iYXNlVmFsLnZhbHVlID0geTE7CgliYXIueDIuYmFzZVZhbC52YWx1ZSA9IHgyOwoJYmFyLnkyLmJhc2VWYWwudmFsdWUgPSB5MjsKCXBhcmVudC5hcHBlbmRDaGlsZChiYXIpOwoJc3RhdGViYXIuYmFycy5wdXNoKGJhcik7Cn07Cgp2YXIgc3RhdGViYXJDcmVhdGUgPSBmdW5jdGlvbiAoZWxlbSwgaWR4KQp7Cgl2YXIgcGFyZW50ID0gZ19zdGF0ZW1hcHNbMF0uZWxlbS5wYXJlbnROb2RlLnBhcmVudE5vZGU7Cgl2YXIgc3RhdGViYXIgPSB7IHBhcmVudDogcGFyZW50LCBoaWRkZW46IGZhbHNlIH07Cgl2YXIgZW50aXR5ID0gZ19lbnRpdGllc1tlbGVtLnBhcmVudE5vZGUuaWRdOwoJdmFyIHN0YXRlbWFwID0gZ19zdGF0ZW1hcHNbZW50aXR5LnN0YXRlbWFwXTsKCXZhciBzdGF0ZXMgPSBzdGF0ZW1hcC5zdGF0ZXM7Cgl2YXIgZGF0dW0gPSBlbnRpdHlEYXR1bShlbnRpdHksIGlkeCk7Cgl2YXIgcG9zID0gKGVudGl0eS5wb3NpdGlvbiAqIGdsb2JhbHMuc3RyaXBIZWlnaHQpICsKCSAgICAoZW50aXR5LnN0YXRlbWFwICogZ2xvYmFscy5zbWFyZ2luKTsKCXZhciB4ID0gZ2xvYmFscy5sbWFyZ2luIC0gMjsKCXZhciB5ID0gZ2xvYmFscy50bWFyZ2luICsgcG9zOwoJdmFyIGVsYm93ID0geyB4OiA4LCB5OiAxMCB9OwoJdmFyIG51ZGdlID0geyB4OiAzLCB5OiAyIH07Cgl2YXIgZGlyZWN0aW9uID0gMSwgYW5jaG9yOwoJdmFyIGFuY2hvcnMgPSBbICdzdGFydCcsICdlbmQnIF07Cgl2YXIgdGV4dDsKCglpZiAocG9zIDwgKGdsb2JhbHMudG90YWxIZWlnaHQgLSBnbG9iYWxzLnRtYXJnaW4pIC8gMikgewoJCWRpcmVjdGlvbiA9IDE7CgkJYW5jaG9yID0gMTsKCX0gZWxzZSB7CgkJZGlyZWN0aW9uID0gLTE7CgkJYW5jaG9yID0gMDsKCX0KCglzdGF0ZWJhci5iYXJzID0gW107CgoJLyoKCSAqIFdlIGhhdmUgdGhyZWUgYmFycyB0byBkcmF3OiAgb3VyIGJhciB0aGF0IHJ1bnMgdGhlIGhlaWdodCBvZiB0aGUKCSAqIHN0cmlwLCBmb2xsb3dlZCBieSBvdXIgZWxib3cuCgkgKi8KCXN0YXRlYmFyQ3JlYXRlQmFyKHN0YXRlYmFyLCB4LCB5LCB4LCB5ICsgZ2xvYmFscy5zdHJpcEhlaWdodCk7CgoJeSArPSAwLjUgKiBnbG9iYWxzLnN0cmlwSGVpZ2h0OwoJc3RhdGViYXJDcmVhdGVCYXIoc3RhdGViYXIsIHggLSBlbGJvdy54LCB5LCB4LCB5KTsKCgl4IC09IGVsYm93Lng7CglzdGF0ZWJhckNyZWF0ZUJhcihzdGF0ZWJhciwgeCwgeSwgeCwgeSArIChlbGJvdy55ICogZGlyZWN0aW9uKSk7CgoJLyoKCSAqIE5vdyBjcmVhdGUgdGhlIHRleHQgYXQgdGhlIGVuZCBvZiB0aGUgZWxib3cuCgkgKi8KCXkgKz0gKGVsYm93LnkgKyBudWRnZS55KSAqIGRpcmVjdGlvbjsKCXggKz0gbnVkZ2UueDsKCXRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMocGFyZW50Lm5hbWVzcGFjZVVSSSwgJ3RleHQnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXN0YXRldGV4dCcpOwoKCXZhciB0ID0gc3RhdGVtYXAuZW50aXR5S2luZCArICcgJyArIGVudGl0eS5uYW1lOwoKCWlmIChlbnRpdHkuZGVzY3JpcHRpb24pCgkJdCArPSAnICgnICsgZW50aXR5LmRlc2NyaXB0aW9uICsgJyknOwoKCWlmIChkYXR1bS5oYXNPd25Qcm9wZXJ0eSgnc3RhdGUnKSkgewoJCXQgKz0gJywgJyArIHN0YXRlc1tkYXR1bS5zdGF0ZV0ubmFtZTsKCX0gZWxzZSB7CgkJdmFyIGksIHRvdGFsID0gMCwgbWF4ID0gMCwgbWF4c3RhdGU7CgoJCWZvciAoaSBpbiBkYXR1bS5zdGF0ZXMpIHsKCQkJdG90YWwgKz0gZGF0dW0uc3RhdGVzW2ldOwoKCQkJaWYgKGRhdHVtLnN0YXRlc1tpXSA+IG1heCkgewoJCQkJbWF4c3RhdGUgPSBpOwoJCQkJbWF4ID0gZGF0dW0uc3RhdGVzW2ldOwoJCQl9CgkJfQoKCQl0ICs9ICcsICcgKyBNYXRoLmZsb29yKChkYXR1bS5zdGF0ZXNbbWF4c3RhdGVdIC8gdG90YWwpICogMTAwKTsKCQl0ICs9ICclICcgKyBzdGF0ZXNbbWF4c3RhdGVdLm5hbWU7Cgl9CgoJdCArPSAnIGF0ICcgKyB0aW1ldW5pdHMoZGF0dW0udGltZSk7Cgl0ICs9ICcgZm9yICcgKyB0aW1ldW5pdHMoZGF0dW0uZXRpbWUgLSBkYXR1bS50aW1lKTsKCgl0ZXh0LmFwcGVuZENoaWxkKGdfc3ZnRG9jLmNyZWF0ZVRleHROb2RlKHQpKTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnLCB4KTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3knLCB5KTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3RyYW5zZm9ybScsCgkgICAgJ3JvdGF0ZSgyNzAsJyArIHggKyAnLCcgKyB5ICsgJyknKTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3RleHQtYW5jaG9yJywgYW5jaG9yc1thbmNob3JdKTsKCXRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CgkJc3RhdGViYXJSZW1vdmUoc3RhdGViYXIpOwoJCXN0YXRlc2VsVXBkYXRlKCk7Cgl9KTsKCglwYXJlbnQuYXBwZW5kQ2hpbGQodGV4dCk7CglzdGF0ZWJhci5iYXJzLnB1c2godGV4dCk7CgoJc3RhdGViYXIuZW50aXR5ID0gZW50aXR5OwoKCWlmIChnX3N0YXRlbWFwcy5sZW5ndGggPT0gMSkKCQlyZXR1cm4gKHN0YXRlYmFyKTsKCgkvKgoJICogSWYgd2UgaGF2ZSBtb3JlIHRoYW4gb25lIHN0YXRlbWFwLCB3ZSB3YW50IHRvIGFkZCBhIGJhciB0byB0aGUgcmlnaHQKCSAqIHNpZGUgdG8gaW5kaWNhdGUgd2hpY2ggc3RhdGVtYXAgdGhpcyBpcy4KCSAqLwoJdmFyIHBvcyA9IChzdGF0ZW1hcC5wb3NpdGlvbiAqIGdsb2JhbHMuc3RyaXBIZWlnaHQpICsKCSAgICAoZW50aXR5LnN0YXRlbWFwICogZ2xvYmFscy5zbWFyZ2luKTsKCgl4ID0gZ2xvYmFscy5sbWFyZ2luICsgZ193aWR0aCArIDI7Cgl5ID0gZ2xvYmFscy50bWFyZ2luICsgcG9zOwoKCXZhciBwb3MgPSAoc3RhdGVtYXAucG9zaXRpb24gKiBnbG9iYWxzLnN0cmlwSGVpZ2h0KSArCgkgICAgKGVudGl0eS5zdGF0ZW1hcCAqIGdsb2JhbHMuc21hcmdpbik7CgoJdmFyIGhlaWdodCA9IHN0YXRlbWFwLm5lbnRpdGllcyAqIGdsb2JhbHMuc3RyaXBIZWlnaHQ7CgoJc3RhdGViYXJDcmVhdGVCYXIoc3RhdGViYXIsIHgsIHksIHgsIHkgKyBoZWlnaHQpOwoKCXkgKz0gMC41ICogaGVpZ2h0OwoJc3RhdGViYXJDcmVhdGVCYXIoc3RhdGViYXIsIHggKyBlbGJvdy54LCB5LCB4LCB5KTsKCgl4ICs9IGVsYm93Lng7CglzdGF0ZWJhckNyZWF0ZUJhcihzdGF0ZWJhciwgeCwgeSwgeCwgeSArIChlbGJvdy55ICogZGlyZWN0aW9uKSk7CgoJLyoKCSAqIE5vdyBjcmVhdGUgdGhlIHRleHQgYXQgdGhlIGVuZCBvZiB0aGUgZWxib3cuCgkgKi8KCXkgKz0gKGVsYm93LnkgKyBudWRnZS55KSAqIGRpcmVjdGlvbjsKCXggLT0gbnVkZ2UueDsKCXRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMocGFyZW50Lm5hbWVzcGFjZVVSSSwgJ3RleHQnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXN0YXRldGV4dCcpOwoJdGV4dC5hcHBlbmRDaGlsZChnX3N2Z0RvYy5jcmVhdGVUZXh0Tm9kZShzdGF0ZW1hcC50aXRsZSkpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIHgpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHkpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAndHJhbnNmb3JtJywKCSAgICAncm90YXRlKDkwLCcgKyB4ICsgJywnICsgeSArICcpJyk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd0ZXh0LWFuY2hvcicsIGFuY2hvcnNbYW5jaG9yIF4gMV0pOwoKCXBhcmVudC5hcHBlbmRDaGlsZCh0ZXh0KTsKCXN0YXRlYmFyLmJhcnMucHVzaCh0ZXh0KTsKCglyZXR1cm4gKHN0YXRlYmFyKTsKfTsKCnZhciBzdGF0ZWJhclJlbW92ZSA9IGZ1bmN0aW9uIChzdGF0ZWJhcikKewoJdmFyIGk7CgoJaWYgKCFzdGF0ZWJhcikKCQlyZXR1cm47CgoJaWYgKHN0YXRlYmFyLmJhcnMpIHsKCQlmb3IgKGkgPSAwOyBpIDwgc3RhdGViYXIuYmFycy5sZW5ndGg7IGkrKykKCQkJc3RhdGViYXIucGFyZW50LnJlbW92ZUNoaWxkKHN0YXRlYmFyLmJhcnNbaV0pOwoJfQoKCXN0YXRlYmFyLmJhcnMgPSB1bmRlZmluZWQ7CglzdGF0ZWJhci5lbnRpdHkgPSB1bmRlZmluZWQ7Cn07Cgp2YXIgdGltZWJhclJlbW92ZSA9IGZ1bmN0aW9uICh0aW1lYmFyKQp7CglpZiAoIXRpbWViYXIpCgkJcmV0dXJuOwoKCXRpbWViYXJSZW1vdmVTdWJiYXIodGltZWJhcik7CgoJaWYgKHRpbWViYXIuYmFyICYmICF0aW1lYmFyLmhpZGRlbikgewoJCXRpbWViYXIucGFyZW50LnJlbW92ZUNoaWxkKHRpbWViYXIuYmFyKTsKCQl0aW1lYmFyLnBhcmVudC5yZW1vdmVDaGlsZCh0aW1lYmFyLnRleHQpOwoJfQoKCWlmICh0aW1lYmFyLmJyZWFrZG93bikgewoJCXZhciBpOwoKCQlmb3IgKGkgPSAwOyBpIDwgdGltZWJhci5icmVha2Rvd24ubGVuZ3RoOyBpKyspIHsKCQkJdmFyIGVsZW0gPSB0aW1lYmFyLmJyZWFrZG93bltpXTsKCQkJZWxlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW0pOwoJCX0KCX0KCgl0aW1lYmFyLmJhciA9IHVuZGVmaW5lZDsKCXRpbWViYXIudGV4dCA9IHVuZGVmaW5lZDsKCXRpbWViYXIuYnJlYWtkb3duID0gdW5kZWZpbmVkOwp9OwoKdmFyIHRpbWViYXJTZXRCYXJMb2NhdGlvbiA9IGZ1bmN0aW9uIChiYXIsIG1hcFgpCnsKCXZhciBhYnNYID0gbWFwWCArIGdfb2Zmc2V0OwoJdmFyIG51YmhlaWdodCA9IDE1OwoKCWJhci54MS5iYXNlVmFsLnZhbHVlID0gYWJzWDsKCWJhci55MS5iYXNlVmFsLnZhbHVlID0gZ2xvYmFscy50bWFyZ2luIC0gbnViaGVpZ2h0OwoJYmFyLngyLmJhc2VWYWwudmFsdWUgPSBhYnNYOwoJYmFyLnkyLmJhc2VWYWwudmFsdWUgPSBnbG9iYWxzLnRtYXJnaW4gKyBnX2hlaWdodDsKfTsKCnZhciB0aW1lYmFyU2V0U3ViYmFyTG9jYXRpb24gPSBmdW5jdGlvbiAoc3ViYmFyLCBtYXBYLCB0aW1lYmFyWCkKewoJdmFyIGFic1ggPSBtYXBYICsgZ19vZmZzZXQsIHg7Cgl2YXIgYmFyID0gc3ViYmFyLmJhcjsKCXZhciBzcGFuID0gc3ViYmFyLnNwYW47Cgl2YXIgdGV4dCA9IHN1YmJhci50ZXh0OwoJdmFyIG51ZGdlID0geyB4OiAwLCB5OiAxMCB9OwoKCWJhci54MS5iYXNlVmFsLnZhbHVlID0gYWJzWDsKCWJhci55MS5iYXNlVmFsLnZhbHVlID0gZ2xvYmFscy50bWFyZ2luOwoJYmFyLngyLmJhc2VWYWwudmFsdWUgPSBhYnNYOwoJYmFyLnkyLmJhc2VWYWwudmFsdWUgPSBnbG9iYWxzLnRtYXJnaW4gKyBnX2hlaWdodDsKCglzcGFuLngxLmJhc2VWYWwudmFsdWUgPSB0aW1lYmFyWCArIGdfb2Zmc2V0OwoJc3Bhbi55MS5iYXNlVmFsLnZhbHVlID0gc3ViYmFyLnk7CglzcGFuLngyLmJhc2VWYWwudmFsdWUgPSBhYnNYOwoJc3Bhbi55Mi5iYXNlVmFsLnZhbHVlID0gc3ViYmFyLnk7CgoJeCA9ICh0aW1lYmFyWCA8IG1hcFggPyB0aW1lYmFyWCA6IG1hcFgpICsKCSAgICBNYXRoLmFicyh0aW1lYmFyWCAtIG1hcFgpIC8gMjsKCgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnLCB4ICsgZ19vZmZzZXQpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHN1YmJhci55ICsgbnVkZ2UueSk7Cn07Cgp2YXIgdGltZWJhclNldFRleHRMb2NhdGlvbiA9IGZ1bmN0aW9uICh0ZXh0LCBtYXBYKQp7Cgl2YXIgYWJzWCA9IG1hcFggKyBnX29mZnNldDsKCXZhciBudWRnZSA9IHsgeDogMywgeTogNSB9OwoJdmFyIGRpcmVjdGlvbiwgYW5jaG9yOwoJdmFyIHRpbWU7CgoJLyoKCSAqIFRoZSBzaWRlIG9mIHRoZSB0aW1lYmFyIHRoYXQgd2UgYWN0dWFsbHkgcmVuZGVyIHRoZSB0ZXh0IGNvbnRhaW5pbmcKCSAqIHRoZSBvZmZzZXQgYW5kIHRoZSB0aW1lIGRlcGVuZHMgb24gdGhlIGxvY2F0aW9uIG9mIG91ciB0aW1lYmFyIHdpdGgKCSAqIHJlc3BlY3QgdG8gdGhlIGNlbnRlciBvZiB0aGUgdmlzaWJsZSBzdGF0ZW1hcC4KCSAqLwoJaWYgKG1hcFggPCAoZ193aWR0aCAvIDIpKSB7CgkJZGlyZWN0aW9uID0gMTsKCQlhbmNob3IgPSAnc3RhcnQnOwoJfSBlbHNlIHsKCQlkaXJlY3Rpb24gPSAtMTsKCQlhbmNob3IgPSAnZW5kJzsKCX0KCgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgYWJzWCArIChkaXJlY3Rpb24gKiBudWRnZS54KSk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd5JywgZ2xvYmFscy50bWFyZ2luIC0gbnVkZ2UueSk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd0ZXh0LWFuY2hvcicsIGFuY2hvcik7CgoJdGltZSA9IHRpbWVGcm9tTWFwWChtYXBYKTsKCXRleHQuY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudCA9IHRpbWVUb1RleHQodGltZSk7CgoJcmV0dXJuICh0aW1lKTsKfTsKCnZhciB0aW1lYmFySGlkZVN1YmJhciA9IGZ1bmN0aW9uICh0aW1lYmFyKQp7Cgl2YXIgcGFyZW50LCBzdWJiYXI7CgoJaWYgKCF0aW1lYmFyIHx8ICEoc3ViYmFyID0gdGltZWJhci5zdWJiYXIpIHx8IHN1YmJhci5oaWRkZW4pCgkJcmV0dXJuOwoKCXBhcmVudCA9IHRpbWViYXIucGFyZW50OwoJcGFyZW50LnJlbW92ZUNoaWxkKHN1YmJhci5iYXIpOwoJcGFyZW50LnJlbW92ZUNoaWxkKHN1YmJhci5zcGFuKTsKCXBhcmVudC5yZW1vdmVDaGlsZChzdWJiYXIudGV4dCk7CgoJc3ViYmFyLmhpZGRlbiA9IHRydWU7Cn07Cgp2YXIgdGltZWJhclNob3dTdWJiYXIgPSBmdW5jdGlvbiAodGltZWJhcikKewoJdmFyIHBhcmVudCwgc3ViYmFyLCBtYXBYOwoKCWlmICghdGltZWJhciB8fCAhKHN1YmJhciA9IHRpbWViYXIuc3ViYmFyKSB8fCAhc3ViYmFyLmhpZGRlbikKCQlyZXR1cm47CgoJbWFwWCA9IHRpbWVUb01hcFgoc3ViYmFyLnRpbWUpCgoJaWYgKG1hcFggPCAwIHx8IG1hcFggPj0gZ193aWR0aCkKCQlyZXR1cm47CgoJdGltZWJhclNldFN1YmJhckxvY2F0aW9uKHN1YmJhciwgbWFwWCwgdGltZWJhci54KTsKCglwYXJlbnQgPSB0aW1lYmFyLnBhcmVudDsKCXBhcmVudC5hcHBlbmRDaGlsZChzdWJiYXIuYmFyKTsKCXBhcmVudC5hcHBlbmRDaGlsZChzdWJiYXIuc3Bhbik7CglwYXJlbnQuYXBwZW5kQ2hpbGQoc3ViYmFyLnRleHQpOwoKCXN1YmJhci5oaWRkZW4gPSBmYWxzZTsKfQoKdmFyIHRpbWViYXJIaWRlID0gZnVuY3Rpb24gKHRpbWViYXIpCnsKCWlmICghdGltZWJhciB8fCB0aW1lYmFyLmhpZGRlbiB8fCAhdGltZWJhci5iYXIpCgkJcmV0dXJuOwoKCXRpbWViYXIucGFyZW50LnJlbW92ZUNoaWxkKHRpbWViYXIuYmFyKTsKCXRpbWViYXIucGFyZW50LnJlbW92ZUNoaWxkKHRpbWViYXIudGV4dCk7Cgl0aW1lYmFyLmhpZGRlbiA9IHRydWU7Cgl0aW1lYmFySGlkZVN1YmJhcih0aW1lYmFyKTsKfTsKCnZhciB0aW1lYmFyU2hvdyA9IGZ1bmN0aW9uICh0aW1lYmFyKQp7Cgl2YXIgbWFwWDsKCglpZiAoIXRpbWViYXIgfHwgIXRpbWViYXIuaGlkZGVuKQoJCXJldHVybjsKCgltYXBYID0gdGltZVRvTWFwWCh0aW1lYmFyLnRpbWUpOwoKCWlmIChtYXBYIDwgMCB8fCBtYXBYID49IGdfd2lkdGgpCgkJcmV0dXJuOwoKCXRpbWViYXJTZXRCYXJMb2NhdGlvbih0aW1lYmFyLmJhciwgbWFwWCk7Cgl0aW1lYmFyU2V0VGV4dExvY2F0aW9uKHRpbWViYXIudGV4dCwgbWFwWCk7Cgl0aW1lYmFyLnggPSBtYXBYOwoKCXRpbWViYXIucGFyZW50LmFwcGVuZENoaWxkKHRpbWViYXIuYmFyKTsKCXRpbWViYXIucGFyZW50LmFwcGVuZENoaWxkKHRpbWViYXIudGV4dCk7Cgl0aW1lYmFyLmhpZGRlbiA9IGZhbHNlOwoKCXRpbWViYXJTaG93U3ViYmFyKHRpbWViYXIpOwp9OwoKdmFyIHRpbWViYXJTZXRNaWRkbGUgPSBmdW5jdGlvbiAodGltZWJhcikKewoJdmFyIG1hcFggPSBnX3dpZHRoIC8gMjsKCglpZiAoIXRpbWViYXIgfHwgIXRpbWViYXIuYmFyKQoJCXJldHVybjsKCgkvKgoJICogVGhpcyBpcyBqdXN0IGFuIGFsZ2VicmFpYyByZWFycmFuZ2VtZW50IG9mIHRoZSBtYXBYIGNhbGN1bGF0aW9uCgkgKiBpbiB0aW1lYmFyU2hvdygpLCBhYm92ZS4KCSAqLwoJZ190cmFuc01hdHJpeFs0XSA9IC0oKCh0aW1lYmFyLnRpbWUgLyBnbG9iYWxzLnRpbWVXaWR0aCkgKiBnX3dpZHRoICoKCSAgICBnX3RyYW5zTWF0cml4WzBdKSAtIG1hcFgpOwp9OwoKdmFyIHRpbWViYXJTZXRCcmVha2Rvd24gPSBmdW5jdGlvbiAodGltZSkKewoJdmFyIGJyZWFrZG93biwgc3RhdGUsIHRvdGFsID0gW107Cgl2YXIgZW50aXR5OwoJdmFyIHN1bSA9IHt9OwoJdmFyIHJ2YWwgPSBbXTsKCgl2YXIgY2xpY2sgPSBmdW5jdGlvbiAoc3RhdGVtYXAsIHMpIHsKCQlyZXR1cm4gKGZ1bmN0aW9uIChldnQpIHsgbGVnZW5kY2xpY2soZXZ0LCBzdGF0ZW1hcCwgcyk7IH0pOwoJfTsKCgl0aW1lICs9IGdsb2JhbHMuYmVnaW47CgoJZm9yIChlbnRpdHkgaW4gZ19lbnRpdGllcykgewoJCXZhciBzdGF0ZW1hcCA9IGdfc3RhdGVtYXBzW2dfZW50aXRpZXNbZW50aXR5XS5zdGF0ZW1hcF0ubGVnZW5kOwoKCQlicmVha2Rvd24gPSBlbnRpdHlCcmVha2Rvd24oZ19lbnRpdGllc1tlbnRpdHldLCB0aW1lKTsKCgkJaWYgKCF0b3RhbFtzdGF0ZW1hcF0pIHsKCQkJdG90YWxbc3RhdGVtYXBdID0ge307CgkJCXN1bVtzdGF0ZW1hcF0gPSAwOwoJCX0KCgkJZm9yIChzdGF0ZSBpbiBicmVha2Rvd24pIHsKCQkJaWYgKCF0b3RhbFtzdGF0ZW1hcF0uaGFzT3duUHJvcGVydHkoc3RhdGUpKQoJCQkJdG90YWxbc3RhdGVtYXBdW3N0YXRlXSA9IDA7CgoJCQlzdW1bc3RhdGVtYXBdICs9IGJyZWFrZG93bltzdGF0ZV07CgkJCXRvdGFsW3N0YXRlbWFwXVtzdGF0ZV0gKz0gYnJlYWtkb3duW3N0YXRlXTsKCQl9Cgl9CgoJdmFyIHNldHRvdGFsID0gZnVuY3Rpb24gKHN0YXRlbWFwLCBzdGF0ZSkgewoJCXZhciBsZWdlbmQsIHBhcmVudCwgdGV4dDsKCQl2YXIgeCwgeSwgd2lkdGgsIGhlaWdodCwgdDsKCQl2YXIgbnVkZ2UgPSAzOwoKCQkvKgoJCSAqIEl0ZXJhdGUgZG93biB1bnRpbCB3ZSBmaW5kIGEgdmFsaWQgbGVnZW5kLiAgV2Uga25vdyB0aGF0CgkJICogdGhhdCB0aGVyZSB3aWxsIGJlIGF0IGxlYXN0IG9uZSwgYnV0IHdlIGJyZWFrIG91dCBvZiB0aGUKCQkgKiBsb29wIGFueXdheSBpZiB3ZSBkb24ndCBmaW5kIGl0IHRvIGFsbG93IHRoZSBmYWlsdXJlIG1vZGUKCQkgKiBoZXJlIHRvIGJlIGFuIHVucmVmZXJlbmNlZCBwcm9wZXJ0eSByYXRoZXIgdGhhbiBhbgoJCSAqIGluaWZpbml0ZSBsb29wLgoJCSAqLwoJCWxlZ2VuZCA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC1sZWdlbmQtJyArCgkJICAgIHN0YXRlbWFwICsgJy0nICsgc3RhdGUpOwoKCQlwYXJlbnQgPSBsZWdlbmQucGFyZW50Tm9kZTsKCgkJeCA9IHBhcnNlSW50KGxlZ2VuZC5nZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcpLCAxMCk7CgkJeSA9IHBhcnNlSW50KGxlZ2VuZC5nZXRBdHRyaWJ1dGVOUyhudWxsLCAneScpLCAxMCk7CgkJd2lkdGggPSBwYXJzZUludChsZWdlbmQuZ2V0QXR0cmlidXRlTlMobnVsbCwgJ3dpZHRoJyksIDEwKTsKCQloZWlnaHQgPSBwYXJzZUludChsZWdlbmQuZ2V0QXR0cmlidXRlTlMobnVsbCwgJ2hlaWdodCcpLCAxMCk7CgoJCXQgPSBNYXRoLmZsb29yKHRvdGFsW3N0YXRlbWFwXVtzdGF0ZV0pICsgJyAoJyArCgkJICAgIE1hdGguZmxvb3IoKHRvdGFsW3N0YXRlbWFwXVtzdGF0ZV0gLwoJCSAgICBzdW1bc3RhdGVtYXBdKSAqIDEwMCkgKyAnJSknOwoKCQl0ZXh0ID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHBhcmVudC5uYW1lc3BhY2VVUkksICd0ZXh0Jyk7CgkJdGV4dC5jbGFzc0xpc3QuYWRkKCdzYW5zc2VyaWYnKTsKCQl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXRpbWVicmVha3RleHQnKTsKCgkJdGV4dC5hcHBlbmRDaGlsZChnX3N2Z0RvYy5jcmVhdGVUZXh0Tm9kZSh0KSk7CgkJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIHggKyAod2lkdGggLyAyKSk7CgkJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHkgKyAoaGVpZ2h0IC8gMikgKyBudWRnZSk7CgkJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAndGV4dC1hbmNob3InLCAnbWlkZGxlJyk7CgoJCXRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLAoJCSAgICBjbGljayhzdGF0ZW1hcCwgZ19zdGF0ZW1hcHNbc3RhdGVtYXBdLnN0YXRlc1tzdGF0ZV0udmFsdWUpKTsKCgkJcGFyZW50LmFwcGVuZENoaWxkKHRleHQpOwoJCXJ2YWwucHVzaCh0ZXh0KTsKCX07CgoJZm9yIChzdGF0ZW1hcCBpbiB0b3RhbCkgewoJCWZvciAoc3RhdGUgaW4gdG90YWxbc3RhdGVtYXBdKQoJCQlzZXR0b3RhbChzdGF0ZW1hcCwgc3RhdGUpOwoJfQoKCXJldHVybiAocnZhbCk7Cn07Cgp2YXIgdGltZWJhckNyZWF0ZSA9IGZ1bmN0aW9uIChtYXBYKQp7Cgl2YXIgcGFyZW50ID0gZ19zdGF0ZW1hcHNbMF0uZWxlbS5wYXJlbnROb2RlLnBhcmVudE5vZGU7Cgl2YXIgYmFyLCB0ZXh0OwoJdmFyIHRpbWViYXIgPSB7IHBhcmVudDogcGFyZW50LCBoaWRkZW46IGZhbHNlIH07CgoJYmFyID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHBhcmVudC5uYW1lc3BhY2VVUkksICdsaW5lJyk7CgliYXIuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGltZWJhcicpOwoKCXRpbWViYXJTZXRCYXJMb2NhdGlvbihiYXIsIG1hcFgpOwoJcGFyZW50LmFwcGVuZENoaWxkKGJhcik7CgoJdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhwYXJlbnQubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzYW5zc2VyaWYnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGltZXRleHQnKTsKCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUoJycpKTsKCgl0aW1lYmFyLnRpbWUgPSB0aW1lYmFyU2V0VGV4dExvY2F0aW9uKHRleHQsIG1hcFgpOwoJdGltZWJhci5icmVha2Rvd24gPSB0aW1lYmFyU2V0QnJlYWtkb3duKHRpbWViYXIudGltZSk7Cgl0aW1lYmFyLnggPSBtYXBYOwoKCXRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CgkJdGltZWJhclJlbW92ZSh0aW1lYmFyKTsKCQlzdGF0ZXNlbFVwZGF0ZSgpOwoJfSk7CgoJcGFyZW50LmFwcGVuZENoaWxkKHRleHQpOwoKCXRpbWViYXIuYmFyID0gYmFyOwoJdGltZWJhci50ZXh0ID0gdGV4dDsKCglyZXR1cm4gKHRpbWViYXIpOwp9OwoKdmFyIHRpbWViYXJDcmVhdGVTdWJiYXIgPSBmdW5jdGlvbiAodGltZWJhciwgbWFwWCwgYWJzWSkKewoJdmFyIHBhcmVudCA9IHRpbWViYXIucGFyZW50OwoJdmFyIHN1YmJhciwgYmFyLCBzcGFuLCB0ZXh0LCB0aW1lLCBkZWx0YTsKCgliYXIgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMocGFyZW50Lm5hbWVzcGFjZVVSSSwgJ2xpbmUnKTsKCWJhci5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC1zdWJiYXInKTsKCglzcGFuID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHBhcmVudC5uYW1lc3BhY2VVUkksICdsaW5lJyk7CglzcGFuLmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXN1YmJhci1zcGFuJyk7CgoJdGltZSA9IHRpbWVGcm9tTWFwWChtYXBYKTsKCWRlbHRhID0gTWF0aC5hYnModGltZWJhci50aW1lIC0gdGltZSk7CgoJdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhwYXJlbnQubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzYW5zc2VyaWYnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtc3ViYmFyLXRleHQnKTsKCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUodGltZXVuaXRzKGRlbHRhKSkpOwoKCXZhciBzdWJiYXIgPSB7IGJhcjogYmFyLCBzcGFuOiBzcGFuLCB0ZXh0OiB0ZXh0LAoJICAgIHRpbWU6IHRpbWUsIHk6IGFic1ksIGhpZGRlbjogZmFsc2UgfTsKCgl0aW1lYmFyU2V0U3ViYmFyTG9jYXRpb24oc3ViYmFyLCBtYXBYLCB0aW1lYmFyLngpOwoKCXBhcmVudC5hcHBlbmRDaGlsZChiYXIpOwoJcGFyZW50LmFwcGVuZENoaWxkKHNwYW4pOwoJcGFyZW50LmFwcGVuZENoaWxkKHRleHQpOwoKCXRpbWViYXIuc3ViYmFyID0gc3ViYmFyOwp9Cgp2YXIgdGltZWJhclJlbW92ZVN1YmJhciA9IGZ1bmN0aW9uICh0aW1lYmFyKQp7Cgl2YXIgc3ViYmFyID0gdGltZWJhci5zdWJiYXI7CgoJaWYgKCFzdWJiYXIpCgkJcmV0dXJuOwoKCWlmICghc3ViYmFyLmhpZGRlbikgewoJCXRpbWViYXIucGFyZW50LnJlbW92ZUNoaWxkKHN1YmJhci5iYXIpOwoJCXRpbWViYXIucGFyZW50LnJlbW92ZUNoaWxkKHN1YmJhci5zcGFuKTsKCQl0aW1lYmFyLnBhcmVudC5yZW1vdmVDaGlsZChzdWJiYXIudGV4dCk7Cgl9CgoJdGltZWJhci5zdWJiYXIgPSB1bmRlZmluZWQ7Cn0KCnZhciBzdGF0ZXNlbFRhZ3ZhbFNlbGVjdCA9IGZ1bmN0aW9uIChldnQsIHRhZ3ZhbCkKewoJdmFyIHRhZ2RlZnMgPSB7fTsKCXZhciBpLCBlbnRpdHk7Cgl2YXIgc3RhdGUsIHRhZ3M7Cgl2YXIgY2hpbGQ7Cgl2YXIgaGlnaGxpZ2h0ID0gJ3N0YXRlbWFwLXRhZ2JveC1zZWxlY3QtaGlnaGxpZ2h0ZWQnOwoKCWlmIChnX3N0YXRlc2VsID09IHVuZGVmaW5lZCkKCQlyZXR1cm47CgoJc3RhdGUgPSBnX3N0YXRlc2VsLnN0YXRlOwoJdGFncyA9IGdfc3RhdGVtYXBzW2dfc3RhdGVzZWwuc3RhdGVtYXBdLnRhZ3M7CgoJaWYgKGdfdGFndmFsc2VsICYmIGdfdGFndmFsc2VsLnNlbGVjdGVkKSB7CgkJZm9yIChpID0gMDsgaSA8IGdfdGFndmFsc2VsLnNlbGVjdGVkLmxlbmd0aDsgaSsrKSB7CgkJCWNoaWxkID0gZ190YWd2YWxzZWwuc2VsZWN0ZWRbaV07CgkJCWNoaWxkLnJlbW92ZUF0dHJpYnV0ZSgnZmlsbC1vcGFjaXR5Jyk7CgkJfQoKCQlpZiAoZ190YWd2YWxzZWwuZWxlbWVudCkKCQkJZ190YWd2YWxzZWwuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGhpZ2hsaWdodCk7CgoJCS8qCgkJICogSWYgb3VyIHNlbGVjdGlvbiBtYXRjaGVzIHRoZSBzZWxlY3Rpb24gdGhhdCB3ZSBoYXZlIGFscmVhZHkKCQkgKiBtYWRlLCB0aGVuIHdlIGFyZSB1bnNlbGVjdGluZyB0aGlzIHRhZyB2YWx1ZTsgd2UgbmVlZCBvbmx5CgkJICogcmV0dXJuLgoJCSAqLwoJCWlmIChnX3RhZ3ZhbHNlbC50YWcgPT0gZ190YWdzZWwudGFnICYmCgkJICAgIGdfdGFndmFsc2VsLnRhZ3ZhbCA9PSB0YWd2YWwpIHsKCQkJZ190YWd2YWxzZWwgPSB1bmRlZmluZWQ7CgkJCXJldHVybjsKCQl9Cgl9CgoJZ190YWd2YWxzZWwgPSB7IHNlbGVjdGVkOiBbXSwgdGFnOiBnX3RhZ3NlbC50YWcsIHRhZ3ZhbDogdGFndmFsIH07CgoJZXZ0LnRhcmdldC5jbGFzc0xpc3QuYWRkKGhpZ2hsaWdodCk7CglnX3RhZ3ZhbHNlbC5lbGVtZW50ID0gZXZ0LnRhcmdldDsKCgkvKgoJICogSXRlcmF0ZSBvdmVyIGFsbCBvZiBvdXIgdGFnIGRlZmluaXRpb25zLCBsb29raW5nIGZvciBhIG1hdGNoIHdoZXJlCgkgKiB0aGUgc3BlY2lmaWVkIHRhZyAoZm9yIHRoZSBzcGVjaWZpZWQgc3RhdGUpIG1hdGNoZXMgdGhlIHNwZWNpZmllZAoJICogdGFnIHZhbHVlLgoJICovCglmb3IgKGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkrKykgewoJCWlmICh0YWdzW2ldLnN0YXRlICE9IHN0YXRlKQoJCQljb250aW51ZTsKCgkJaWYgKHRhZ3NbaV1bZ190YWdzZWwudGFnXSAhPSB0YWd2YWwpCgkJCWNvbnRpbnVlOwoKCQl0YWdkZWZzW2ldID0gdHJ1ZTsKCX0KCgkvKgoJICogTm93IGZvciBlYWNoIGVudGl0eSwgd2Ugd2lsbCBwbG93IHRocm91Z2ggZXZlcnkgcmVjdGFuZ2xlLgoJICovCglmb3IgKGlkIGluIGdfZW50aXRpZXMpIHsKCQl2YXIgZW50aXR5ID0gZ19lbnRpdGllc1tpZF07CgkJdmFyIGVsZW0gPSBlbnRpdHkuZWxlbWVudDsKCQl2YXIgZGF0YSA9IGdfc3RhdGVtYXBzW2VudGl0eS5zdGF0ZW1hcF0uZGF0YVtlbnRpdHkubmFtZV07CgkJdmFyIGogPSAwOwoKCQlmb3IgKGkgPSAwOyBpIDwgZWxlbS5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7CgkJCWNoaWxkID0gZWxlbS5jaGlsZE5vZGVzW2ldOwoKCQkJaWYgKGNoaWxkLm5vZGVOYW1lICE9ICdyZWN0JykKCQkJCWNvbnRpbnVlOwoKCQkJdmFyIGRhdHVtID0gZGF0YVtqKytdOwoJCQl2YXIgdGFnOwoKCQkJaWYgKGRhdHVtLnMgaW5zdGFuY2VvZiBPYmplY3QpIHsKCQkJCWlmICghZGF0dW0uc1tzdGF0ZV0pCgkJCQkJY29udGludWU7CgkJCX0gZWxzZSB7CgkJCQlpZiAoZGF0dW0ucyAhPSBzdGF0ZSkKCQkJCQljb250aW51ZTsKCQkJfQoKCQkJaWYgKCFkYXR1bS5nKQoJCQkJY29udGludWU7CgoJCQl2YXIgcmF0aW8gPSAwOwoKCQkJZm9yICh0YWcgaW4gZGF0dW0uZykgewoJCQkJaWYgKHRhZ2RlZnNbdGFnXSkKCQkJCQlyYXRpbyArPSBkYXR1bS5nW3RhZ107CgkJCX0KCgkJCWlmIChyYXRpbyA9PT0gMCkKCQkJCWNvbnRpbnVlOwoKCQkJLyoKCQkJICogQXQgdGhpcyBwb2ludCB3ZSBoYXZlIGZvdW5kIGEgcmVjdGFuZ2xlIHRoYXQgd2UKCQkJICogd2FudCB0byBjb2xvciwgYW5kIHdlIGtub3cgdGhlIGRlZ3JlZSB0aGF0IHdlCgkJCSAqIHdhbnQgdG8gY29sb3IgaXQhCgkJCSAqLwoJCQljaGlsZC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAnZmlsbC1vcGFjaXR5JywgMSAtIHJhdGlvKTsKCQkJZ190YWd2YWxzZWwuc2VsZWN0ZWQucHVzaChjaGlsZCk7CgkJfQoJfQp9OwoKdmFyIHN0YXRlc2VsVXBkYXRlID0gZnVuY3Rpb24gKCkKewoJdmFyIGJhc2UsIGV0aW1lLCBuZW50aXRpZXMgPSAwOwoJdmFyIHN0YXRlLCBlbnRpdHk7Cgl2YXIgYnl0YWcgPSB7fSwgdGFndmFsOwoJdmFyIGhlYWRlciwgaSwgdGFnczsKCglpZiAoZ19zdGF0ZXNlbCA9PSB1bmRlZmluZWQpCgkJcmV0dXJuOwoKCXN0YXRlID0gZ19zdGF0ZXNlbC5zdGF0ZTsKCXRhZ3MgPSBnX3N0YXRlbWFwc1tnX3N0YXRlc2VsLnN0YXRlbWFwXS50YWdzOwoKCXZhciBzdW0gPSBmdW5jdGlvbiAoZGF0dW0sIGlkLCBzcGFuKSB7CgkJdmFyIHRpZCwgdGFnOwoKCQlpZiAoIShkYXR1bS5zIGluc3RhbmNlb2YgT2JqZWN0KSkgewoJCQlpZiAoZGF0dW0ucyAhPSBzdGF0ZSkKCQkJCXJldHVybjsKCQl9IGVsc2UgewoJCQl2YXIgcmF0aW87CgoJCQlpZiAoIShyYXRpbyA9IGRhdHVtLnNbc3RhdGVdKSkKCQkJCXJldHVybjsKCQl9CgoJCWlmICghZGF0dW0uZykKCQkJcmV0dXJuOwoKCQlmb3IgKHRpZCBpbiBkYXR1bS5nKSB7CgkJCXRhZyA9IHRhZ3NbdGlkXTsKCgkJCWlmICh0YWcuc3RhdGUgIT0gc3RhdGUpCgkJCQljb250aW51ZTsKCgkJCWlmICghKHRhZ3ZhbCA9IHRhZ1tnX3RhZ3NlbC50YWddKSkKCQkJCWNvbnRpbnVlOwoKCQkJaWYgKCFieXRhZ1t0YWd2YWxdKQoJCQkJYnl0YWdbdGFndmFsXSA9IDA7CgoJCQlieXRhZ1t0YWd2YWxdICs9IHNwYW4gKiBkYXR1bS5nW3RpZF07CgkJfQoJfTsKCglpZiAoIWdfdGFnc2VsKQoJCXJldHVybjsKCgloZWFkZXIgPSAnJzsKCglpZiAoZ19zdGF0ZWJhciAmJiBnX3N0YXRlYmFyLmVudGl0eSkgewoJCWhlYWRlciA9IGdfc3RhdGVtYXBzW2dfc3RhdGVzZWwuc3RhdGVtYXBdLmVudGl0eUtpbmQgKyAnICcgKwoJCSAgICBnX3N0YXRlYmFyLmVudGl0eS5uYW1lICsgJyAnOwoJfQoKCWhlYWRlciArPSAnYnkgJyArIGdfdGFnc2VsLnRhZyArICcgJzsKCglpZiAoZ190aW1lYmFyICYmIGdfdGltZWJhci5iYXIpIHsKCQliYXNlID0gZ190aW1lYmFyLnRpbWUgKyBnbG9iYWxzLmJlZ2luOwoJCWV0aW1lID0gMDsKCQloZWFkZXIgKz0gJ2F0ICcgKyB0aW1ldW5pdHMoZ190aW1lYmFyLnRpbWUpOwoJfSBlbHNlIHsKCQliYXNlID0gdGltZUZyb21NYXBYKDApICsgZ2xvYmFscy5iZWdpbjsKCQlldGltZSA9IHRpbWVGcm9tTWFwWChnX3dpZHRoKSArIGdsb2JhbHMuYmVnaW47CgkJaGVhZGVyICs9ICdvdmVyIHNwYW4nOwoJfQoKCWhlYWRlciA9IGhlYWRlci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGhlYWRlci5zdWJzdHIoMSkgKyAnOic7CgoJaWYgKGdfc3RhdGViYXIgJiYgZ19zdGF0ZWJhci5lbnRpdHkpIHsKCQllbnRpdHlGb3JFYWNoRGF0dW0oZ19zdGF0ZWJhci5lbnRpdHksIGJhc2UsIGV0aW1lLCBzdW0pOwoJCW5lbnRpdGllcysrOwoJfSBlbHNlIHsKCQkvKgoJCSAqIEZvciBlYWNoIGVudGl0eSwgd2UgbmVlZCB0byBkZXRlcm1pbmUgdGhlIGFtb3VudCBvZiB0aW1lCgkJICogaW4gb3VyIHNlbGVjdGVkIHN0YXRlLgoJCSAqLwoJCWZvciAoZW50aXR5IGluIGdfZW50aXRpZXMpIHsKCQkJZW50aXR5Rm9yRWFjaERhdHVtKGdfZW50aXRpZXNbZW50aXR5XSwKCQkJICAgIGJhc2UsIGV0aW1lLCBzdW0pOwoJCQluZW50aXRpZXMrKzsKCQl9Cgl9CgoJdmFyIHNvcnRlZCA9IE9iamVjdC5rZXlzKGJ5dGFnKS5zb3J0KGZ1bmN0aW9uIChsaHMsIHJocykgewoJCWlmIChieXRhZ1tsaHNdIDwgYnl0YWdbcmhzXSkgewoJCQlyZXR1cm4gKDEpOwoJCX0gZWxzZSBpZiAoYnl0YWdbbGhzXSA+IGJ5dGFnW3Joc10pIHsKCQkJcmV0dXJuICgtMSk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuICgwKTsKCQl9Cgl9KTsKCgl2YXIgZGl2aXNvcjsKCglpZiAoZXRpbWUgPT09IDApIHsKCQlkaXZpc29yID0gbmVudGl0aWVzOwoJfSBlbHNlIHsKCQlkaXZpc29yID0gKGV0aW1lIC0gYmFzZSkgKiBuZW50aXRpZXM7Cgl9CgoJdmFyIHggPSBnX3N0YXRlc2VsLng7Cgl2YXIgeSA9IGdfc3RhdGVzZWwueSArIDEwOwoKCXZhciBlbGVtID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLXRhZ2JveC1zZWxlY3QnKTsKCgl3aGlsZSAoZWxlbS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApCgkJZWxlbS5yZW1vdmVDaGlsZChlbGVtLmNoaWxkTm9kZXNbMF0pOwoKCWlmIChnX3RhZ3ZhbHNlbCAmJiBnX3RhZ3ZhbHNlbC5lbGVtZW50KQoJCWdfdGFndmFsc2VsLmVsZW1lbnQgPSB1bmRlZmluZWQ7CgoJdmFyIHRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMoZWxlbS5uYW1lc3BhY2VVUkksICd0ZXh0Jyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXRhZ2JveC1zZWxlY3QtaGVhZGVyJyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3NhbnNzZXJpZicpOwoKCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUoaGVhZGVyKSk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgeCk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd5JywgeSk7CgllbGVtLmFwcGVuZENoaWxkKHRleHQpOwoJeSArPSA5OwoKCXZhciBsaW5lID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKGVsZW0ubmFtZXNwYWNlVVJJLCAnbGluZScpOwoJbGluZS5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10YWdib3gtc2VsZWN0LWhlYWRlci1saW5lJyk7CglsaW5lLngxLmJhc2VWYWwudmFsdWUgPSB4IC0gMjsKCWxpbmUueTEuYmFzZVZhbC52YWx1ZSA9IHk7CglsaW5lLngyLmJhc2VWYWwudmFsdWUgPSBnX3N0YXRlc2VsLngyOwoJbGluZS55Mi5iYXNlVmFsLnZhbHVlID0geTsKCWVsZW0uYXBwZW5kQ2hpbGQobGluZSk7Cgl5ICs9IDE4OwoKCXZhciBibWFyZ2luID0gNjA7Cgl2YXIgdHRsID0gMDsKCXZhciBlbGxpcHNpcyA9IGZhbHNlOwoKCXZhciBjbGljayA9IGZ1bmN0aW9uICh0dikgewoJCXJldHVybiAoZnVuY3Rpb24gKGV2dCkgeyBzdGF0ZXNlbFRhZ3ZhbFNlbGVjdChldnQsIHR2KTsgfSk7Cgl9OwoKCWZvciAoaSA9IDA7IGkgPD0gc29ydGVkLmxlbmd0aDsgaSsrKSB7CgkJdmFyIHQsIHBlcmM7CgoJCWlmIChpIDwgc29ydGVkLmxlbmd0aCkgewoJCQlwZXJjID0gKGJ5dGFnW3NvcnRlZFtpXV0gLyBkaXZpc29yKSAqIDEwMC4wOwoJCQl0YWd2YWwgPSBzb3J0ZWRbaV07CgkJCXR0bCArPSBwZXJjOwoKCQkJaWYgKHkgPiBnbG9iYWxzLnRvdGFsSGVpZ2h0IC0gYm1hcmdpbikgewoJCQkJaWYgKGVsbGlwc2lzKQoJCQkJCWNvbnRpbnVlOwoKCQkJCWVsbGlwc2lzID0gdHJ1ZTsKCQkJCXRhZ3ZhbCA9ICcuLi4nOwoJCQl9CgkJfSBlbHNlIHsKCQkJcGVyYyA9IHR0bDsKCQkJdGFndmFsID0gJ3RvdGFsJzsKCgkJCXkgLT0gNTsKCQkJbGluZSA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhlbGVtLm5hbWVzcGFjZVVSSSwKCQkJICAgICdsaW5lJyk7CgkJCWxpbmUuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1zdW0tbGluZScpOwoJCQlsaW5lLngxLmJhc2VWYWwudmFsdWUgPSB4IC0gMjsKCQkJbGluZS55MS5iYXNlVmFsLnZhbHVlID0geTsKCQkJbGluZS54Mi5iYXNlVmFsLnZhbHVlID0gZ19zdGF0ZXNlbC54MjsKCQkJbGluZS55Mi5iYXNlVmFsLnZhbHVlID0geTsKCQkJZWxlbS5hcHBlbmRDaGlsZChsaW5lKTsKCQkJeSArPSAxNTsKCQl9CgoJCWlmIChpICE9IHNvcnRlZC5sZW5ndGggJiYgZWxsaXBzaXMpIHsKCQkJdCA9ICcuLi4nOwoJCX0gZWxzZSB7CgkJCXQgPSBNYXRoLnRydW5jKHBlcmMpICsgJy4nICsKCQkJICAgIChNYXRoLnJvdW5kKHBlcmMgKiAxMDApICUgMTAwKSArICclJzsKCQl9CgoJCXRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMoZWxlbS5uYW1lc3BhY2VVUkksICd0ZXh0Jyk7CgkJdGV4dC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10YWdib3gtc2VsZWN0LXBlcmMnKTsKCQl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3NhbnNzZXJpZicpOwoJCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUodCkpOwoJCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnLCB4ICsgNDUpOwoJCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3knLCB5KTsKCQllbGVtLmFwcGVuZENoaWxkKHRleHQpOwoKCQl0ZXh0ID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKGVsZW0ubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGFnYm94LXNlbGVjdCcpOwoJCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7CgkJdGV4dC5hcHBlbmRDaGlsZChnX3N2Z0RvYy5jcmVhdGVUZXh0Tm9kZSh0YWd2YWwpKTsKCQl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgeCArIDUwKTsKCQl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd5JywgeSk7CgoJCS8qCgkJICogSWYgd2UgYWxyZWFkeSBoYXZlIGEgdGFnIHZhbHVlIHNlbGVjdGlvbiBhbmQgaXQgbWF0Y2hlcwoJCSAqIHdoYXQgd2UncmUgYWJvdXQgdG8gZGlzcGxheSwgaW5kaWNhdGUgYXMgbXVjaCBieQoJCSAqIGhpZ2hsaWdodGluZyBpdC4KCQkgKi8KCQlpZiAoZ190YWd2YWxzZWwgJiYgZ190YWd2YWxzZWwudGFnID09IGdfdGFnc2VsLnRhZyAmJgoJCSAgICBnX3RhZ3ZhbHNlbC50YWd2YWwgPT0gdGFndmFsKSB7CgkJCXZhciBoaWdobGlnaHQgPSAnc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1oaWdobGlnaHRlZCc7CgkJCXRleHQuY2xhc3NMaXN0LmFkZChoaWdobGlnaHQpOwoJCQlnX3RhZ3ZhbHNlbC5lbGVtZW50ID0gdGV4dDsKCQl9CgoJCXRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGljayh0YWd2YWwpKTsKCgkJZWxlbS50aXRsZSA9IHQ7CgkJZWxlbS5hcHBlbmRDaGlsZCh0ZXh0KTsKCQl5ICs9IDE1OwoJfQp9OwoKdmFyIHN0YXRlc2VsVGFnU2VsZWN0ID0gZnVuY3Rpb24gKGV2dCwgdGFnKQp7Cgl2YXIgZWxlbSwgcHJlZml4ID0gJ3N0YXRlbWFwLXRhZ2JveC10YWctJzsKCglpZiAoZ190YWdzZWwpIHsKCQllbGVtID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQocHJlZml4ICsgZ190YWdzZWwudGFnKTsKCQllbGVtLmNsYXNzTGlzdC5yZW1vdmUocHJlZml4ICsgJ2hpZ2hsaWdodGVkJyk7CgoJCWlmIChnX3RhZ3NlbC50YWcgPT0gdGFnKSB7CgkJCWdfdGFnc2VsID0gdW5kZWZpbmVkOwoJCQlzdGF0ZXNlbFVwZGF0ZSgpOwoJCQlyZXR1cm47CgkJfQoJfQoKCWVsZW0gPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZChwcmVmaXggKyB0YWcpOwoJZWxlbS5jbGFzc0xpc3QuYWRkKHByZWZpeCArICdoaWdobGlnaHRlZCcpOwoJZ190YWdzZWwgPSB7IHRhZzogdGFnIH07CglzdGF0ZXNlbFVwZGF0ZSgpOwp9OwoKdmFyIHN0YXRlc2VsQ2xlYXJUYWdib3ggPSBmdW5jdGlvbiAoKQp7Cgl2YXIgdGFnYm94ID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLXRhZ2JveCcpLCBlbGVtOwoKCWlmICghdGFnYm94KQoJCXJldHVybjsKCgl3aGlsZSAodGFnYm94LmNoaWxkTm9kZXMubGVuZ3RoID4gMCkKCQl0YWdib3gucmVtb3ZlQ2hpbGQodGFnYm94LmNoaWxkTm9kZXNbMF0pOwoKCWVsZW0gPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZCgnc3RhdGVtYXAtdGFnYm94LXNlbGVjdCcpOwoKCXdoaWxlIChlbGVtLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkKCQllbGVtLnJlbW92ZUNoaWxkKGVsZW0uY2hpbGROb2Rlc1swXSk7Cn07Cgp2YXIgc3RhdGVzZWxTZWxlY3QgPSBmdW5jdGlvbiAoc3RhdGVtYXAsIHN0YXRlKQp7Cgl2YXIgbGVnZW5kID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLWxlZ2VuZC0nICsKCSAgICBnX3N0YXRlbWFwc1tzdGF0ZW1hcF0ubGVnZW5kICsgJy0nICsgc3RhdGUpOwoJdmFyIHN0YXRlcyA9IGdfc3RhdGVtYXBzW3N0YXRlbWFwXS5zdGF0ZXM7Cgl2YXIgYWxsdGFncyA9IGdfc3RhdGVtYXBzW3N0YXRlbWFwXS50YWdzOwoJdmFyIHRhZ3MgPSB7fTsKCXZhciBpLCB0OwoJdmFyIGxtYXJnaW4gPSAyMDsKCXZhciBvZmZzZXQgPSBnbG9iYWxzLmxtYXJnaW4gKyBnbG9iYWxzLnBpeGVsV2lkdGg7CgoJbGVnZW5kLmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLWxlZ2VuZC1oaWdobGlnaHRlZCcpOwoJc3RhdGVzZWxDbGVhclRhZ2JveCgpOwoKCXQgPSAndGFncyBmb3IgJyArIHN0YXRlc1tzdGF0ZV0ubmFtZTsKCgl2YXIgdGFnYm94ID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLXRhZ2JveCcpOwoJdmFyIHggPSBvZmZzZXQgKyBsbWFyZ2luOwoJdmFyIHkgPSBnbG9iYWxzLnRtYXJnaW47Cgl2YXIgeDIgPSB4ICsgKGdsb2JhbHMudGFnV2lkdGggLSBsbWFyZ2luKTsKCgl2YXIgdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyh0YWdib3gubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10YWdib3gtaGVhZGVyJyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3NhbnNzZXJpZicpOwoKCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUodCkpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIHgpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHkpOwoJdGFnYm94LmFwcGVuZENoaWxkKHRleHQpOwoJeSArPSAxMDsKCgl2YXIgbGluZSA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyh0YWdib3gubmFtZXNwYWNlVVJJLCAnbGluZScpOwoJbGluZS5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10YWdib3gtaGVhZGVyLWxpbmUnKTsKCWxpbmUueDEuYmFzZVZhbC52YWx1ZSA9IHggLSAyOwoJbGluZS55MS5iYXNlVmFsLnZhbHVlID0geTsKCWxpbmUueDIuYmFzZVZhbC52YWx1ZSA9IHgyOwoJbGluZS55Mi5iYXNlVmFsLnZhbHVlID0geTsKCXRhZ2JveC5hcHBlbmRDaGlsZChsaW5lKTsKCXkgKz0gMjA7CgoJLyoKCSAqIE5vdyBhZGQgdGV4dCBmb3IgZWFjaCBwb3NzaWJsZSB0YWcgZm9yIHRoaXMgc3RhdGUuCgkgKi8KCWZvciAoaSA9IDA7IGkgPCBhbGx0YWdzLmxlbmd0aDsgaSsrKSB7CgkJaWYgKGFsbHRhZ3NbaV0uc3RhdGUgIT09IHN0YXRlKQoJCQljb250aW51ZTsKCgkJZm9yICh0IGluIGFsbHRhZ3NbaV0pIHsKCQkJaWYgKHQgPT0gJ3N0YXRlJyB8fCB0ID09ICd0YWcnKQoJCQkJY29udGludWU7CgoJCQl0YWdzW3RdID0gdHJ1ZTsKCQl9Cgl9CgoJdGFncyA9IE9iamVjdC5rZXlzKHRhZ3MpLnNvcnQoKTsKCgl2YXIgY2xpY2sgPSBmdW5jdGlvbiAodGFnKSB7CgkJcmV0dXJuIChmdW5jdGlvbiAoZXZ0KSB7IHN0YXRlc2VsVGFnU2VsZWN0KGV2dCwgdGFnKTsgfSk7Cgl9OwoKCWZvciAoaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7CgkJdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyh0YWdib3gubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGFnYm94LXRhZycpOwoJCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7CgkJdGV4dC5pZCA9ICdzdGF0ZW1hcC10YWdib3gtdGFnLScgKyB0YWdzW2ldOwoKCQl0ZXh0LmFwcGVuZENoaWxkKGdfc3ZnRG9jLmNyZWF0ZVRleHROb2RlKHRhZ3NbaV0pKTsKCQl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgeCk7CgkJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHkpOwoJCXRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGljayh0YWdzW2ldKSk7CgoJCXRhZ2JveC5hcHBlbmRDaGlsZCh0ZXh0KTsKCQl5ICs9IDE4OwoJfQoKCWdfc3RhdGVzZWwgPSB7IHN0YXRlbWFwOiBzdGF0ZW1hcCwgc3RhdGU6IHN0YXRlLCB4OiB4LCB5OiB5LCB4MjogeDIgfTsKCXN0YXRlc2VsVXBkYXRlKCk7Cn07Cgp2YXIgc3RhdGVzZWxDbGVhciA9IGZ1bmN0aW9uICgpCnsKCXZhciBzdGF0ZSwgc3RhdGVtYXAsIGxlZ2VuZDsKCglpZiAoZ19zdGF0ZXNlbCA9PSB1bmRlZmluZWQpCgkJcmV0dXJuICgtMSk7CgoJc3RhdGUgPSBnX3N0YXRlc2VsLnN0YXRlOwoJc3RhdGVtYXAgPSBnX3N0YXRlc2VsLnN0YXRlbWFwOwoJbGVnZW5kID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLWxlZ2VuZC0nICsKCSAgICBzdGF0ZW1hcCArICctJyArIHN0YXRlKTsKCWxlZ2VuZC5jbGFzc0xpc3QucmVtb3ZlKCdzdGF0ZW1hcC1sZWdlbmQtaGlnaGxpZ2h0ZWQnKTsKCglzdGF0ZXNlbENsZWFyVGFnYm94KCk7CglnX3N0YXRlc2VsID0gdW5kZWZpbmVkOwoJZ190YWdzZWwgPSB1bmRlZmluZWQ7CgoJcmV0dXJuIChzdGF0ZSk7Cn07Cgp2YXIgc3RhdGVtYXBzVXBkYXRlID0gZnVuY3Rpb24gKCkKewoJdmFyIGk7Cgl2YXIgbmV3TWF0cml4ID0gJ21hdHJpeCgnICsgIGdfdHJhbnNNYXRyaXguam9pbignICcpICsgJyknOwoKCWZvciAoaSA9IDA7IGkgPCBnX3N0YXRlbWFwcy5sZW5ndGg7IGkrKykgewoJCWdfc3RhdGVtYXBzW2ldLmVsZW0uc2V0QXR0cmlidXRlTlMobnVsbCwKCQkgICAgJ3RyYW5zZm9ybScsIG5ld01hdHJpeCk7Cgl9Cn07CgovKgogKiBBbGwgb2YgdGhlIGZvbGxvd2luZyAqY2xpY2soKSBmdW5jdGlvbnMgYXJlIGFkZGVkIGF0IHRoZSB0aW1lIG9mIHN0YXRlbWFwCiAqIGdlbmVyYXRpb24uCiAqLwp2YXIgbGVnZW5kY2xpY2sgPSBmdW5jdGlvbiAoZXZ0LCBzdGF0ZW1hcCwgc3RhdGUpCnsKCWlmIChnbG9iYWxzLm5vdGFncyB8fCBzdGF0ZXNlbENsZWFyKCkgPT0gc3RhdGUpCgkJcmV0dXJuOwoKCXN0YXRlc2VsU2VsZWN0KHN0YXRlbWFwLCBzdGF0ZSk7CglzdGF0ZXNlbFVwZGF0ZSgpOwp9OwoKdmFyIG1hcGNsaWNrID0gZnVuY3Rpb24gKGV2dCwgaWR4KQp7Cgl2YXIgeCA9IGV2dC5jbGllbnRYIC0gZ19vZmZzZXQ7CgoJaWYgKGV2dC5zaGlmdEtleSB8fCBldnQuYWx0S2V5KSB7CgkJaWYgKCFnX3RpbWViYXIgfHwgIWdfdGltZWJhci5iYXIpCgkJCXJldHVybjsKCgkJdGltZWJhclJlbW92ZVN1YmJhcihnX3RpbWViYXIpOwoJCXRpbWViYXJDcmVhdGVTdWJiYXIoZ190aW1lYmFyLCB4LCBldnQuY2xpZW50WSk7CgkJcmV0dXJuOwoJfQoKCXRpbWViYXJSZW1vdmUoZ190aW1lYmFyKTsKCWdfdGltZWJhciA9IHRpbWViYXJDcmVhdGUoeCk7CgoJc3RhdGViYXJSZW1vdmUoZ19zdGF0ZWJhcik7CglnX3N0YXRlYmFyID0gc3RhdGViYXJDcmVhdGUoZXZ0LnRhcmdldCwgaWR4KTsKCglzdGF0ZXNlbFVwZGF0ZSgpOwp9OwoKdmFyIHBhbmNsaWNrID0gZnVuY3Rpb24gKGR4LCBkeSkKewoJdmFyIG1pblggPSAtKGdfd2lkdGggKiBnX3RyYW5zTWF0cml4WzBdIC0gZ193aWR0aCk7Cgl2YXIgbWluWSA9IC0oZ19oZWlnaHQgKiBnX3RyYW5zTWF0cml4WzBdIC0gZ19oZWlnaHQpOwoKCWdfdHJhbnNNYXRyaXhbNF0gKz0gZHg7CglnX3RyYW5zTWF0cml4WzVdICs9IGR5OwoKCXRpbWViYXJIaWRlKGdfdGltZWJhcik7CgoJaWYgKGdfdHJhbnNNYXRyaXhbNF0gPiAwKQoJCWdfdHJhbnNNYXRyaXhbNF0gPSAwOwoKCWlmIChnX3RyYW5zTWF0cml4WzRdIDwgbWluWCkKCQlnX3RyYW5zTWF0cml4WzRdID0gbWluWDsKCglpZiAoZ190cmFuc01hdHJpeFs1XSA+IDApCgkJZ190cmFuc01hdHJpeFs1XSA9IDA7CgoJaWYgKGdfdHJhbnNNYXRyaXhbNV0gPCBtaW5ZKQoJCWdfdHJhbnNNYXRyaXhbNV0gPSBtaW5ZOwoKCXRpbWVTZXRTcGFuTGFiZWwoKTsKCXN0YXRlbWFwc1VwZGF0ZSgpOwoJdGltZWJhclNob3coZ190aW1lYmFyKTsKCXN0YXRlc2VsVXBkYXRlKCk7Cn07Cgp2YXIgem9vbWNsaWNrID0gZnVuY3Rpb24gKHNjYWxlKQp7Cgl2YXIgaTsKCgl0aW1lYmFySGlkZShnX3RpbWViYXIpOwoKCWZvciAoaSA9IDA7IGkgPCBnX3RyYW5zTWF0cml4Lmxlbmd0aDsgaSsrKSB7CgkJLyoKCQkgKiBXZSBkb24ndCBzY2FsZSB0aGUgWSBkaXJlY3Rpb24gb24gYSB6b29tLgoJCSAqLwoJCWlmIChpICE9IDMpCgkJCWdfdHJhbnNNYXRyaXhbaV0gKj0gc2NhbGU7Cgl9CgoJdmFyIG1pblggPSAtKGdfd2lkdGggKiBnX3RyYW5zTWF0cml4WzBdIC0gZ193aWR0aCk7Cgl2YXIgbWluWSA9IC0oZ19oZWlnaHQgKiBnX3RyYW5zTWF0cml4WzBdIC0gZ19oZWlnaHQpOwoKCWdfdHJhbnNNYXRyaXhbNF0gKz0gKDEgLSBzY2FsZSkgKiBnX3dpZHRoIC8gMjsKCXRpbWViYXJTZXRNaWRkbGUoZ190aW1lYmFyKTsKCglpZiAoZ190cmFuc01hdHJpeFs0XSA+IDApCgkJZ190cmFuc01hdHJpeFs0XSA9IDA7CgoJaWYgKGdfdHJhbnNNYXRyaXhbNF0gPCBtaW5YKQoJCWdfdHJhbnNNYXRyaXhbNF0gPSBtaW5YOwoKCWlmIChnX3RyYW5zTWF0cml4WzVdID4gMCkKCQlnX3RyYW5zTWF0cml4WzVdID0gMDsKCglpZiAoZ190cmFuc01hdHJpeFs1XSA8IG1pblkpCgkJZ190cmFuc01hdHJpeFs1XSA9IG1pblk7CgoJaWYgKGdfdHJhbnNNYXRyaXhbMF0gPCAxKQoJCWdfdHJhbnNNYXRyaXggPSBbMSwgMCwgMCwgMSwgMCwgMF07CgoJdGltZVNldFNwYW5MYWJlbCgpOwoJc3RhdGVtYXBzVXBkYXRlKCk7Cgl0aW1lYmFyU2hvdyhnX3RpbWViYXIpOwoJc3RhdGVzZWxVcGRhdGUoKTsKfTsKCl1dPjwvc2NyaXB0Pgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWwovKgogKiBDb3B5cmlnaHQgMjAxOCwgSm95ZW50LCBJbmMuCiAqLwoKLnNhbnNzZXJpZiB7Cglmb250LWZhbWlseTogVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsKfQoKLmJ1dHRvbiB7CiAgICAgICAgZmlsbDogI2ZmZjsKfQoKLnN0YXRlbWFwLWJvcmRlciB7CglmaWxsOiBub25lOwoJc3Ryb2tlOiBibGFjazsKCXN0cm9rZS13aWR0aDogMC41Owp9Cgouc3RhdGVtYXAtaGlnaGxpZ2h0IHsKCWZpbGw6CQlibHVlOwp9Cgouc3RhdGVtYXAtdGl0bGUgewoJZm9udC1zaXplOgkxMHB0OwoJZm9udC13ZWlnaHQ6CWJvbGQ7Cgl0ZXh0LWFuY2hvcjoJbWlkZGxlOwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRpbWVsYWJlbCB7Cglmb250LXNpemU6CThwdDsKCXRleHQtYW5jaG9yOgltaWRkbGU7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGltZWJhciB7CglzdHJva2U6CQlibHVlOwoJZmlsbDoJCWJsdWU7CglzdHJva2Utd2lkdGg6CTFweDsKfQoKLnN0YXRlbWFwLXRpbWV0ZXh0IHsKCWZvbnQtc2l6ZToJOHB0OwoJZm9udC13ZWlnaHQ6CW5vcm1hbDsKCWZpbGw6CQlibHVlOwoJc3Ryb2tlOgkJYmx1ZTsKCXN0cm9rZS13aWR0aDoJMHB4OwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRpbWVicmVha3RleHQgewoJZm9udC1zaXplOgk4cHQ7Cglmb250LXdlaWdodDoJYm9sZDsKCWZpbGw6CQlibHVlOwoJc3Ryb2tlOgkJd2hpdGU7CglzdHJva2Utd2lkdGg6CTAuM3B4OwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXN1YmJhciB7CglzdHJva2U6CQlibHVlOwoJZmlsbDoJCWJsdWU7CglzdHJva2Utd2lkdGg6CTFweDsKCXN0cm9rZS1kYXNoYXJyYXk6IDUuNzsKfQoKLnN0YXRlbWFwLXN1YmJhci1zcGFuIHsKCXN0cm9rZToJCWJsdWU7CglmaWxsOgkJYmx1ZTsKCXN0cm9rZS13aWR0aDoJMC43NXB4OwoJc3Ryb2tlLWRhc2hhcnJheTogMTsKfQoKLnN0YXRlbWFwLXN1YmJhci10ZXh0IHsKCWZvbnQtc2l6ZToJOHB0OwoJZm9udC13ZWlnaHQ6CWJvbGQ7CglmaWxsOgkJYmx1ZTsKCXN0cm9rZToJCXdoaXRlOwoJc3Ryb2tlLXdpZHRoOgkwLjNweDsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC1zdGF0ZWJhciB7CglzdHJva2U6CQlibHVlOwoJZmlsbDoJCWJsdWU7CglzdHJva2Utd2lkdGg6CTFweDsKfQoKLnN0YXRlbWFwLXN0YXRldGV4dCB7Cglmb250LXNpemU6CThwdDsKCWZvbnQtd2VpZ2h0Oglub3JtYWw7CglmaWxsOgkJYmx1ZTsKCXN0cm9rZToJCWJsdWU7CglzdHJva2Utd2lkdGg6CTBweDsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10aW1lbGluZSB7CglzdHJva2U6IGJsYWNrOwoJc3Ryb2tlLXdpZHRoOgkwLjVwdDsKCW1hcmtlci1zdGFydDoJdXJsKCNzdGFydGFycm93KTsKCW1hcmtlci1lbmQ6CXVybCgjZW5kYXJyb3cpOwp9Cgouc3RhdGVtYXAtbGVnZW5kIHsKCXN0cm9rZTogYmxhY2s7CglzdHJva2Utd2lkdGg6CTAuNXB0Owp9Cgouc3RhdGVtYXAtbGVnZW5kLWhpZ2hsaWdodGVkIHsKCXN0cm9rZToJCWJsdWU7CglzdHJva2Utd2lkdGg6CTNwdDsKfQoKLnN0YXRlbWFwLWxlZ2VuZGxhYmVsIHsKCWZvbnQtc2l6ZToJN3B0OwoJdGV4dC1hbmNob3I6CW1pZGRsZTsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10YWdib3ggewoJc3Ryb2tlOgkJYmxhY2s7CglzdHJva2Utd2lkdGg6CTAuNXB0OwoJYWxpZ25tZW50LWJhc2VsaW5lOgloYW5naW5nOwoJdGV4dC1hbmNob3I6CXN0YXJ0OwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRhZ2JveC1oZWFkZXIgewoJZm9udC1zaXplOgk5cHQ7Cglmb250LXdlaWdodDoJYm9sZDsKCXRleHQtYW5jaG9yOglzdGFydDsKCWZvbnQtc3R5bGU6CW9ibGlxdWU7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGFnYm94LWhlYWRlci1saW5lIHsKCXN0cm9rZToJCWJsYWNrOwoJc3Ryb2tlLXdpZHRoOgkxcHQ7Cn0KCi5zdGF0ZW1hcC10YWdib3gtdGFnIHsKCWZvbnQtc2l6ZToJOXB0OwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRhZ2JveC10YWctaGlnaGxpZ2h0ZWQgewoJZm9udC13ZWlnaHQ6CWJvbGQ7Cn0KCi5zdGF0ZW1hcC10YWdib3gtc2VsZWN0LWhlYWRlciB7Cglmb250LXNpemU6CThwdDsKCXRleHQtYW5jaG9yOglzdGFydDsKCWZvbnQtc3R5bGU6CW9ibGlxdWU7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGFnYm94LXNlbGVjdCB7Cglmb250LXNpemU6CThwdDsKCXRleHQtYW5jaG9yOglzdGFydDsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10YWdib3gtc2VsZWN0LXBlcmMgewoJZm9udC1zaXplOgk4cHQ7Cgl0ZXh0LWFuY2hvcjoJZW5kOwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRhZ2JveC1zZWxlY3QtaGVhZGVyLWxpbmUgewoJc3Ryb2tlOgkJYmxhY2s7CglzdHJva2Utd2lkdGg6CTAuNXB0Owp9Cgouc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1zdW0tbGluZSB7CglzdHJva2U6CQlibGFjazsKCXN0cm9rZS13aWR0aDoJMC4yNXB0Owp9Cgouc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1oaWdobGlnaHRlZCB7Cglmb250LXdlaWdodDoJYm9sZDsKfQoKXV0+PC9zdHlsZT4KCjwhLS0gVGhpcyBmaWxlIGlzIHB1bGxlZCBpbnRvIHRoZSA8ZGVmcz4gc2VjdGlvbiAhLS0+CgogPG1hcmtlciBpZD0ic3RhcnRhcnJvdyIgbWFya2VyV2lkdGg9IjEwIiBtYXJrZXJIZWlnaHQ9IjciIAogICAgcmVmWD0iMTAiIHJlZlk9IjMuNSIgb3JpZW50PSJhdXRvIj4KICAgICAgPHBvbHlnb24gcG9pbnRzPSIxMCAwLCAxMCA3LCAwIDMuNSIgZmlsbD0iYmxhY2siIC8+CiAgICA8L21hcmtlcj4KICAgIDxtYXJrZXIgaWQ9ImVuZGFycm93IiBtYXJrZXJXaWR0aD0iMTAiIG1hcmtlckhlaWdodD0iNyIgCiAgICByZWZYPSIwIiByZWZZPSIzLjUiIG9yaWVudD0iYXV0byIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIj4KICAgICAgICA8cG9seWdvbiBwb2ludHM9IjAgMCwgMTAgMy41LCAwIDciIGZpbGw9ImJsYWNrIiAvPgogICAgPC9tYXJrZXI+CgoKPC9kZWZzPgo8c3ZnIHg9IjEzOHB4IiB5PSI2MHB4IiB3aWR0aD0iODYycHgiIGhlaWdodD0iMzAwcHgiPgo8cmVjdCB4PSIwcHgiIHk9IjBweCIgd2lkdGg9Ijg2MnB4IiBoZWlnaHQ9IjMwMHB4IiBmaWxsPSIjZjBmMGYwIiBpZD0ic3RhdGVtYXAtMC1oaWdobGlnaHQiIC8+CjxnIGlkPSJzdGF0ZW1hcC0wIiB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAxIDAgMCkiPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi0wLWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSAyLTAtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTItMC10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDItMC10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTEtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDItMS1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTItMS10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDItMS10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMzAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTItZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDItMi1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSI0MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTItMi10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDItMi10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iNTAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTMtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDItMy1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSI2MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTItMy10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDItMy10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iNzAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTQtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDItNC1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSI4MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTItNC10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDItNC10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iOTAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTUtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDItNS1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxMDAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTUtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSAyLTUtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjExMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTMtMC1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgMy0wLWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjEyMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTMtMC10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDMtMC10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTMwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMy0xLWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSAzLTEtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTQwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMy0xLXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMy0xLXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxNTAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0zLTMtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDMtMy1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxNjAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0zLTMtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSAzLTMtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjE3MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTMtNC1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgMy00LWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjE4MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTMtNC10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDMtNC10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTkwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtNC00LWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSA0LTQtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMjAwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtNC00LXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgNC00LXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyMTAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC01LTQtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDUtNC1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyMjAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC01LTQtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSA1LTQtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjIzMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTYtNC1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgNi00LWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjI0MCIgd2lkdGg9IjIzNy41NjQwNDM5NjgyNTM5NCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDEyOCwgMTI4LCAxMjgpIiAvPgo8cmVjdCB4PSIyMzcuMTY0MDQzOTY4MjUzOTQiIHk9IjI0MCIgd2lkdGg9IjQuOTYwODQ2NTYwODQ2NTYxIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDEpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8cmVjdCB4PSIyNDEuNzI0ODkwNTI5MTAwNTIiIHk9IjI0MCIgd2lkdGg9IjQuOTYwODQ2NTYwODQ2NTYxIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDIpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDApIiAvPgo8cmVjdCB4PSIyNDYuMjg1NzM3MDg5OTQ3MDgiIHk9IjI0MCIgd2lkdGg9IjMyLjMyNTkyNTkyNTkyNTkyIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDMpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8cmVjdCB4PSIyNzguMjExNjYzMDE1ODczIiB5PSIyNDAiIHdpZHRoPSI0Ljk2MDg0NjU2MDg0NjU2MSIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA0KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAwKSIgLz4KPHJlY3QgeD0iMjgyLjc3MjUwOTU3NjcxOTUzIiB5PSIyNDAiIHdpZHRoPSI0Ljk2MDg0NjU2MDg0NjU2MSIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA1KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMTY1LCAwKSIgLz4KPHJlY3QgeD0iMjg3LjMzMzM1NjEzNzU2NjEiIHk9IjI0MCIgd2lkdGg9IjExNC40MjExNjQwMjExNjQwMiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA2KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAwKSIgLz4KPHJlY3QgeD0iNDAxLjM1NDUyMDE1ODczMDE3IiB5PSIyNDAiIHdpZHRoPSIxNC4wODI1Mzk2ODI1Mzk2ODIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgNykiIHN0eWxlPSJmaWxsOnJnYigxMjgsIDEyOCwgMTI4KSIgLz4KPHJlY3QgeD0iNDE1LjAzNzA1OTg0MTI2OTg3IiB5PSIyNDAiIHdpZHRoPSI0Ljk2MDg0NjU2MDg0NjU2MSIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA4KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMTY1LCAwKSIgLz4KPHJlY3QgeD0iNDE5LjU5NzkwNjQwMjExNjQiIHk9IjI0MCIgd2lkdGg9IjQuOTYwODQ2NTYwODQ2NTYxIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDkpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDApIiAvPgo8cmVjdCB4PSI0MjQuMTU4NzUyOTYyOTYzIiB5PSIyNDAiIHdpZHRoPSIxMTQuNDIxMTY0MDIxMTY0MDIiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMTApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8cmVjdCB4PSI1MzguMTc5OTE2OTg0MTI3IiB5PSIyNDAiIHdpZHRoPSIzMjQuMjIwMDgzMDE1ODczIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDExKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC02LTQtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSA2LTQtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjI1MCIgd2lkdGg9IjIzNy41NjQwNDM5NjgyNTM5NCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDAsIDAsIDApIiAvPgo8cmVjdCB4PSIyMzcuMTY0MDQzOTY4MjUzOTQiIHk9IjI1MCIgd2lkdGg9IjE2NC41OTA0NzYxOTA0NzYxOCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAxKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8cmVjdCB4PSI0MDEuMzU0NTIwMTU4NzMwMTciIHk9IjI1MCIgd2lkdGg9IjE0LjA4MjUzOTY4MjUzOTY4MiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAyKSIgc3R5bGU9ImZpbGw6cmdiKDAsIDAsIDApIiAvPgo8cmVjdCB4PSI0MTUuMDM3MDU5ODQxMjY5ODciIHk9IjI1MCIgd2lkdGg9IjQ0Ny4zNjI5NDAxNTg3MzAxNyIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAzKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC02LTUtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDYtNS1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyNjAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC02LTUtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSA2LTUtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjI3MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTctNC1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgNy00LWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjI4MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTctNC10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDctNC10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMjkwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8L2c+CjxkZWZzPgo8c2NyaXB0IHR5cGU9ImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQiPjwhW0NEQVRBWwpnX3N0YXRlbWFwc1swXSA9IHsKICAib2Zmc2V0IjogMCwKICAic3RhdGVzIjogWwogICAgewogICAgICAibmFtZSI6ICJzdGFibGUtcmVsZWFzZSIsCiAgICAgICJ2YWx1ZSI6IDAsCiAgICAgICJjb2xvciI6ICJ3aGl0ZSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXJlbC10by1wcmUiLAogICAgICAidmFsdWUiOiAxLAogICAgICAiY29sb3IiOiAiYmx1ZSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXJlbC10by1yZWwiLAogICAgICAidmFsdWUiOiAyLAogICAgICAiY29sb3IiOiAiYnJvd24iCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJlbWl0LXJlbGVhc2UiLAogICAgICAidmFsdWUiOiAzLAogICAgICAiY29sb3IiOiAid2hpdGUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJzdGFibGUtcHJlc3MiLAogICAgICAidmFsdWUiOiA0LAogICAgICAiY29sb3IiOiAiZ3JleSIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXByZS10by1wcmUiLAogICAgICAidmFsdWUiOiA1LAogICAgICAiY29sb3IiOiAieWVsbG93IgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiYm91bmNpbmctcHJlLXRvLXJlbCIsCiAgICAgICJ2YWx1ZSI6IDYsCiAgICAgICJjb2xvciI6ICJvcmFuZ2UiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJlbWl0LXByZXNzIiwKICAgICAgInZhbHVlIjogNywKICAgICAgImNvbG9yIjogImJsYWNrIgogICAgfQogIF0sCiAgImVudGl0eUtpbmQiOiAiRW50aXR5IiwKICAidGl0bGUiOiAia2V5Ym9hcmQgZGVib3VuY2luZyIsCiJkYXRhIjogeyAKIjUtNC10cmlnZ2VyIjogWwp7ICJ0IjogNTQ0ODUyOTk5OTk5LCAicyI6IDN9Cl0KLCI2LTQtZGVib3VuY2VyIjogWwp7ICJ0IjogNTQ0ODUyOTk5OTk5LCAicyI6IDR9LAp7ICJ0IjogNTQ0ODYzNDAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQ0ODYzNjAwMDAwLCAicyI6IDV9LAp7ICJ0IjogNTQ0ODYzODAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQ0ODY1MjAwMDAwLCAicyI6IDV9LAp7ICJ0IjogNTQ0ODY1NDAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQ0ODY1NjAwMDAwLCAicyI6IDV9LAp7ICJ0IjogNTQ0ODcwNjAwMDAwLCAicyI6IDR9LAp7ICJ0IjogNTQ0ODcxMjAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQ0ODcxNDAwMDAwLCAicyI6IDV9LAp7ICJ0IjogNTQ0ODcxNjAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTQ0ODc2NjAwMDAwLCAicyI6IDB9Cl0KLCIyLTAtZGVib3VuY2VyIjogWwp7ICJ0IjogNTQ0ODUyOTk5OTk5LCAicyI6IDB9Cl0KLCI0LTQtZGVib3VuY2VyIjogWwp7ICJ0IjogNTQ0ODUyOTk5OTk5LCAicyI6IDB9Cl0KLCI3LTQtdHJpZ2dlciI6IFsKeyAidCI6IDU0NDg1Mjk5OTk5OSwgInMiOiAzfQpdCiwiMy0zLWRlYm91bmNlciI6IFsKeyAidCI6IDU0NDg1Mjk5OTk5OSwgInMiOiAwfQpdCiwiNy00LWRlYm91bmNlciI6IFsKeyAidCI6IDU0NDg1Mjk5OTk5OSwgInMiOiAwfQpdCiwiMy0zLXRyaWdnZXIiOiBbCnsgInQiOiA1NDQ4NTI5OTk5OTksICJzIjogM30KXQosIjItMS1kZWJvdW5jZXIiOiBbCnsgInQiOiA1NDQ4NTI5OTk5OTksICJzIjogMH0KXQosIjItMi10cmlnZ2VyIjogWwp7ICJ0IjogNTQ0ODUyOTk5OTk5LCAicyI6IDN9Cl0KLCIyLTQtdHJpZ2dlciI6IFsKeyAidCI6IDU0NDg1Mjk5OTk5OSwgInMiOiAzfQpdCiwiNC00LXRyaWdnZXIiOiBbCnsgInQiOiA1NDQ4NTI5OTk5OTksICJzIjogM30KXQosIjItMy10cmlnZ2VyIjogWwp7ICJ0IjogNTQ0ODUyOTk5OTk5LCAicyI6IDN9Cl0KLCIzLTAtdHJpZ2dlciI6IFsKeyAidCI6IDU0NDg1Mjk5OTk5OSwgInMiOiAzfQpdCiwiMi0zLWRlYm91bmNlciI6IFsKeyAidCI6IDU0NDg1Mjk5OTk5OSwgInMiOiAwfQpdCiwiMi0xLXRyaWdnZXIiOiBbCnsgInQiOiA1NDQ4NTI5OTk5OTksICJzIjogM30KXQosIjItMi1kZWJvdW5jZXIiOiBbCnsgInQiOiA1NDQ4NTI5OTk5OTksICJzIjogMH0KXQosIjUtNC1kZWJvdW5jZXIiOiBbCnsgInQiOiA1NDQ4NTI5OTk5OTksICJzIjogMH0KXQosIjYtNC10cmlnZ2VyIjogWwp7ICJ0IjogNTQ0ODUyOTk5OTk5LCAicyI6IDd9LAp7ICJ0IjogNTQ0ODYzNDAwMDAwLCAicyI6IDN9LAp7ICJ0IjogNTQ0ODcwNjAwMDAwLCAicyI6IDd9LAp7ICJ0IjogNTQ0ODcxMjAwMDAwLCAicyI6IDN9Cl0KLCIzLTEtZGVib3VuY2VyIjogWwp7ICJ0IjogNTQ0ODUyOTk5OTk5LCAicyI6IDB9Cl0KLCIzLTAtZGVib3VuY2VyIjogWwp7ICJ0IjogNTQ0ODUyOTk5OTk5LCAicyI6IDB9Cl0KLCIzLTEtdHJpZ2dlciI6IFsKeyAidCI6IDU0NDg1Mjk5OTk5OSwgInMiOiAzfQpdCiwiMy00LWRlYm91bmNlciI6IFsKeyAidCI6IDU0NDg1Mjk5OTk5OSwgInMiOiAwfQpdCiwiMy00LXRyaWdnZXIiOiBbCnsgInQiOiA1NDQ4NTI5OTk5OTksICJzIjogM30KXQosIjItNS10cmlnZ2VyIjogWwp7ICJ0IjogNTQ0ODUyOTk5OTk5LCAicyI6IDN9Cl0KLCI2LTUtZGVib3VuY2VyIjogWwp7ICJ0IjogNTQ0ODUyOTk5OTk5LCAicyI6IDB9Cl0KLCIyLTAtdHJpZ2dlciI6IFsKeyAidCI6IDU0NDg1Mjk5OTk5OSwgInMiOiAzfQpdCiwiMi00LWRlYm91bmNlciI6IFsKeyAidCI6IDU0NDg1Mjk5OTk5OSwgInMiOiAwfQpdCiwiMi01LWRlYm91bmNlciI6IFsKeyAidCI6IDU0NDg1Mjk5OTk5OSwgInMiOiAwfQpdCiwiNi01LXRyaWdnZXIiOiBbCnsgInQiOiA1NDQ4NTI5OTk5OTksICJzIjogM30KXQp9LAplbnRpdGllczogewogICAgICIyLTUtdHJpZ2dlciI6IHsgIH0KICAgICwgIjItMC10cmlnZ2VyIjogeyAgfQogICAgLCAiNy00LWRlYm91bmNlciI6IHsgIH0KICAgICwgIjItMi1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICI2LTUtZGVib3VuY2VyIjogeyAgfQogICAgLCAiNC00LXRyaWdnZXIiOiB7ICB9CiAgICAsICIyLTItdHJpZ2dlciI6IHsgIH0KICAgICwgIjMtMy10cmlnZ2VyIjogeyAgfQogICAgLCAiMy0xLWRlYm91bmNlciI6IHsgIH0KICAgICwgIjYtNC1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICI1LTQtZGVib3VuY2VyIjogeyAgfQogICAgLCAiMy0zLWRlYm91bmNlciI6IHsgIH0KICAgICwgIjItNS1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICIyLTEtdHJpZ2dlciI6IHsgIH0KICAgICwgIjMtNC10cmlnZ2VyIjogeyAgfQogICAgLCAiMi0wLWRlYm91bmNlciI6IHsgIH0KICAgICwgIjQtNC1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICIyLTQtZGVib3VuY2VyIjogeyAgfQogICAgLCAiMi0zLWRlYm91bmNlciI6IHsgIH0KICAgICwgIjMtMC10cmlnZ2VyIjogeyAgfQogICAgLCAiMi0xLWRlYm91bmNlciI6IHsgIH0KICAgICwgIjYtNS10cmlnZ2VyIjogeyAgfQogICAgLCAiMy0wLWRlYm91bmNlciI6IHsgIH0KICAgICwgIjYtNC10cmlnZ2VyIjogeyAgfQogICAgLCAiMy00LWRlYm91bmNlciI6IHsgIH0KICAgICwgIjUtNC10cmlnZ2VyIjogeyAgfQogICAgLCAiMi0zLXRyaWdnZXIiOiB7ICB9CiAgICAsICIzLTEtdHJpZ2dlciI6IHsgIH0KICAgICwgIjctNC10cmlnZ2VyIjogeyAgfQogICAgLCAiMi00LXRyaWdnZXIiOiB7ICB9Cn0KfSBdXT48L3NjcmlwdD48L2RlZnM+Cjwvc3ZnPgo8cG9seWdvbiBjbGFzcz0ic3RhdGVtYXAtYm9yZGVyIgogIHBvaW50cz0iMTM4IDYwLCAxMDAwIDYwLCAxMDAwIDM2MCwgMTM4IDM2MCIvPgo8dGV4dCB4PSI1NjkiIHk9IjE2IiBjbGFzcz0ic3RhdGVtYXAtdGl0bGUgc2Fuc3NlcmlmIj5TdGF0ZW1hcCBvZiBrZXlib2FyZCBkZWJvdW5jaW5nIGFjdGl2aXR5PC90ZXh0Pgo8dGV4dCB4PSI1NjkiIHk9IjM0IiBjbGFzcz0ic3RhdGVtYXAtdGltZWxhYmVsIHNhbnNzZXJpZiIgaWQ9InN0YXRlbWFwLXRpbWVsYWJlbCI+PC90ZXh0Pgo8bGluZSB4MT0iMTQ4IiB5MT0iNDAiIHgyPSI5OTAiIHkyPSI0MCIKY2xhc3M9InN0YXRlbWFwLXRpbWVsaW5lIiAvPgo8c3ZnIHg9IjIwcHgiIHk9IjYwcHgiIHdpZHRoPSI4OHB4IiBoZWlnaHQ9IjQ1cHgiPgo8c3ZnIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IgogICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InBhbmNsaWNrKDUwLCAwKSI+PHJlY3QgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiAKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjIycHgiIG9uY2xpY2s9InBhbmNsaWNrKDUwLCAwKSIgY2xhc3M9ImJ1dHRvbiIgLz48c3ZnIHZpZXdCb3g9IjAgMCAxNiAxNiI+DQo8cGF0aCBkPSJNMTAuMjUsMTIuNzVjMC4xOTEsMCwwLjM4NC0wLjA3MiwwLjUyOS0wLjIxOWMwLjI5NC0wLjI5NSwwLjI5NC0wLjc3LDAtMS4wNjJMNy4zMTEsOGwzLjQ2OS0zLjQ2OQ0KCWMwLjI5NC0wLjI5MywwLjI5NC0wLjc2OCwwLTEuMDYyYy0wLjI5My0wLjI5My0wLjc2OC0wLjI5My0xLjA2MSwwbC00LDRjLTAuMjkzLDAuMjkzLTAuMjkzLDAuNzY4LDAsMS4wNjJsNCw0DQoJQzkuODY2LDEyLjY3OCwxMC4wNTksMTIuNzUsMTAuMjUsMTIuNzV6Ii8+DQo8L3N2Zz4NCjwvc3ZnPgo8c3ZnIHg9IjIycHgiIHk9IjBweCIgd2lkdGg9IjIycHgiIGhlaWdodD0iMjJweCIKICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJ6b29tY2xpY2soMS4yNSkiPjxyZWN0IHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjJweCIgCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PSIyMnB4IiBvbmNsaWNrPSJ6b29tY2xpY2soMS4yNSkiIGNsYXNzPSJidXR0b24iIC8+PHN2ZyB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KPHBhdGggZD0iTTEwLjI1MSw2Ljk4OWMwLDAuMjc2LTAuMjI1LDAuNS0wLjUsMC41aC0xLjV2MS41YzAsMC4yNzUtMC4yMjQsMC41LTAuNSwwLjVzLTAuNS0wLjIyNS0wLjUtMC41di0xLjVoLTEuNQ0KCWMtMC4yNzYsMC0wLjUtMC4yMjQtMC41LTAuNXMwLjIyNC0wLjUsMC41LTAuNWgxLjV2LTEuNWMwLTAuMjc2LDAuMjI0LTAuNSwwLjUtMC41czAuNSwwLjIyNCwwLjUsMC41djEuNWgxLjUNCglDMTAuMDI2LDYuNDg5LDEwLjI1MSw2LjcxMywxMC4yNTEsNi45ODl6IE0xNC43NzEsMTQuODU3Yy0wLjI3MywwLjIyNi0wLjY4NSwwLjE3OS0wLjkxOC0wLjEwNGwtMi44NTQtMy4zMzINCgljLTAuOTExLDAuNjY5LTIuMDMxLDEuMDY4LTMuMjQ3LDEuMDY4Yy0zLjAzNywwLTUuNS0yLjQ2My01LjUtNS41czIuNDYzLTUuNSw1LjUtNS41czUuNSwyLjQ2Myw1LjUsNS41DQoJYzAsMS4zNTctMC40OTQsMi41OTgtMS4zMSwzLjU1OGwyLjkwMSwzLjM4N0MxNS4wNzcsMTQuMjE4LDE1LjA0NiwxNC42MzIsMTQuNzcxLDE0Ljg1N3ogTTcuNzUxLDExLjQ4OWMyLjQ4MSwwLDQuNS0yLjAxOSw0LjUtNC41DQoJcy0yLjAxOS00LjUtNC41LTQuNXMtNC41LDIuMDE5LTQuNSw0LjVTNS4yNywxMS40ODksNy43NTEsMTEuNDg5eiIvPg0KPC9zdmc+DQo8L3N2Zz4KPHN2ZyB4PSI0NHB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjIycHgiCiAgICAgICAgICAgICAgICAgICAgb25jbGljaz0iem9vbWNsaWNrKDAuOCkiPjxyZWN0IHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjJweCIgCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PSIyMnB4IiBvbmNsaWNrPSJ6b29tY2xpY2soMC44KSIgY2xhc3M9ImJ1dHRvbiIgLz48c3ZnIHZpZXdCb3g9IjAgMCAxNiAxNiI+DQo8cGF0aCBkPSJNMTAuMjUxLDYuOTg5YzAsMC4yNzYtMC4yMjUsMC41LTAuNSwwLjVoLTRjLTAuMjc2LDAtMC41LTAuMjI0LTAuNS0wLjVsMCwwYzAtMC4yNzYsMC4yMjQtMC41LDAuNS0wLjVoNA0KCUMxMC4wMjYsNi40ODksMTAuMjUxLDYuNzEzLDEwLjI1MSw2Ljk4OUwxMC4yNTEsNi45ODl6IE0xNC43NzEsMTQuODU3Yy0wLjI3MywwLjIyNi0wLjY4NSwwLjE3OS0wLjkxOC0wLjEwNGwtMi44NTQtMy4zMzINCgljLTAuOTExLDAuNjY5LTIuMDMxLDEuMDY4LTMuMjQ3LDEuMDY4Yy0zLjAzNywwLTUuNS0yLjQ2My01LjUtNS41czIuNDYzLTUuNSw1LjUtNS41czUuNSwyLjQ2Myw1LjUsNS41DQoJYzAsMS4zNTctMC40OTQsMi41OTgtMS4zMSwzLjU1OGwyLjkwMSwzLjM4N0MxNS4wNzcsMTQuMjE4LDE1LjA0NiwxNC42MzIsMTQuNzcxLDE0Ljg1N3ogTTcuNzUxLDExLjQ4OWMyLjQ4MSwwLDQuNS0yLjAxOSw0LjUtNC41DQoJcy0yLjAxOS00LjUtNC41LTQuNXMtNC41LDIuMDE5LTQuNSw0LjVTNS4yNywxMS40ODksNy43NTEsMTEuNDg5eiIvPg0KPC9zdmc+DQo8L3N2Zz4KPHN2ZyB4PSI2NnB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjIycHgiCiAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icGFuY2xpY2soLTUwLCAwKSI+PHJlY3QgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiAKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjIycHgiIG9uY2xpY2s9InBhbmNsaWNrKC01MCwgMCkiIGNsYXNzPSJidXR0b24iIC8+PHN2ZyB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KPHBhdGggZD0iTTYuMjQ5LDEyLjc1Yy0wLjE5MSwwLTAuMzg0LTAuMDcyLTAuNTI5LTAuMjE5Yy0wLjI5NC0wLjI5NS0wLjI5NC0wLjc3LDAtMS4wNjJMOS4xODgsOEw1LjcyLDQuNTMxDQoJYy0wLjI5NC0wLjI5My0wLjI5NC0wLjc2OCwwLTEuMDYyYzAuMjkzLTAuMjkzLDAuNzY4LTAuMjkzLDEuMDYxLDBsNCw0YzAuMjkzLDAuMjkzLDAuMjkzLDAuNzY4LDAsMS4wNjJsLTQsNA0KCUM2LjYzMywxMi42NzgsNi40NCwxMi43NSw2LjI0OSwxMi43NXoiLz4NCjwvc3ZnPg0KPC9zdmc+Cjwvc3ZnPgo8cmVjdCB4PSIyMCIgeT0iMTA1IiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC0wIiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDApIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+Cjx0ZXh0IHg9IjY0IiB5PSIxMzAiIGNsYXNzPSJzdGF0ZW1hcC1sZWdlbmRsYWJlbCBzYW5zc2VyaWYiPnN0YWJsZS1yZWxlYXNlPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMTQwIiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC0xIiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDEpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMjU1KSIgLz4KPHRleHQgeD0iNjQiIHk9IjE2NSIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZGxhYmVsIHNhbnNzZXJpZiI+Ym91bmNpbmctcmVsLXRvLXByZTwvdGV4dD4KPHJlY3QgeD0iMjAiIHk9IjE3NSIgd2lkdGg9Ijg4IiBoZWlnaHQ9IjE1IiBpZD0ic3RhdGVtYXAtbGVnZW5kLTAtMiIgb25jbGljaz0ibGVnZW5kY2xpY2soZXZ0LCAwLCAyKSIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZCIgc3R5bGU9ImZpbGw6cmdiKDE2NSwgNDIsIDQyKSIgLz4KPHRleHQgeD0iNjQiIHk9IjIwMCIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZGxhYmVsIHNhbnNzZXJpZiI+Ym91bmNpbmctcmVsLXRvLXJlbDwvdGV4dD4KPHJlY3QgeD0iMjAiIHk9IjIxMCIgd2lkdGg9Ijg4IiBoZWlnaHQ9IjE1IiBpZD0ic3RhdGVtYXAtbGVnZW5kLTAtMyIgb25jbGljaz0ibGVnZW5kY2xpY2soZXZ0LCAwLCAzKSIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZCIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8dGV4dCB4PSI2NCIgeT0iMjM1IiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kbGFiZWwgc2Fuc3NlcmlmIj5lbWl0LXJlbGVhc2U8L3RleHQ+CjxyZWN0IHg9IjIwIiB5PSIyNDUiIHdpZHRoPSI4OCIgaGVpZ2h0PSIxNSIgaWQ9InN0YXRlbWFwLWxlZ2VuZC0wLTQiIG9uY2xpY2s9ImxlZ2VuZGNsaWNrKGV2dCwgMCwgNCkiIGNsYXNzPSJzdGF0ZW1hcC1sZWdlbmQiIHN0eWxlPSJmaWxsOnJnYigxMjgsIDEyOCwgMTI4KSIgLz4KPHRleHQgeD0iNjQiIHk9IjI3MCIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZGxhYmVsIHNhbnNzZXJpZiI+c3RhYmxlLXByZXNzPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMjgwIiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC01IiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDUpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDApIiAvPgo8dGV4dCB4PSI2NCIgeT0iMzA1IiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kbGFiZWwgc2Fuc3NlcmlmIj5ib3VuY2luZy1wcmUtdG8tcHJlPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMzE1IiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC02IiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDYpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8dGV4dCB4PSI2NCIgeT0iMzQwIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kbGFiZWwgc2Fuc3NlcmlmIj5ib3VuY2luZy1wcmUtdG8tcmVsPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMzUwIiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC03IiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDcpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMCkiIC8+Cjx0ZXh0IHg9IjY0IiB5PSIzNzUiIGNsYXNzPSJzdGF0ZW1hcC1sZWdlbmRsYWJlbCBzYW5zc2VyaWYiPmVtaXQtcHJlc3M8L3RleHQ+CjxnIGlkPSJzdGF0ZW1hcC10YWdib3giPjwvZz4KPGcgaWQ9InN0YXRlbWFwLXRhZ2JveC1zZWxlY3QiPjwvZz4KPC9zdmc+Cg==" /></p>
<p>So now it's a bit more visible: there's a really short sequence of black,
indicating that the key was reported as pressed, for what looks like right
about half a millisecond (You can get timestsmps by clicking on the 
interactive version if you &quot;view image&quot;).</p>
<p>So looking at it something strikes me: It's yellow, indicating that it's
boucing coming from the pressed state and headed to the pressed state, before
stablizing as pressed agai.
It's not supposed to do that.
It's not supposed to stablize from yellow.
Orange, perhaps, but not yellow.</p>
<p>So that's the problem: The debouncer has decided that it's stable when it's
still bouncing.</p>
<p>Looking at the graph, the signal has stopped bouncing for about 6ms (well
5.6ms because it's from offset 12.6ms to 18.2ms, but I'm rounding) in the
middle of a release event.</p>
<p>So I should probably have the debuncer set to wait for 10ms of stable signal
before marking it stable.</p>
<h1>Squashing the fly with a statemap</h1>
<p>So my debouncer is tuned to 15ms now (there was another instance, later when
reproducing the graphs for the 6th time, because it's fun, that had a gap of
about 12ms, and I want some extra certainty that it won't happen again).</p>
<p>Statemaps are pretty cool.</p>
<p>But I'm not satisfied until I'm able to reproduce the <em>cause</em> without the
effect.
So I make yet another statemap, of course:
<br />
<img src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIj8+CiAgICAgICAgICAgIDwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIKICAgICAgICAgICAgICAgICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPgogICAgICAgICAgICA8c3ZnIHdpZHRoPSIxMjUwIiBoZWlnaHQ9IjQwMCIKICAgICAgICAgICAgICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgICAgICAgICAgICAgIHZlcnNpb249IjEuMSIKICAgICAgICAgICAgICAgIG9ubG9hZD0iaW5pdChldnQpIj4KPGRlZnM+CjxzY3JpcHQgdHlwZT0iYXBwbGljYXRpb24vZWNtYXNjcmlwdCI+PCFbQ0RBVEFbCnZhciBnbG9iYWxzID0gewogICJzdHJpcEhlaWdodCI6IDEwLAogICJsZWdlbmRXaWR0aCI6IDEzOCwKICAidGFnV2lkdGgiOiAyNTAsCiAgInN0cmlwV2lkdGgiOiA4NjIsCiAgImJhY2tncm91bmQiOiAiI2YwZjBmMCIsCiAgInNvcnRieSI6IG51bGwsCiAgInN0YWNrc29ydGJ5IjogbnVsbCwKICAiYmVnaW4iOiA1NTQ3MDAwMDAwMDAsCiAgImVuZCI6IDU1NDg4MDAwMDAwMCwKICAiZW50aXR5UHJlZml4IjogInN0YXRlbWFwLWVudGl0eS0iLAogICJwaXhlbEhlaWdodCI6IDM0MCwKICAicGl4ZWxXaWR0aCI6IDg2MiwKICAidG90YWxIZWlnaHQiOiA0MDAsCiAgInRpbWVXaWR0aCI6IDE4MDAwMDAwMCwKICAibG1hcmdpbiI6IDEzOCwKICAidG1hcmdpbiI6IDYwLAogICJzbWFyZ2luIjogMTAsCiAgInN0YXRlcyI6IFsKICAgIHsKICAgICAgIm5hbWUiOiAic3RhYmxlLXJlbGVhc2UiLAogICAgICAidmFsdWUiOiAwLAogICAgICAiY29sb3IiOiAid2hpdGUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJib3VuY2luZy1yZWwtdG8tcHJlIiwKICAgICAgInZhbHVlIjogMSwKICAgICAgImNvbG9yIjogImJsdWUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJib3VuY2luZy1yZWwtdG8tcmVsIiwKICAgICAgInZhbHVlIjogMiwKICAgICAgImNvbG9yIjogImJyb3duIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiZW1pdC1yZWxlYXNlIiwKICAgICAgInZhbHVlIjogMywKICAgICAgImNvbG9yIjogIndoaXRlIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAic3RhYmxlLXByZXNzIiwKICAgICAgInZhbHVlIjogNCwKICAgICAgImNvbG9yIjogImdyZXkiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJib3VuY2luZy1wcmUtdG8tcHJlIiwKICAgICAgInZhbHVlIjogNSwKICAgICAgImNvbG9yIjogInllbGxvdyIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXByZS10by1yZWwiLAogICAgICAidmFsdWUiOiA2LAogICAgICAiY29sb3IiOiAib3JhbmdlIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiZW1pdC1wcmVzcyIsCiAgICAgICJ2YWx1ZSI6IDcsCiAgICAgICJjb2xvciI6ICJibGFjayIKICAgIH0KICBdLAogICJzdGFydCI6IFsKICAgIDAsCiAgICAzNDY1ODQwMDAwMAogIF0sCiAgImVudGl0eUtpbmQiOiAiRW50aXR5IiwKfQovKgogKiBDb3B5cmlnaHQgMjAxOCwgSm95ZW50LCBJbmMuCiAqLwoKLyoKICogVGhpcyBmaWxlIGlzIGRyb3BwZWQgaW50byB0aGUgZ2VuZXJhdGVkIFNWRyAtLSBhbmQgaWYgeW91J3JlIGxvb2tpbmcgYXQKICogdGhlIGdlbmVyYXRlZCBTVkcgYW5kIHdvbmRlcmluZyB3aGVyZSB0aGlzIGNvbWVzIGZyb20sIGxvb2sgZm9yCiAqIHN0YXRlbWFwLXN2Zy5qcyBpbiBzdGF0ZW1hcCdzIHNyYyBkaXJlY3RvcnkuCiAqLwoKdmFyIGdfdHJhbnNNYXRyaXggPSBbMSwgMCwgMCwgMSwgMCwgMF07CQkvKiB0cmFuc2Zvcm0gb2Ygc3RhdGVtYXAgKi8KdmFyIGdfc3ZnRG9jOwkJCQkJLyogb3VyIFNWRyBkb2N1bWVudCAqLwp2YXIgZ19vZmZzZXQ7CQkJCQkvKiB4IG9mZnNldCBvZiBzdGF0ZW1hcCAqLwp2YXIgZ190aW1lbGFiZWw7CQkJCS8qIGxhYmVsIGZvciB0aW1lIHNwYW5uZWQgKi8KdmFyIGdfdGltZWJhcjsJCQkJCS8qIHRpbWViYXIsIGlmIGFueSAqLwp2YXIgZ19zdGF0ZWJhcjsJCQkJCS8qIHN0YXRlYmFyLCBpZiBhbnkgKi8KdmFyIGdfaGVpZ2h0OwkJCQkJLyogcGl4ZWwgaGVpZ2h0IG9mIHN0YXRlbWFwICovCnZhciBnX3dpZHRoOwkJCQkJLyogcGl4ZWwgd2lkdGggb2Ygc3RhdGVtYXAgKi8KdmFyIGdfc3RhdGVzZWw7CQkJCQkvKiBzdGF0ZSBzZWxlY3Rpb24sIGlmIGFueSAqLwp2YXIgZ190YWdzZWw7CQkJCQkvKiB0YWcgc2VsZWN0aW9uLCBpZiBhbnkgKi8KdmFyIGdfdGFndmFsc2VsOwkJCQkvKiB0YWcgdmFsIHNlbGVjdGlvbiwgaWYgYW55ICovCgp2YXIgZ19zdGF0ZW1hcHMgPSBbXTsJCQkJLyogYXJyYXkgb2Ygc3RhdGVtYXBzICovCgp2YXIgdGltZXVuaXRzID0gZnVuY3Rpb24gKHRpbWV2YWwpCnsKCXZhciBpLCByZW07Cgl2YXIgc3VmZml4ZXMgPSBbICducycsICfOvHMnLCAnbXMnLCAncycgXTsKCglpZiAodGltZXZhbCA9PT0gMCkKCQlyZXR1cm4gKCcwJyk7CgoJZm9yIChpID0gMDsgKHRpbWV2YWwgPiAxMDAwIHx8IHRpbWV2YWwgPCAtMTAwMCkgJiYKCSAgICBpIDwgc3VmZml4ZXMubGVuZ3RoIC0gMTsgaSsrKQoJCXRpbWV2YWwgLz0gMTAwMDsKCglyZW0gPSBNYXRoLmZsb29yKCh0aW1ldmFsIC0gTWF0aC5mbG9vcih0aW1ldmFsKSkgKiAxMDAwKTsKCglyZXR1cm4gKE1hdGguZmxvb3IodGltZXZhbCkgKyAnLicgKwoJICAgIChyZW0gPCAxMDAgPyAnMCcgOiAnJykgKyAocmVtIDwgMTAgPyAnMCcgOiAnJykgKyByZW0gKwoJICAgIHN1ZmZpeGVzW2ldKTsKfTsKCnZhciB0aW1lRnJvbU1hcFggPSBmdW5jdGlvbiAobWFwWCkKewoJdmFyIGJhc2UsIG9mZnM7Cgl2YXIgdGltZVdpZHRoID0gZ2xvYmFscy50aW1lV2lkdGg7CgoJLyoKCSAqIE91ciBiYXNlIChpbiBuYW5vc2Vjb25kcykgaXMgb3VyIFggb2Zmc2V0IGluIHRoZSB0cmFuc2Zvcm1hdGlvbgoJICogbWF0cml4IGFzIGEgcmF0aW8gb2Ygb3VyIHRvdGFsIChzY2FsZWQpIHdpZHRoLCB0aW1lcyBvdXIgdGltZVdpZHRoLgoJICovCgliYXNlID0gKC1nX3RyYW5zTWF0cml4WzRdIC8gKGdfdHJhbnNNYXRyaXhbMF0gKiBnX3dpZHRoKSkgKiB0aW1lV2lkdGg7CgoJLyoKCSAqIE91ciBvZmZzZXQgKGluIG5hbm9zZWNvbmRzKSBpcyB0aGUgWCBvZmZzZXQgd2l0aGluIHRoZSBzdGF0ZW1hcAoJICogYXMgYSByYXRpbyBvZiB0aGUgc3RhdGVtYXAgd2lkdGgsIHRpbWVzIHRoZSBudW1iZXIgb2YgbmFub3NlY29uZHMKCSAqIHZpc2libGUgaW4gdGhlIHN0YXRlbWFwICh3aGljaCBpdHNlbGYgaXMgdGhlIHRpbWVXaWR0aCBkaXZpZGVkIGJ5CgkgKiBvdXIgc2NhbGluZyBmYWN0b3IpLgoJICovCglvZmZzID0gKG1hcFggLyBnX3dpZHRoKSAqICh0aW1lV2lkdGggLyBnX3RyYW5zTWF0cml4WzBdKTsKCglyZXR1cm4gKGJhc2UgKyBvZmZzKTsKfTsKCnZhciB0aW1lVG9NYXBYID0gZnVuY3Rpb24gKHRpbWUpCnsKCS8qCgkgKiBXZSB0YWtlIHRoZSByYXRpbyBvZiB0aGUgdGltZSBvZiB0aGUgdGltZWJhciBvZiB0aGUgdG90YWwgdGltZQoJICogd2lkdGggdGltZXMgdGhlIHdpZHRoIHRpbWVzIHRoZSBzY2FsZSwgYW5kIHRoZW4gYWRkIHRoYXQgdG8gdGhlCgkgKiBYIG9mZnNldCBpbiB0aGUgdHJhbnNmb3JtYXRpb24gbWF0cml4LgoJICovCglyZXR1cm4gKCgodGltZSAvIGdsb2JhbHMudGltZVdpZHRoKSAqIGdfd2lkdGggKgoJICAgIGdfdHJhbnNNYXRyaXhbMF0pICsgZ190cmFuc01hdHJpeFs0XSk7Cn07Cgp2YXIgdGltZVRvVGV4dCA9IGZ1bmN0aW9uICh0aW1lKQp7Cgl2YXIgdDsKCglpZiAoZ190cmFuc01hdHJpeFswXSA9PT0gMSAmJiBnbG9iYWxzLmJlZ2luID09PSAwKSB7CgkJdCA9ICdvZmZzZXQgPSAnICsgdGltZXVuaXRzKHRpbWUpOwoJfSBlbHNlIHsKCQl0ID0gJ29mZnNldCA9ICcgKyB0aW1ldW5pdHModGltZSkgKyAnLCAnICsKCQkgICAgdGltZXVuaXRzKHRpbWUgKyBnbG9iYWxzLmJlZ2luKSArICcgb3ZlcmFsbCc7Cgl9CgoJaWYgKGdsb2JhbHMuc3RhcnQpIHsKCQl2YXIgcyA9IGdsb2JhbHMuc3RhcnRbMF0gKwoJCSAgICAodGltZSArIGdsb2JhbHMuc3RhcnRbMV0pIC8gMTAwMDAwMDAwMDsKCgkJdCArPSAnIChFcG9jaCArICcgKyBNYXRoLmZsb29yKHMpICsgJ3MpJzsKCX0KCglyZXR1cm4gKHQpOwp9OwoKdmFyIHRpbWVTZXRTcGFuTGFiZWwgPSBmdW5jdGlvbiAoKQp7Cgl2YXIgdCA9ICdzcGFuID0gJyArIHRpbWV1bml0cyhnbG9iYWxzLnRpbWVXaWR0aCAvIGdfdHJhbnNNYXRyaXhbMF0pOwoKCWlmIChnX3RyYW5zTWF0cml4WzBdICE9IDEgfHwgZ2xvYmFscy5iZWdpbiAhPT0gMCkKCQl0ICs9ICc7ICcgKyB0aW1lVG9UZXh0KHRpbWVGcm9tTWFwWCgwKSk7CgoJZ190aW1lbGFiZWwudGV4dENvbnRlbnQgPSB0Owp9OwoKdmFyIGluaXRTdGF0ZW1hcCA9IGZ1bmN0aW9uIChzdGF0ZW1hcCwgZWxlbSwgcG9zaXRpb24pCnsKCXZhciBpLCBoaWdobGlnaHQ7Cgl2YXIgcHJlZml4ID0gZ2xvYmFscy5lbnRpdHlQcmVmaXggKyBzdGF0ZW1hcCArICctJzsKCglnX3N0YXRlbWFwc1tzdGF0ZW1hcF0uZWxlbSA9IGVsZW07CglnX3N0YXRlbWFwc1tzdGF0ZW1hcF0ucG9zaXRpb24gPSBwb3NpdGlvbjsKCWdfc3RhdGVtYXBzW3N0YXRlbWFwXS5uZW50aXRpZXMgPSAwOwoKCS8qCgkgKiBJdGVyYXRlIG92ZXIgdGhpcyBzdGF0ZW1hcCdzIGNoaWxkcmVuLCBsb29raW5nIGZvciBlbnRpdGllcy4KCSAqLwoJZm9yIChpID0gMDsgaSA8IGVsZW0uY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewoJCXZhciBpZCA9IGVsZW0uY2hpbGROb2Rlc1tpXS5pZCwgZW50aXR5OwoKCQlpZiAoIWlkIHx8IGlkLmluZGV4T2YocHJlZml4KSAhPT0gMCkKCQkJY29udGludWU7CgoJCWVudGl0eSA9IHsKCQkJbmFtZTogaWQuc3Vic3RyKHByZWZpeC5sZW5ndGgpLAoJCQllbGVtZW50OiBlbGVtLmNoaWxkTm9kZXNbaV0sCgkJCXBvc2l0aW9uOiBwb3NpdGlvbisrLAoJCQlzdGF0ZW1hcDogc3RhdGVtYXAKCQl9OwoKCQllbnRpdHkuZGVzY3JpcHRpb24gPQoJCSAgICBnX3N0YXRlbWFwc1tzdGF0ZW1hcF0uZW50aXRpZXNbZW50aXR5Lm5hbWVdLmRlc2NyaXB0aW9uOwoKCQlnX2VudGl0aWVzW2lkXSA9IGVudGl0eTsKCQlnX3N0YXRlbWFwc1tzdGF0ZW1hcF0ubmVudGl0aWVzKys7Cgl9CgoJLyoKCSAqIERldGVybWluZSB0aGUgbGVnZW5kIHRoYXQgdGhpcyBzdGF0ZW1hcCBpcyB1c2luZy4KCSAqLwoJZm9yIChpID0gc3RhdGVtYXA7IGkgPj0gMDsgaS0tKSB7CgkJaWYgKGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC1sZWdlbmQtJyArIGkgKyAnLTAnKSkgewoJCQlnX3N0YXRlbWFwc1tzdGF0ZW1hcF0ubGVnZW5kID0gaTsKCQkJYnJlYWs7CgkJfQoJfQoKCWNvbnNvbGUuYXNzZXJ0KGkgPj0gMCk7CgoJLyoKCSAqIER5bmFtaWNhbGx5IGNoYW5nZSB0aGUgc3R5bGluZyBvZiB0aGUgaGlnaGxpZ2h0IHJlY3RhbmdsZS4KCSAqLwoJaGlnaGxpZ2h0ID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLScgKwoJICAgIHN0YXRlbWFwICsgJy1oaWdobGlnaHQnKTsKCWhpZ2hsaWdodC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC1oaWdobGlnaHQnKTsKCglyZXR1cm4gKHBvc2l0aW9uKTsKfTsKCnZhciBpbml0ID0gZnVuY3Rpb24gKGV2dCkKewoJdmFyIGkgPSAwLCBwb3NpdGlvbiA9IDAsIHN0YXRlbWFwOwoKCWdfc3ZnRG9jID0gZXZ0LnRhcmdldC5vd25lckRvY3VtZW50OwoJZ19lbnRpdGllcyA9IFtdOwoKCXdoaWxlICgoc3RhdGVtYXAgPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZCgnc3RhdGVtYXAtJyArIGkpKSAhPSBudWxsKQoJCXBvc2l0aW9uID0gaW5pdFN0YXRlbWFwKGkrKywgc3RhdGVtYXAsIHBvc2l0aW9uKTsKCglnX2hlaWdodCA9IGdsb2JhbHMucGl4ZWxIZWlnaHQ7CglnX3dpZHRoID0gZ2xvYmFscy5waXhlbFdpZHRoOwoKCWdfb2Zmc2V0ID0gZXZ0LnRhcmdldC5nZXRBdHRyaWJ1dGVOUyhudWxsLCAnd2lkdGgnKSAtCgkgICAgKGdfd2lkdGggKyBnbG9iYWxzLnRhZ1dpZHRoKTsKCglnX3RpbWVsYWJlbCA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC10aW1lbGFiZWwnKTsKCXRpbWVTZXRTcGFuTGFiZWwoKTsKCglnX3RpbWViYXIgPSB1bmRlZmluZWQ7Cn07Cgp2YXIgZW50aXR5Rm9yRWFjaERhdHVtID0gZnVuY3Rpb24gKGVudGl0eSwgdGltZSwgZXRpbWUsIGZ1bmMpCnsKCXZhciBkYXRhID0gZ19zdGF0ZW1hcHNbZW50aXR5LnN0YXRlbWFwXS5kYXRhW2VudGl0eS5uYW1lXTsKCgl2YXIgaWR4LCBsZW5ndGggPSBkYXRhLmxlbmd0aDsKCXZhciBmbG9vciA9IDA7Cgl2YXIgY2VpbCA9IGxlbmd0aDsKCXZhciBkYXR1bSwgdCwgc3BhbjsKCglpZiAobGVuZ3RoID09PSAwIHx8IChkYXRhWzBdLnQgPiB0aW1lICYmICFldGltZSkpCgkJcmV0dXJuOwoKCWlmIChkYXRhWzBdLnQgPiB0aW1lKSB7CgkJaWR4ID0gMDsKCX0gZWxzZSB7CgkJLyoKCQkgKiBCaW5hcnkgc2VhcmNoIG91ciBkYXRhIHVudGlsIHdlIGZpbmQgYSBkYXR1bSB0aGF0IGNvbnRhaW5zCgkJICogdGhlIHN0YXJ0IG9mIG91ciB0aW1lIHJhbmdlLgoJCSAqLwoJCWZvciAoOzspIHsKCQkJaWR4ID0gZmxvb3IgKyBNYXRoLmZsb29yKChjZWlsIC0gZmxvb3IpIC8gMik7CgoJCQlpZiAoZGF0YVtpZHhdLnQgPiB0aW1lKSB7CgkJCQljZWlsID0gaWR4OwoJCQkJY29udGludWU7CgkJCX0KCgkJCWlmIChpZHggKyAxID09IGxlbmd0aCB8fCBkYXRhW2lkeCArIDFdLnQgPiB0aW1lKQoJCQkJYnJlYWs7CgoJCQlmbG9vciA9IGlkeDsKCQl9Cgl9CgoJLyoKCSAqIElmIHdlIGRvbid0IGhhdmUgYSBzcGVjaWZpZWQgZXRpbWUsIHdlIGhhdmUgZm91bmQgdGhlIGRhdHVtIHRoYXQKCSAqIGNvbnRhaW5zIHRoZSB0aW1lOyBqdXN0IGNhbGwgb3VyIGZ1bmN0aW9uIGFuZCByZXR1cm4uCgkgKi8KCWlmICghZXRpbWUpIHsKCQlmdW5jKGRhdGFbaWR4XSwgaWR4LCAxKTsKCQlyZXR1cm47Cgl9CgoJLyoKCSAqIE5vdyB3ZSdyZSBnb2luZyB0byBpdGVyYXRlIGZvcndhcmQsIGNhbGxpbmcgb3VyIGZ1bmN0aW9uIHVudGlsIHdlCgkgKiBnZXQgcGFzdCBvdXIgc3BlY2lmaWVkIGV0aW1lLgoJICovCglmb3IgKDsgaWR4IDwgbGVuZ3RoOyBpZHgrKykgewoJCWRhdHVtID0gZGF0YVtpZHhdOwoKCQlpZiAoZGF0dW0udCA+IGV0aW1lKQoJCQlyZXR1cm47CgoJCWlmICgodCA9IGRhdHVtLnQpIDwgdGltZSkKCQkJdCA9IHRpbWU7CgoJCWlmIChpZHggKyAxID09IGxlbmd0aCB8fCBkYXRhW2lkeCArIDFdLnQgPiBldGltZSkgewoJCQkvKgoJCQkgKiBUaGlzIGRhdHVtIGNvbnRhaW5zIHRoZSBlbmQgb2YgdGhlIHJhbmdlOyBvdXIgc3BhbgoJCQkgKiBpcyBvdXIgZXRpbWUgbWludXMgdGhpcyBkYXR1bSdzIHN0YXJ0IHRpbWUgKG9yIG91cgoJCQkgKiBzcGVjaWZpZWQgdGltZSwgd2hpY2hldmVyIGlzIGdyZWF0ZXIpLgoJCQkgKi8KCQkJc3BhbiA9IGV0aW1lIC0gdDsKCQl9IGVsc2UgewoJCQkvKgoJCQkgKiBUaGUgZW5kIG9mIHRoZSBkYXR1bSBpcyBjb3ZlcmVkIGJ5IHRoZSByYW5nZTsgb3VyCgkJCSAqIHNwYW4gaXMgdGhlIHRpbWUgd2lkdGggb2YgdGhlIGRhdHVtLgoJCQkgKi8KCQkJc3BhbiA9IGRhdGFbaWR4ICsgMV0udCAtIHQ7CgkJfQoKCQlmdW5jKGRhdHVtLCBpZHgsIHNwYW4pOwoJfQp9OwoKdmFyIGVudGl0eURhdHVtID0gZnVuY3Rpb24gKGVudGl0eSwgaWR4KQp7Cgl2YXIgZGF0YSA9IGdfc3RhdGVtYXBzW2VudGl0eS5zdGF0ZW1hcF0uZGF0YVtlbnRpdHkubmFtZV07Cgl2YXIgZGF0dW0gPSBkYXRhW2lkeF07Cgl2YXIgcnZhbCA9IHsgdGltZTogZGF0dW0udCB9OwoKCWlmIChkYXR1bS5zIGluc3RhbmNlb2YgT2JqZWN0KSB7CgkJcnZhbC5zdGF0ZXMgPSBkYXR1bS5zOwoJfSBlbHNlIHsKCQlydmFsLnN0YXRlID0gZGF0dW0uczsKCX0KCglpZiAoaWR4ICsgMSA8IGRhdGEubGVuZ3RoKSB7CgkJcnZhbC5ldGltZSA9IGRhdGFbaWR4ICsgMV0udDsKCX0gZWxzZSB7CgkJcnZhbC5ldGltZSA9IGdsb2JhbHMudGltZVdpZHRoICsgZ2xvYmFscy5iZWdpbjsKCX0KCglyZXR1cm4gKHJ2YWwpOwp9OwoKdmFyIGVudGl0eUJyZWFrZG93biA9IGZ1bmN0aW9uIChlbnRpdHksIHRpbWUsIGV0aW1lKQp7Cgl2YXIgZGF0YSA9IGdfc3RhdGVtYXBzW2VudGl0eS5zdGF0ZW1hcF0uZGF0YVtlbnRpdHkubmFtZV07Cgl2YXIgcnZhbCA9IHt9OwoKCXZhciBpZHgsIGxlbmd0aCA9IGRhdGEubGVuZ3RoOwoJdmFyIGZsb29yID0gMDsKCXZhciBjZWlsID0gbGVuZ3RoOwoJdmFyIGRhdHVtLCB0LCBzcGFuLCBzdGF0ZTsKCgl0aW1lICs9IGdfc3RhdGVtYXBzW2VudGl0eS5zdGF0ZW1hcF0ub2Zmc2V0OwoKCWlmIChsZW5ndGggPT09IDAgfHwgZGF0YVswXS50ID4gdGltZSkKCQlyZXR1cm4gKHt9KTsKCgkvKgoJICogQmluYXJ5IHNlYXJjaCBvdXIgZGF0YSB1bnRpbCB3ZSBmaW5kIGEgZGF0dW0gdGhhdCBjb250YWlucyB0aGUKCSAqIHNwZWNpZmllZCB0aW1lLgoJICovCglmb3IgKDs7KSB7CgkJaWR4ID0gZmxvb3IgKyBNYXRoLmZsb29yKChjZWlsIC0gZmxvb3IpIC8gMik7CgoJCWlmIChkYXRhW2lkeF0udCA+IHRpbWUpIHsKCQkJY2VpbCA9IGlkeDsKCQkJY29udGludWU7CgkJfQoKCQlpZiAoaWR4ICsgMSA9PSBsZW5ndGggfHwgZGF0YVtpZHggKyAxXS50ID4gdGltZSkKCQkJYnJlYWs7CgoJCWZsb29yID0gaWR4OwoJfQoKCS8qCgkgKiBJZiB3ZSBkb24ndCBoYXZlIGEgc3BlY2lmaWVkIGV0aW1lLCB3ZSB3YW50IHRvIGp1c3QgcmV0dXJuIHRoZSBzdGF0ZQoJICogYnJlYWtkb3duIGF0IHRoZSBzcGVjaWZpZWQgdGltZS4KCSAqLwoJaWYgKCFldGltZSkgewoJCWRhdHVtID0gZGF0YVtpZHhdOwoKCQlpZiAoZGF0dW0ucyBpbnN0YW5jZW9mIE9iamVjdCkKCQkJcmV0dXJuIChkYXR1bS5zKTsKCgkJcnZhbFtkYXR1bS5zXSA9IDEuMDsKCgkJcmV0dXJuIChydmFsKTsKCX0KCgkvKgoJICogTm93IHdlJ3JlIGdvaW5nIHRvIGl0ZXJhdGUgZm9yd2FyZCB1bnRpbCB3ZSBnZXQgcGFzdCBvdXIgc3BlY2lmaWVkCgkgKiBldGltZS4KCSAqLwoJZm9yICg7IGlkeCA8IGxlbmd0aDsgaWR4KyspIHsKCQlkYXR1bSA9IGRhdGFbaWR4XTsKCgkJaWYgKGRhdHVtLnQgPiBldGltZSkKCQkJYnJlYWs7CgoJCWlmICgodCA9IGRhdHVtLnQpIDwgdGltZSkKCQkJdCA9IHRpbWU7CgoJCWlmIChpZHggKyAxID09IGxlbmd0aCB8fCBkYXRhW2lkeCArIDFdLnQgPiBldGltZSkgewoJCQkvKgoJCQkgKiBUaGlzIGRhdHVtIGNvbnRhaW5zIHRoZSBlbmQgb2YgdGhlIHJhbmdlOyBvdXIgc3BhbgoJCQkgKiBpcyBvdXIgZXRpbWUgbWludXMgdGhpcyBkYXR1bSdzIHN0YXJ0IHRpbWUgKG9yIG91cgoJCQkgKiBzcGVjaWZpZWQgdGltZSwgd2hpY2hldmVyIGlzIGdyZWF0ZXIpLgoJCQkgKi8KCQkJc3BhbiA9IGV0aW1lIC0gdDsKCQl9IGVsc2UgewoJCQkvKgoJCQkgKiBUaGUgZW5kIG9mIHRoZSBkYXR1bSBpcyBjb3ZlcmVkIGJ5IHRoZSByYW5nZTsgb3VyCgkJCSAqIHNwYW4gaXMgdGhlIHRpbWUgd2lkdGggb2YgdGhlIGRhdHVtLgoJCQkgKi8KCQkJc3BhbiA9IGRhdGFbaWR4ICsgMV0udCAtIHQ7CgkJfQoKCQkvKgoJCSAqIEV4cHJlc3Mgb3VyIHNwYW4gYXMgYSByYXRpbyBvZiB0aGUgb3ZlcmFsbCB0aW1lLgoJCSAqLwoJCXNwYW4gLz0gKGV0aW1lIC0gdGltZSk7CgoJCWlmIChkYXR1bS5zIGluc3RhbmNlb2YgT2JqZWN0KSB7CgkJCWZvciAoc3RhdGUgaW4gZGF0dW0ucykgewoJCQkJaWYgKCFydmFsLmhhc093blByb3BlcnR5KHN0YXRlKSkKCQkJCQlydmFsW3N0YXRlXSA9IDA7CgoJCQkJcnZhbFtzdGF0ZV0gKz0gKGRhdHVtW3N0YXRlXSAqIHNwYW4pOwoJCQl9CgkJfSBlbHNlIHsKCQkJc3RhdGUgPSBkYXR1bS5zOwoKCQkJaWYgKCFydmFsLmhhc093blByb3BlcnR5KHN0YXRlKSkKCQkJCXJ2YWxbc3RhdGVdID0gMDsKCgkJCXJ2YWxbc3RhdGVdICs9IHNwYW47CgkJfQoJfQoKCXJldHVybiAocnZhbCk7Cn07Cgp2YXIgc3RhdGViYXJDcmVhdGVCYXIgPSBmdW5jdGlvbiAoc3RhdGViYXIsIHgxLCB5MSwgeDIsIHkyKQp7Cgl2YXIgcGFyZW50ID0gc3RhdGViYXIucGFyZW50OwoKCXZhciBiYXIgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMocGFyZW50Lm5hbWVzcGFjZVVSSSwgJ2xpbmUnKTsKCWJhci5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC1zdGF0ZWJhcicpOwoJYmFyLngxLmJhc2VWYWwudmFsdWUgPSB4MTsKCWJhci55MS5iYXNlVmFsLnZhbHVlID0geTE7CgliYXIueDIuYmFzZVZhbC52YWx1ZSA9IHgyOwoJYmFyLnkyLmJhc2VWYWwudmFsdWUgPSB5MjsKCXBhcmVudC5hcHBlbmRDaGlsZChiYXIpOwoJc3RhdGViYXIuYmFycy5wdXNoKGJhcik7Cn07Cgp2YXIgc3RhdGViYXJDcmVhdGUgPSBmdW5jdGlvbiAoZWxlbSwgaWR4KQp7Cgl2YXIgcGFyZW50ID0gZ19zdGF0ZW1hcHNbMF0uZWxlbS5wYXJlbnROb2RlLnBhcmVudE5vZGU7Cgl2YXIgc3RhdGViYXIgPSB7IHBhcmVudDogcGFyZW50LCBoaWRkZW46IGZhbHNlIH07Cgl2YXIgZW50aXR5ID0gZ19lbnRpdGllc1tlbGVtLnBhcmVudE5vZGUuaWRdOwoJdmFyIHN0YXRlbWFwID0gZ19zdGF0ZW1hcHNbZW50aXR5LnN0YXRlbWFwXTsKCXZhciBzdGF0ZXMgPSBzdGF0ZW1hcC5zdGF0ZXM7Cgl2YXIgZGF0dW0gPSBlbnRpdHlEYXR1bShlbnRpdHksIGlkeCk7Cgl2YXIgcG9zID0gKGVudGl0eS5wb3NpdGlvbiAqIGdsb2JhbHMuc3RyaXBIZWlnaHQpICsKCSAgICAoZW50aXR5LnN0YXRlbWFwICogZ2xvYmFscy5zbWFyZ2luKTsKCXZhciB4ID0gZ2xvYmFscy5sbWFyZ2luIC0gMjsKCXZhciB5ID0gZ2xvYmFscy50bWFyZ2luICsgcG9zOwoJdmFyIGVsYm93ID0geyB4OiA4LCB5OiAxMCB9OwoJdmFyIG51ZGdlID0geyB4OiAzLCB5OiAyIH07Cgl2YXIgZGlyZWN0aW9uID0gMSwgYW5jaG9yOwoJdmFyIGFuY2hvcnMgPSBbICdzdGFydCcsICdlbmQnIF07Cgl2YXIgdGV4dDsKCglpZiAocG9zIDwgKGdsb2JhbHMudG90YWxIZWlnaHQgLSBnbG9iYWxzLnRtYXJnaW4pIC8gMikgewoJCWRpcmVjdGlvbiA9IDE7CgkJYW5jaG9yID0gMTsKCX0gZWxzZSB7CgkJZGlyZWN0aW9uID0gLTE7CgkJYW5jaG9yID0gMDsKCX0KCglzdGF0ZWJhci5iYXJzID0gW107CgoJLyoKCSAqIFdlIGhhdmUgdGhyZWUgYmFycyB0byBkcmF3OiAgb3VyIGJhciB0aGF0IHJ1bnMgdGhlIGhlaWdodCBvZiB0aGUKCSAqIHN0cmlwLCBmb2xsb3dlZCBieSBvdXIgZWxib3cuCgkgKi8KCXN0YXRlYmFyQ3JlYXRlQmFyKHN0YXRlYmFyLCB4LCB5LCB4LCB5ICsgZ2xvYmFscy5zdHJpcEhlaWdodCk7CgoJeSArPSAwLjUgKiBnbG9iYWxzLnN0cmlwSGVpZ2h0OwoJc3RhdGViYXJDcmVhdGVCYXIoc3RhdGViYXIsIHggLSBlbGJvdy54LCB5LCB4LCB5KTsKCgl4IC09IGVsYm93Lng7CglzdGF0ZWJhckNyZWF0ZUJhcihzdGF0ZWJhciwgeCwgeSwgeCwgeSArIChlbGJvdy55ICogZGlyZWN0aW9uKSk7CgoJLyoKCSAqIE5vdyBjcmVhdGUgdGhlIHRleHQgYXQgdGhlIGVuZCBvZiB0aGUgZWxib3cuCgkgKi8KCXkgKz0gKGVsYm93LnkgKyBudWRnZS55KSAqIGRpcmVjdGlvbjsKCXggKz0gbnVkZ2UueDsKCXRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMocGFyZW50Lm5hbWVzcGFjZVVSSSwgJ3RleHQnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXN0YXRldGV4dCcpOwoKCXZhciB0ID0gc3RhdGVtYXAuZW50aXR5S2luZCArICcgJyArIGVudGl0eS5uYW1lOwoKCWlmIChlbnRpdHkuZGVzY3JpcHRpb24pCgkJdCArPSAnICgnICsgZW50aXR5LmRlc2NyaXB0aW9uICsgJyknOwoKCWlmIChkYXR1bS5oYXNPd25Qcm9wZXJ0eSgnc3RhdGUnKSkgewoJCXQgKz0gJywgJyArIHN0YXRlc1tkYXR1bS5zdGF0ZV0ubmFtZTsKCX0gZWxzZSB7CgkJdmFyIGksIHRvdGFsID0gMCwgbWF4ID0gMCwgbWF4c3RhdGU7CgoJCWZvciAoaSBpbiBkYXR1bS5zdGF0ZXMpIHsKCQkJdG90YWwgKz0gZGF0dW0uc3RhdGVzW2ldOwoKCQkJaWYgKGRhdHVtLnN0YXRlc1tpXSA+IG1heCkgewoJCQkJbWF4c3RhdGUgPSBpOwoJCQkJbWF4ID0gZGF0dW0uc3RhdGVzW2ldOwoJCQl9CgkJfQoKCQl0ICs9ICcsICcgKyBNYXRoLmZsb29yKChkYXR1bS5zdGF0ZXNbbWF4c3RhdGVdIC8gdG90YWwpICogMTAwKTsKCQl0ICs9ICclICcgKyBzdGF0ZXNbbWF4c3RhdGVdLm5hbWU7Cgl9CgoJdCArPSAnIGF0ICcgKyB0aW1ldW5pdHMoZGF0dW0udGltZSk7Cgl0ICs9ICcgZm9yICcgKyB0aW1ldW5pdHMoZGF0dW0uZXRpbWUgLSBkYXR1bS50aW1lKTsKCgl0ZXh0LmFwcGVuZENoaWxkKGdfc3ZnRG9jLmNyZWF0ZVRleHROb2RlKHQpKTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnLCB4KTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3knLCB5KTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3RyYW5zZm9ybScsCgkgICAgJ3JvdGF0ZSgyNzAsJyArIHggKyAnLCcgKyB5ICsgJyknKTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3RleHQtYW5jaG9yJywgYW5jaG9yc1thbmNob3JdKTsKCXRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CgkJc3RhdGViYXJSZW1vdmUoc3RhdGViYXIpOwoJCXN0YXRlc2VsVXBkYXRlKCk7Cgl9KTsKCglwYXJlbnQuYXBwZW5kQ2hpbGQodGV4dCk7CglzdGF0ZWJhci5iYXJzLnB1c2godGV4dCk7CgoJc3RhdGViYXIuZW50aXR5ID0gZW50aXR5OwoKCWlmIChnX3N0YXRlbWFwcy5sZW5ndGggPT0gMSkKCQlyZXR1cm4gKHN0YXRlYmFyKTsKCgkvKgoJICogSWYgd2UgaGF2ZSBtb3JlIHRoYW4gb25lIHN0YXRlbWFwLCB3ZSB3YW50IHRvIGFkZCBhIGJhciB0byB0aGUgcmlnaHQKCSAqIHNpZGUgdG8gaW5kaWNhdGUgd2hpY2ggc3RhdGVtYXAgdGhpcyBpcy4KCSAqLwoJdmFyIHBvcyA9IChzdGF0ZW1hcC5wb3NpdGlvbiAqIGdsb2JhbHMuc3RyaXBIZWlnaHQpICsKCSAgICAoZW50aXR5LnN0YXRlbWFwICogZ2xvYmFscy5zbWFyZ2luKTsKCgl4ID0gZ2xvYmFscy5sbWFyZ2luICsgZ193aWR0aCArIDI7Cgl5ID0gZ2xvYmFscy50bWFyZ2luICsgcG9zOwoKCXZhciBwb3MgPSAoc3RhdGVtYXAucG9zaXRpb24gKiBnbG9iYWxzLnN0cmlwSGVpZ2h0KSArCgkgICAgKGVudGl0eS5zdGF0ZW1hcCAqIGdsb2JhbHMuc21hcmdpbik7CgoJdmFyIGhlaWdodCA9IHN0YXRlbWFwLm5lbnRpdGllcyAqIGdsb2JhbHMuc3RyaXBIZWlnaHQ7CgoJc3RhdGViYXJDcmVhdGVCYXIoc3RhdGViYXIsIHgsIHksIHgsIHkgKyBoZWlnaHQpOwoKCXkgKz0gMC41ICogaGVpZ2h0OwoJc3RhdGViYXJDcmVhdGVCYXIoc3RhdGViYXIsIHggKyBlbGJvdy54LCB5LCB4LCB5KTsKCgl4ICs9IGVsYm93Lng7CglzdGF0ZWJhckNyZWF0ZUJhcihzdGF0ZWJhciwgeCwgeSwgeCwgeSArIChlbGJvdy55ICogZGlyZWN0aW9uKSk7CgoJLyoKCSAqIE5vdyBjcmVhdGUgdGhlIHRleHQgYXQgdGhlIGVuZCBvZiB0aGUgZWxib3cuCgkgKi8KCXkgKz0gKGVsYm93LnkgKyBudWRnZS55KSAqIGRpcmVjdGlvbjsKCXggLT0gbnVkZ2UueDsKCXRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMocGFyZW50Lm5hbWVzcGFjZVVSSSwgJ3RleHQnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXN0YXRldGV4dCcpOwoJdGV4dC5hcHBlbmRDaGlsZChnX3N2Z0RvYy5jcmVhdGVUZXh0Tm9kZShzdGF0ZW1hcC50aXRsZSkpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIHgpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHkpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAndHJhbnNmb3JtJywKCSAgICAncm90YXRlKDkwLCcgKyB4ICsgJywnICsgeSArICcpJyk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd0ZXh0LWFuY2hvcicsIGFuY2hvcnNbYW5jaG9yIF4gMV0pOwoKCXBhcmVudC5hcHBlbmRDaGlsZCh0ZXh0KTsKCXN0YXRlYmFyLmJhcnMucHVzaCh0ZXh0KTsKCglyZXR1cm4gKHN0YXRlYmFyKTsKfTsKCnZhciBzdGF0ZWJhclJlbW92ZSA9IGZ1bmN0aW9uIChzdGF0ZWJhcikKewoJdmFyIGk7CgoJaWYgKCFzdGF0ZWJhcikKCQlyZXR1cm47CgoJaWYgKHN0YXRlYmFyLmJhcnMpIHsKCQlmb3IgKGkgPSAwOyBpIDwgc3RhdGViYXIuYmFycy5sZW5ndGg7IGkrKykKCQkJc3RhdGViYXIucGFyZW50LnJlbW92ZUNoaWxkKHN0YXRlYmFyLmJhcnNbaV0pOwoJfQoKCXN0YXRlYmFyLmJhcnMgPSB1bmRlZmluZWQ7CglzdGF0ZWJhci5lbnRpdHkgPSB1bmRlZmluZWQ7Cn07Cgp2YXIgdGltZWJhclJlbW92ZSA9IGZ1bmN0aW9uICh0aW1lYmFyKQp7CglpZiAoIXRpbWViYXIpCgkJcmV0dXJuOwoKCXRpbWViYXJSZW1vdmVTdWJiYXIodGltZWJhcik7CgoJaWYgKHRpbWViYXIuYmFyICYmICF0aW1lYmFyLmhpZGRlbikgewoJCXRpbWViYXIucGFyZW50LnJlbW92ZUNoaWxkKHRpbWViYXIuYmFyKTsKCQl0aW1lYmFyLnBhcmVudC5yZW1vdmVDaGlsZCh0aW1lYmFyLnRleHQpOwoJfQoKCWlmICh0aW1lYmFyLmJyZWFrZG93bikgewoJCXZhciBpOwoKCQlmb3IgKGkgPSAwOyBpIDwgdGltZWJhci5icmVha2Rvd24ubGVuZ3RoOyBpKyspIHsKCQkJdmFyIGVsZW0gPSB0aW1lYmFyLmJyZWFrZG93bltpXTsKCQkJZWxlbS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsZW0pOwoJCX0KCX0KCgl0aW1lYmFyLmJhciA9IHVuZGVmaW5lZDsKCXRpbWViYXIudGV4dCA9IHVuZGVmaW5lZDsKCXRpbWViYXIuYnJlYWtkb3duID0gdW5kZWZpbmVkOwp9OwoKdmFyIHRpbWViYXJTZXRCYXJMb2NhdGlvbiA9IGZ1bmN0aW9uIChiYXIsIG1hcFgpCnsKCXZhciBhYnNYID0gbWFwWCArIGdfb2Zmc2V0OwoJdmFyIG51YmhlaWdodCA9IDE1OwoKCWJhci54MS5iYXNlVmFsLnZhbHVlID0gYWJzWDsKCWJhci55MS5iYXNlVmFsLnZhbHVlID0gZ2xvYmFscy50bWFyZ2luIC0gbnViaGVpZ2h0OwoJYmFyLngyLmJhc2VWYWwudmFsdWUgPSBhYnNYOwoJYmFyLnkyLmJhc2VWYWwudmFsdWUgPSBnbG9iYWxzLnRtYXJnaW4gKyBnX2hlaWdodDsKfTsKCnZhciB0aW1lYmFyU2V0U3ViYmFyTG9jYXRpb24gPSBmdW5jdGlvbiAoc3ViYmFyLCBtYXBYLCB0aW1lYmFyWCkKewoJdmFyIGFic1ggPSBtYXBYICsgZ19vZmZzZXQsIHg7Cgl2YXIgYmFyID0gc3ViYmFyLmJhcjsKCXZhciBzcGFuID0gc3ViYmFyLnNwYW47Cgl2YXIgdGV4dCA9IHN1YmJhci50ZXh0OwoJdmFyIG51ZGdlID0geyB4OiAwLCB5OiAxMCB9OwoKCWJhci54MS5iYXNlVmFsLnZhbHVlID0gYWJzWDsKCWJhci55MS5iYXNlVmFsLnZhbHVlID0gZ2xvYmFscy50bWFyZ2luOwoJYmFyLngyLmJhc2VWYWwudmFsdWUgPSBhYnNYOwoJYmFyLnkyLmJhc2VWYWwudmFsdWUgPSBnbG9iYWxzLnRtYXJnaW4gKyBnX2hlaWdodDsKCglzcGFuLngxLmJhc2VWYWwudmFsdWUgPSB0aW1lYmFyWCArIGdfb2Zmc2V0OwoJc3Bhbi55MS5iYXNlVmFsLnZhbHVlID0gc3ViYmFyLnk7CglzcGFuLngyLmJhc2VWYWwudmFsdWUgPSBhYnNYOwoJc3Bhbi55Mi5iYXNlVmFsLnZhbHVlID0gc3ViYmFyLnk7CgoJeCA9ICh0aW1lYmFyWCA8IG1hcFggPyB0aW1lYmFyWCA6IG1hcFgpICsKCSAgICBNYXRoLmFicyh0aW1lYmFyWCAtIG1hcFgpIC8gMjsKCgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd0ZXh0LWFuY2hvcicsICdtaWRkbGUnKTsKCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnLCB4ICsgZ19vZmZzZXQpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHN1YmJhci55ICsgbnVkZ2UueSk7Cn07Cgp2YXIgdGltZWJhclNldFRleHRMb2NhdGlvbiA9IGZ1bmN0aW9uICh0ZXh0LCBtYXBYKQp7Cgl2YXIgYWJzWCA9IG1hcFggKyBnX29mZnNldDsKCXZhciBudWRnZSA9IHsgeDogMywgeTogNSB9OwoJdmFyIGRpcmVjdGlvbiwgYW5jaG9yOwoJdmFyIHRpbWU7CgoJLyoKCSAqIFRoZSBzaWRlIG9mIHRoZSB0aW1lYmFyIHRoYXQgd2UgYWN0dWFsbHkgcmVuZGVyIHRoZSB0ZXh0IGNvbnRhaW5pbmcKCSAqIHRoZSBvZmZzZXQgYW5kIHRoZSB0aW1lIGRlcGVuZHMgb24gdGhlIGxvY2F0aW9uIG9mIG91ciB0aW1lYmFyIHdpdGgKCSAqIHJlc3BlY3QgdG8gdGhlIGNlbnRlciBvZiB0aGUgdmlzaWJsZSBzdGF0ZW1hcC4KCSAqLwoJaWYgKG1hcFggPCAoZ193aWR0aCAvIDIpKSB7CgkJZGlyZWN0aW9uID0gMTsKCQlhbmNob3IgPSAnc3RhcnQnOwoJfSBlbHNlIHsKCQlkaXJlY3Rpb24gPSAtMTsKCQlhbmNob3IgPSAnZW5kJzsKCX0KCgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgYWJzWCArIChkaXJlY3Rpb24gKiBudWRnZS54KSk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd5JywgZ2xvYmFscy50bWFyZ2luIC0gbnVkZ2UueSk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd0ZXh0LWFuY2hvcicsIGFuY2hvcik7CgoJdGltZSA9IHRpbWVGcm9tTWFwWChtYXBYKTsKCXRleHQuY2hpbGROb2Rlc1swXS50ZXh0Q29udGVudCA9IHRpbWVUb1RleHQodGltZSk7CgoJcmV0dXJuICh0aW1lKTsKfTsKCnZhciB0aW1lYmFySGlkZVN1YmJhciA9IGZ1bmN0aW9uICh0aW1lYmFyKQp7Cgl2YXIgcGFyZW50LCBzdWJiYXI7CgoJaWYgKCF0aW1lYmFyIHx8ICEoc3ViYmFyID0gdGltZWJhci5zdWJiYXIpIHx8IHN1YmJhci5oaWRkZW4pCgkJcmV0dXJuOwoKCXBhcmVudCA9IHRpbWViYXIucGFyZW50OwoJcGFyZW50LnJlbW92ZUNoaWxkKHN1YmJhci5iYXIpOwoJcGFyZW50LnJlbW92ZUNoaWxkKHN1YmJhci5zcGFuKTsKCXBhcmVudC5yZW1vdmVDaGlsZChzdWJiYXIudGV4dCk7CgoJc3ViYmFyLmhpZGRlbiA9IHRydWU7Cn07Cgp2YXIgdGltZWJhclNob3dTdWJiYXIgPSBmdW5jdGlvbiAodGltZWJhcikKewoJdmFyIHBhcmVudCwgc3ViYmFyLCBtYXBYOwoKCWlmICghdGltZWJhciB8fCAhKHN1YmJhciA9IHRpbWViYXIuc3ViYmFyKSB8fCAhc3ViYmFyLmhpZGRlbikKCQlyZXR1cm47CgoJbWFwWCA9IHRpbWVUb01hcFgoc3ViYmFyLnRpbWUpCgoJaWYgKG1hcFggPCAwIHx8IG1hcFggPj0gZ193aWR0aCkKCQlyZXR1cm47CgoJdGltZWJhclNldFN1YmJhckxvY2F0aW9uKHN1YmJhciwgbWFwWCwgdGltZWJhci54KTsKCglwYXJlbnQgPSB0aW1lYmFyLnBhcmVudDsKCXBhcmVudC5hcHBlbmRDaGlsZChzdWJiYXIuYmFyKTsKCXBhcmVudC5hcHBlbmRDaGlsZChzdWJiYXIuc3Bhbik7CglwYXJlbnQuYXBwZW5kQ2hpbGQoc3ViYmFyLnRleHQpOwoKCXN1YmJhci5oaWRkZW4gPSBmYWxzZTsKfQoKdmFyIHRpbWViYXJIaWRlID0gZnVuY3Rpb24gKHRpbWViYXIpCnsKCWlmICghdGltZWJhciB8fCB0aW1lYmFyLmhpZGRlbiB8fCAhdGltZWJhci5iYXIpCgkJcmV0dXJuOwoKCXRpbWViYXIucGFyZW50LnJlbW92ZUNoaWxkKHRpbWViYXIuYmFyKTsKCXRpbWViYXIucGFyZW50LnJlbW92ZUNoaWxkKHRpbWViYXIudGV4dCk7Cgl0aW1lYmFyLmhpZGRlbiA9IHRydWU7Cgl0aW1lYmFySGlkZVN1YmJhcih0aW1lYmFyKTsKfTsKCnZhciB0aW1lYmFyU2hvdyA9IGZ1bmN0aW9uICh0aW1lYmFyKQp7Cgl2YXIgbWFwWDsKCglpZiAoIXRpbWViYXIgfHwgIXRpbWViYXIuaGlkZGVuKQoJCXJldHVybjsKCgltYXBYID0gdGltZVRvTWFwWCh0aW1lYmFyLnRpbWUpOwoKCWlmIChtYXBYIDwgMCB8fCBtYXBYID49IGdfd2lkdGgpCgkJcmV0dXJuOwoKCXRpbWViYXJTZXRCYXJMb2NhdGlvbih0aW1lYmFyLmJhciwgbWFwWCk7Cgl0aW1lYmFyU2V0VGV4dExvY2F0aW9uKHRpbWViYXIudGV4dCwgbWFwWCk7Cgl0aW1lYmFyLnggPSBtYXBYOwoKCXRpbWViYXIucGFyZW50LmFwcGVuZENoaWxkKHRpbWViYXIuYmFyKTsKCXRpbWViYXIucGFyZW50LmFwcGVuZENoaWxkKHRpbWViYXIudGV4dCk7Cgl0aW1lYmFyLmhpZGRlbiA9IGZhbHNlOwoKCXRpbWViYXJTaG93U3ViYmFyKHRpbWViYXIpOwp9OwoKdmFyIHRpbWViYXJTZXRNaWRkbGUgPSBmdW5jdGlvbiAodGltZWJhcikKewoJdmFyIG1hcFggPSBnX3dpZHRoIC8gMjsKCglpZiAoIXRpbWViYXIgfHwgIXRpbWViYXIuYmFyKQoJCXJldHVybjsKCgkvKgoJICogVGhpcyBpcyBqdXN0IGFuIGFsZ2VicmFpYyByZWFycmFuZ2VtZW50IG9mIHRoZSBtYXBYIGNhbGN1bGF0aW9uCgkgKiBpbiB0aW1lYmFyU2hvdygpLCBhYm92ZS4KCSAqLwoJZ190cmFuc01hdHJpeFs0XSA9IC0oKCh0aW1lYmFyLnRpbWUgLyBnbG9iYWxzLnRpbWVXaWR0aCkgKiBnX3dpZHRoICoKCSAgICBnX3RyYW5zTWF0cml4WzBdKSAtIG1hcFgpOwp9OwoKdmFyIHRpbWViYXJTZXRCcmVha2Rvd24gPSBmdW5jdGlvbiAodGltZSkKewoJdmFyIGJyZWFrZG93biwgc3RhdGUsIHRvdGFsID0gW107Cgl2YXIgZW50aXR5OwoJdmFyIHN1bSA9IHt9OwoJdmFyIHJ2YWwgPSBbXTsKCgl2YXIgY2xpY2sgPSBmdW5jdGlvbiAoc3RhdGVtYXAsIHMpIHsKCQlyZXR1cm4gKGZ1bmN0aW9uIChldnQpIHsgbGVnZW5kY2xpY2soZXZ0LCBzdGF0ZW1hcCwgcyk7IH0pOwoJfTsKCgl0aW1lICs9IGdsb2JhbHMuYmVnaW47CgoJZm9yIChlbnRpdHkgaW4gZ19lbnRpdGllcykgewoJCXZhciBzdGF0ZW1hcCA9IGdfc3RhdGVtYXBzW2dfZW50aXRpZXNbZW50aXR5XS5zdGF0ZW1hcF0ubGVnZW5kOwoKCQlicmVha2Rvd24gPSBlbnRpdHlCcmVha2Rvd24oZ19lbnRpdGllc1tlbnRpdHldLCB0aW1lKTsKCgkJaWYgKCF0b3RhbFtzdGF0ZW1hcF0pIHsKCQkJdG90YWxbc3RhdGVtYXBdID0ge307CgkJCXN1bVtzdGF0ZW1hcF0gPSAwOwoJCX0KCgkJZm9yIChzdGF0ZSBpbiBicmVha2Rvd24pIHsKCQkJaWYgKCF0b3RhbFtzdGF0ZW1hcF0uaGFzT3duUHJvcGVydHkoc3RhdGUpKQoJCQkJdG90YWxbc3RhdGVtYXBdW3N0YXRlXSA9IDA7CgoJCQlzdW1bc3RhdGVtYXBdICs9IGJyZWFrZG93bltzdGF0ZV07CgkJCXRvdGFsW3N0YXRlbWFwXVtzdGF0ZV0gKz0gYnJlYWtkb3duW3N0YXRlXTsKCQl9Cgl9CgoJdmFyIHNldHRvdGFsID0gZnVuY3Rpb24gKHN0YXRlbWFwLCBzdGF0ZSkgewoJCXZhciBsZWdlbmQsIHBhcmVudCwgdGV4dDsKCQl2YXIgeCwgeSwgd2lkdGgsIGhlaWdodCwgdDsKCQl2YXIgbnVkZ2UgPSAzOwoKCQkvKgoJCSAqIEl0ZXJhdGUgZG93biB1bnRpbCB3ZSBmaW5kIGEgdmFsaWQgbGVnZW5kLiAgV2Uga25vdyB0aGF0CgkJICogdGhhdCB0aGVyZSB3aWxsIGJlIGF0IGxlYXN0IG9uZSwgYnV0IHdlIGJyZWFrIG91dCBvZiB0aGUKCQkgKiBsb29wIGFueXdheSBpZiB3ZSBkb24ndCBmaW5kIGl0IHRvIGFsbG93IHRoZSBmYWlsdXJlIG1vZGUKCQkgKiBoZXJlIHRvIGJlIGFuIHVucmVmZXJlbmNlZCBwcm9wZXJ0eSByYXRoZXIgdGhhbiBhbgoJCSAqIGluaWZpbml0ZSBsb29wLgoJCSAqLwoJCWxlZ2VuZCA9IGdfc3ZnRG9jLmdldEVsZW1lbnRCeUlkKCdzdGF0ZW1hcC1sZWdlbmQtJyArCgkJICAgIHN0YXRlbWFwICsgJy0nICsgc3RhdGUpOwoKCQlwYXJlbnQgPSBsZWdlbmQucGFyZW50Tm9kZTsKCgkJeCA9IHBhcnNlSW50KGxlZ2VuZC5nZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcpLCAxMCk7CgkJeSA9IHBhcnNlSW50KGxlZ2VuZC5nZXRBdHRyaWJ1dGVOUyhudWxsLCAneScpLCAxMCk7CgkJd2lkdGggPSBwYXJzZUludChsZWdlbmQuZ2V0QXR0cmlidXRlTlMobnVsbCwgJ3dpZHRoJyksIDEwKTsKCQloZWlnaHQgPSBwYXJzZUludChsZWdlbmQuZ2V0QXR0cmlidXRlTlMobnVsbCwgJ2hlaWdodCcpLCAxMCk7CgoJCXQgPSBNYXRoLmZsb29yKHRvdGFsW3N0YXRlbWFwXVtzdGF0ZV0pICsgJyAoJyArCgkJICAgIE1hdGguZmxvb3IoKHRvdGFsW3N0YXRlbWFwXVtzdGF0ZV0gLwoJCSAgICBzdW1bc3RhdGVtYXBdKSAqIDEwMCkgKyAnJSknOwoKCQl0ZXh0ID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHBhcmVudC5uYW1lc3BhY2VVUkksICd0ZXh0Jyk7CgkJdGV4dC5jbGFzc0xpc3QuYWRkKCdzYW5zc2VyaWYnKTsKCQl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXRpbWVicmVha3RleHQnKTsKCgkJdGV4dC5hcHBlbmRDaGlsZChnX3N2Z0RvYy5jcmVhdGVUZXh0Tm9kZSh0KSk7CgkJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIHggKyAod2lkdGggLyAyKSk7CgkJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHkgKyAoaGVpZ2h0IC8gMikgKyBudWRnZSk7CgkJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAndGV4dC1hbmNob3InLCAnbWlkZGxlJyk7CgoJCXRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLAoJCSAgICBjbGljayhzdGF0ZW1hcCwgZ19zdGF0ZW1hcHNbc3RhdGVtYXBdLnN0YXRlc1tzdGF0ZV0udmFsdWUpKTsKCgkJcGFyZW50LmFwcGVuZENoaWxkKHRleHQpOwoJCXJ2YWwucHVzaCh0ZXh0KTsKCX07CgoJZm9yIChzdGF0ZW1hcCBpbiB0b3RhbCkgewoJCWZvciAoc3RhdGUgaW4gdG90YWxbc3RhdGVtYXBdKQoJCQlzZXR0b3RhbChzdGF0ZW1hcCwgc3RhdGUpOwoJfQoKCXJldHVybiAocnZhbCk7Cn07Cgp2YXIgdGltZWJhckNyZWF0ZSA9IGZ1bmN0aW9uIChtYXBYKQp7Cgl2YXIgcGFyZW50ID0gZ19zdGF0ZW1hcHNbMF0uZWxlbS5wYXJlbnROb2RlLnBhcmVudE5vZGU7Cgl2YXIgYmFyLCB0ZXh0OwoJdmFyIHRpbWViYXIgPSB7IHBhcmVudDogcGFyZW50LCBoaWRkZW46IGZhbHNlIH07CgoJYmFyID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHBhcmVudC5uYW1lc3BhY2VVUkksICdsaW5lJyk7CgliYXIuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGltZWJhcicpOwoKCXRpbWViYXJTZXRCYXJMb2NhdGlvbihiYXIsIG1hcFgpOwoJcGFyZW50LmFwcGVuZENoaWxkKGJhcik7CgoJdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhwYXJlbnQubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzYW5zc2VyaWYnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGltZXRleHQnKTsKCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUoJycpKTsKCgl0aW1lYmFyLnRpbWUgPSB0aW1lYmFyU2V0VGV4dExvY2F0aW9uKHRleHQsIG1hcFgpOwoJdGltZWJhci5icmVha2Rvd24gPSB0aW1lYmFyU2V0QnJlYWtkb3duKHRpbWViYXIudGltZSk7Cgl0aW1lYmFyLnggPSBtYXBYOwoKCXRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7CgkJdGltZWJhclJlbW92ZSh0aW1lYmFyKTsKCQlzdGF0ZXNlbFVwZGF0ZSgpOwoJfSk7CgoJcGFyZW50LmFwcGVuZENoaWxkKHRleHQpOwoKCXRpbWViYXIuYmFyID0gYmFyOwoJdGltZWJhci50ZXh0ID0gdGV4dDsKCglyZXR1cm4gKHRpbWViYXIpOwp9OwoKdmFyIHRpbWViYXJDcmVhdGVTdWJiYXIgPSBmdW5jdGlvbiAodGltZWJhciwgbWFwWCwgYWJzWSkKewoJdmFyIHBhcmVudCA9IHRpbWViYXIucGFyZW50OwoJdmFyIHN1YmJhciwgYmFyLCBzcGFuLCB0ZXh0LCB0aW1lLCBkZWx0YTsKCgliYXIgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMocGFyZW50Lm5hbWVzcGFjZVVSSSwgJ2xpbmUnKTsKCWJhci5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC1zdWJiYXInKTsKCglzcGFuID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKHBhcmVudC5uYW1lc3BhY2VVUkksICdsaW5lJyk7CglzcGFuLmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXN1YmJhci1zcGFuJyk7CgoJdGltZSA9IHRpbWVGcm9tTWFwWChtYXBYKTsKCWRlbHRhID0gTWF0aC5hYnModGltZWJhci50aW1lIC0gdGltZSk7CgoJdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhwYXJlbnQubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzYW5zc2VyaWYnKTsKCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtc3ViYmFyLXRleHQnKTsKCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUodGltZXVuaXRzKGRlbHRhKSkpOwoKCXZhciBzdWJiYXIgPSB7IGJhcjogYmFyLCBzcGFuOiBzcGFuLCB0ZXh0OiB0ZXh0LAoJICAgIHRpbWU6IHRpbWUsIHk6IGFic1ksIGhpZGRlbjogZmFsc2UgfTsKCgl0aW1lYmFyU2V0U3ViYmFyTG9jYXRpb24oc3ViYmFyLCBtYXBYLCB0aW1lYmFyLngpOwoKCXBhcmVudC5hcHBlbmRDaGlsZChiYXIpOwoJcGFyZW50LmFwcGVuZENoaWxkKHNwYW4pOwoJcGFyZW50LmFwcGVuZENoaWxkKHRleHQpOwoKCXRpbWViYXIuc3ViYmFyID0gc3ViYmFyOwp9Cgp2YXIgdGltZWJhclJlbW92ZVN1YmJhciA9IGZ1bmN0aW9uICh0aW1lYmFyKQp7Cgl2YXIgc3ViYmFyID0gdGltZWJhci5zdWJiYXI7CgoJaWYgKCFzdWJiYXIpCgkJcmV0dXJuOwoKCWlmICghc3ViYmFyLmhpZGRlbikgewoJCXRpbWViYXIucGFyZW50LnJlbW92ZUNoaWxkKHN1YmJhci5iYXIpOwoJCXRpbWViYXIucGFyZW50LnJlbW92ZUNoaWxkKHN1YmJhci5zcGFuKTsKCQl0aW1lYmFyLnBhcmVudC5yZW1vdmVDaGlsZChzdWJiYXIudGV4dCk7Cgl9CgoJdGltZWJhci5zdWJiYXIgPSB1bmRlZmluZWQ7Cn0KCnZhciBzdGF0ZXNlbFRhZ3ZhbFNlbGVjdCA9IGZ1bmN0aW9uIChldnQsIHRhZ3ZhbCkKewoJdmFyIHRhZ2RlZnMgPSB7fTsKCXZhciBpLCBlbnRpdHk7Cgl2YXIgc3RhdGUsIHRhZ3M7Cgl2YXIgY2hpbGQ7Cgl2YXIgaGlnaGxpZ2h0ID0gJ3N0YXRlbWFwLXRhZ2JveC1zZWxlY3QtaGlnaGxpZ2h0ZWQnOwoKCWlmIChnX3N0YXRlc2VsID09IHVuZGVmaW5lZCkKCQlyZXR1cm47CgoJc3RhdGUgPSBnX3N0YXRlc2VsLnN0YXRlOwoJdGFncyA9IGdfc3RhdGVtYXBzW2dfc3RhdGVzZWwuc3RhdGVtYXBdLnRhZ3M7CgoJaWYgKGdfdGFndmFsc2VsICYmIGdfdGFndmFsc2VsLnNlbGVjdGVkKSB7CgkJZm9yIChpID0gMDsgaSA8IGdfdGFndmFsc2VsLnNlbGVjdGVkLmxlbmd0aDsgaSsrKSB7CgkJCWNoaWxkID0gZ190YWd2YWxzZWwuc2VsZWN0ZWRbaV07CgkJCWNoaWxkLnJlbW92ZUF0dHJpYnV0ZSgnZmlsbC1vcGFjaXR5Jyk7CgkJfQoKCQlpZiAoZ190YWd2YWxzZWwuZWxlbWVudCkKCQkJZ190YWd2YWxzZWwuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKGhpZ2hsaWdodCk7CgoJCS8qCgkJICogSWYgb3VyIHNlbGVjdGlvbiBtYXRjaGVzIHRoZSBzZWxlY3Rpb24gdGhhdCB3ZSBoYXZlIGFscmVhZHkKCQkgKiBtYWRlLCB0aGVuIHdlIGFyZSB1bnNlbGVjdGluZyB0aGlzIHRhZyB2YWx1ZTsgd2UgbmVlZCBvbmx5CgkJICogcmV0dXJuLgoJCSAqLwoJCWlmIChnX3RhZ3ZhbHNlbC50YWcgPT0gZ190YWdzZWwudGFnICYmCgkJICAgIGdfdGFndmFsc2VsLnRhZ3ZhbCA9PSB0YWd2YWwpIHsKCQkJZ190YWd2YWxzZWwgPSB1bmRlZmluZWQ7CgkJCXJldHVybjsKCQl9Cgl9CgoJZ190YWd2YWxzZWwgPSB7IHNlbGVjdGVkOiBbXSwgdGFnOiBnX3RhZ3NlbC50YWcsIHRhZ3ZhbDogdGFndmFsIH07CgoJZXZ0LnRhcmdldC5jbGFzc0xpc3QuYWRkKGhpZ2hsaWdodCk7CglnX3RhZ3ZhbHNlbC5lbGVtZW50ID0gZXZ0LnRhcmdldDsKCgkvKgoJICogSXRlcmF0ZSBvdmVyIGFsbCBvZiBvdXIgdGFnIGRlZmluaXRpb25zLCBsb29raW5nIGZvciBhIG1hdGNoIHdoZXJlCgkgKiB0aGUgc3BlY2lmaWVkIHRhZyAoZm9yIHRoZSBzcGVjaWZpZWQgc3RhdGUpIG1hdGNoZXMgdGhlIHNwZWNpZmllZAoJICogdGFnIHZhbHVlLgoJICovCglmb3IgKGkgPSAwOyBpIDwgdGFncy5sZW5ndGg7IGkrKykgewoJCWlmICh0YWdzW2ldLnN0YXRlICE9IHN0YXRlKQoJCQljb250aW51ZTsKCgkJaWYgKHRhZ3NbaV1bZ190YWdzZWwudGFnXSAhPSB0YWd2YWwpCgkJCWNvbnRpbnVlOwoKCQl0YWdkZWZzW2ldID0gdHJ1ZTsKCX0KCgkvKgoJICogTm93IGZvciBlYWNoIGVudGl0eSwgd2Ugd2lsbCBwbG93IHRocm91Z2ggZXZlcnkgcmVjdGFuZ2xlLgoJICovCglmb3IgKGlkIGluIGdfZW50aXRpZXMpIHsKCQl2YXIgZW50aXR5ID0gZ19lbnRpdGllc1tpZF07CgkJdmFyIGVsZW0gPSBlbnRpdHkuZWxlbWVudDsKCQl2YXIgZGF0YSA9IGdfc3RhdGVtYXBzW2VudGl0eS5zdGF0ZW1hcF0uZGF0YVtlbnRpdHkubmFtZV07CgkJdmFyIGogPSAwOwoKCQlmb3IgKGkgPSAwOyBpIDwgZWxlbS5jaGlsZE5vZGVzLmxlbmd0aDsgaSsrKSB7CgkJCWNoaWxkID0gZWxlbS5jaGlsZE5vZGVzW2ldOwoKCQkJaWYgKGNoaWxkLm5vZGVOYW1lICE9ICdyZWN0JykKCQkJCWNvbnRpbnVlOwoKCQkJdmFyIGRhdHVtID0gZGF0YVtqKytdOwoJCQl2YXIgdGFnOwoKCQkJaWYgKGRhdHVtLnMgaW5zdGFuY2VvZiBPYmplY3QpIHsKCQkJCWlmICghZGF0dW0uc1tzdGF0ZV0pCgkJCQkJY29udGludWU7CgkJCX0gZWxzZSB7CgkJCQlpZiAoZGF0dW0ucyAhPSBzdGF0ZSkKCQkJCQljb250aW51ZTsKCQkJfQoKCQkJaWYgKCFkYXR1bS5nKQoJCQkJY29udGludWU7CgoJCQl2YXIgcmF0aW8gPSAwOwoKCQkJZm9yICh0YWcgaW4gZGF0dW0uZykgewoJCQkJaWYgKHRhZ2RlZnNbdGFnXSkKCQkJCQlyYXRpbyArPSBkYXR1bS5nW3RhZ107CgkJCX0KCgkJCWlmIChyYXRpbyA9PT0gMCkKCQkJCWNvbnRpbnVlOwoKCQkJLyoKCQkJICogQXQgdGhpcyBwb2ludCB3ZSBoYXZlIGZvdW5kIGEgcmVjdGFuZ2xlIHRoYXQgd2UKCQkJICogd2FudCB0byBjb2xvciwgYW5kIHdlIGtub3cgdGhlIGRlZ3JlZSB0aGF0IHdlCgkJCSAqIHdhbnQgdG8gY29sb3IgaXQhCgkJCSAqLwoJCQljaGlsZC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAnZmlsbC1vcGFjaXR5JywgMSAtIHJhdGlvKTsKCQkJZ190YWd2YWxzZWwuc2VsZWN0ZWQucHVzaChjaGlsZCk7CgkJfQoJfQp9OwoKdmFyIHN0YXRlc2VsVXBkYXRlID0gZnVuY3Rpb24gKCkKewoJdmFyIGJhc2UsIGV0aW1lLCBuZW50aXRpZXMgPSAwOwoJdmFyIHN0YXRlLCBlbnRpdHk7Cgl2YXIgYnl0YWcgPSB7fSwgdGFndmFsOwoJdmFyIGhlYWRlciwgaSwgdGFnczsKCglpZiAoZ19zdGF0ZXNlbCA9PSB1bmRlZmluZWQpCgkJcmV0dXJuOwoKCXN0YXRlID0gZ19zdGF0ZXNlbC5zdGF0ZTsKCXRhZ3MgPSBnX3N0YXRlbWFwc1tnX3N0YXRlc2VsLnN0YXRlbWFwXS50YWdzOwoKCXZhciBzdW0gPSBmdW5jdGlvbiAoZGF0dW0sIGlkLCBzcGFuKSB7CgkJdmFyIHRpZCwgdGFnOwoKCQlpZiAoIShkYXR1bS5zIGluc3RhbmNlb2YgT2JqZWN0KSkgewoJCQlpZiAoZGF0dW0ucyAhPSBzdGF0ZSkKCQkJCXJldHVybjsKCQl9IGVsc2UgewoJCQl2YXIgcmF0aW87CgoJCQlpZiAoIShyYXRpbyA9IGRhdHVtLnNbc3RhdGVdKSkKCQkJCXJldHVybjsKCQl9CgoJCWlmICghZGF0dW0uZykKCQkJcmV0dXJuOwoKCQlmb3IgKHRpZCBpbiBkYXR1bS5nKSB7CgkJCXRhZyA9IHRhZ3NbdGlkXTsKCgkJCWlmICh0YWcuc3RhdGUgIT0gc3RhdGUpCgkJCQljb250aW51ZTsKCgkJCWlmICghKHRhZ3ZhbCA9IHRhZ1tnX3RhZ3NlbC50YWddKSkKCQkJCWNvbnRpbnVlOwoKCQkJaWYgKCFieXRhZ1t0YWd2YWxdKQoJCQkJYnl0YWdbdGFndmFsXSA9IDA7CgoJCQlieXRhZ1t0YWd2YWxdICs9IHNwYW4gKiBkYXR1bS5nW3RpZF07CgkJfQoJfTsKCglpZiAoIWdfdGFnc2VsKQoJCXJldHVybjsKCgloZWFkZXIgPSAnJzsKCglpZiAoZ19zdGF0ZWJhciAmJiBnX3N0YXRlYmFyLmVudGl0eSkgewoJCWhlYWRlciA9IGdfc3RhdGVtYXBzW2dfc3RhdGVzZWwuc3RhdGVtYXBdLmVudGl0eUtpbmQgKyAnICcgKwoJCSAgICBnX3N0YXRlYmFyLmVudGl0eS5uYW1lICsgJyAnOwoJfQoKCWhlYWRlciArPSAnYnkgJyArIGdfdGFnc2VsLnRhZyArICcgJzsKCglpZiAoZ190aW1lYmFyICYmIGdfdGltZWJhci5iYXIpIHsKCQliYXNlID0gZ190aW1lYmFyLnRpbWUgKyBnbG9iYWxzLmJlZ2luOwoJCWV0aW1lID0gMDsKCQloZWFkZXIgKz0gJ2F0ICcgKyB0aW1ldW5pdHMoZ190aW1lYmFyLnRpbWUpOwoJfSBlbHNlIHsKCQliYXNlID0gdGltZUZyb21NYXBYKDApICsgZ2xvYmFscy5iZWdpbjsKCQlldGltZSA9IHRpbWVGcm9tTWFwWChnX3dpZHRoKSArIGdsb2JhbHMuYmVnaW47CgkJaGVhZGVyICs9ICdvdmVyIHNwYW4nOwoJfQoKCWhlYWRlciA9IGhlYWRlci5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGhlYWRlci5zdWJzdHIoMSkgKyAnOic7CgoJaWYgKGdfc3RhdGViYXIgJiYgZ19zdGF0ZWJhci5lbnRpdHkpIHsKCQllbnRpdHlGb3JFYWNoRGF0dW0oZ19zdGF0ZWJhci5lbnRpdHksIGJhc2UsIGV0aW1lLCBzdW0pOwoJCW5lbnRpdGllcysrOwoJfSBlbHNlIHsKCQkvKgoJCSAqIEZvciBlYWNoIGVudGl0eSwgd2UgbmVlZCB0byBkZXRlcm1pbmUgdGhlIGFtb3VudCBvZiB0aW1lCgkJICogaW4gb3VyIHNlbGVjdGVkIHN0YXRlLgoJCSAqLwoJCWZvciAoZW50aXR5IGluIGdfZW50aXRpZXMpIHsKCQkJZW50aXR5Rm9yRWFjaERhdHVtKGdfZW50aXRpZXNbZW50aXR5XSwKCQkJICAgIGJhc2UsIGV0aW1lLCBzdW0pOwoJCQluZW50aXRpZXMrKzsKCQl9Cgl9CgoJdmFyIHNvcnRlZCA9IE9iamVjdC5rZXlzKGJ5dGFnKS5zb3J0KGZ1bmN0aW9uIChsaHMsIHJocykgewoJCWlmIChieXRhZ1tsaHNdIDwgYnl0YWdbcmhzXSkgewoJCQlyZXR1cm4gKDEpOwoJCX0gZWxzZSBpZiAoYnl0YWdbbGhzXSA+IGJ5dGFnW3Joc10pIHsKCQkJcmV0dXJuICgtMSk7CgkJfSBlbHNlIHsKCQkJcmV0dXJuICgwKTsKCQl9Cgl9KTsKCgl2YXIgZGl2aXNvcjsKCglpZiAoZXRpbWUgPT09IDApIHsKCQlkaXZpc29yID0gbmVudGl0aWVzOwoJfSBlbHNlIHsKCQlkaXZpc29yID0gKGV0aW1lIC0gYmFzZSkgKiBuZW50aXRpZXM7Cgl9CgoJdmFyIHggPSBnX3N0YXRlc2VsLng7Cgl2YXIgeSA9IGdfc3RhdGVzZWwueSArIDEwOwoKCXZhciBlbGVtID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLXRhZ2JveC1zZWxlY3QnKTsKCgl3aGlsZSAoZWxlbS5jaGlsZE5vZGVzLmxlbmd0aCA+IDApCgkJZWxlbS5yZW1vdmVDaGlsZChlbGVtLmNoaWxkTm9kZXNbMF0pOwoKCWlmIChnX3RhZ3ZhbHNlbCAmJiBnX3RhZ3ZhbHNlbC5lbGVtZW50KQoJCWdfdGFndmFsc2VsLmVsZW1lbnQgPSB1bmRlZmluZWQ7CgoJdmFyIHRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMoZWxlbS5uYW1lc3BhY2VVUkksICd0ZXh0Jyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLXRhZ2JveC1zZWxlY3QtaGVhZGVyJyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3NhbnNzZXJpZicpOwoKCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUoaGVhZGVyKSk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgeCk7Cgl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd5JywgeSk7CgllbGVtLmFwcGVuZENoaWxkKHRleHQpOwoJeSArPSA5OwoKCXZhciBsaW5lID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKGVsZW0ubmFtZXNwYWNlVVJJLCAnbGluZScpOwoJbGluZS5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10YWdib3gtc2VsZWN0LWhlYWRlci1saW5lJyk7CglsaW5lLngxLmJhc2VWYWwudmFsdWUgPSB4IC0gMjsKCWxpbmUueTEuYmFzZVZhbC52YWx1ZSA9IHk7CglsaW5lLngyLmJhc2VWYWwudmFsdWUgPSBnX3N0YXRlc2VsLngyOwoJbGluZS55Mi5iYXNlVmFsLnZhbHVlID0geTsKCWVsZW0uYXBwZW5kQ2hpbGQobGluZSk7Cgl5ICs9IDE4OwoKCXZhciBibWFyZ2luID0gNjA7Cgl2YXIgdHRsID0gMDsKCXZhciBlbGxpcHNpcyA9IGZhbHNlOwoKCXZhciBjbGljayA9IGZ1bmN0aW9uICh0dikgewoJCXJldHVybiAoZnVuY3Rpb24gKGV2dCkgeyBzdGF0ZXNlbFRhZ3ZhbFNlbGVjdChldnQsIHR2KTsgfSk7Cgl9OwoKCWZvciAoaSA9IDA7IGkgPD0gc29ydGVkLmxlbmd0aDsgaSsrKSB7CgkJdmFyIHQsIHBlcmM7CgoJCWlmIChpIDwgc29ydGVkLmxlbmd0aCkgewoJCQlwZXJjID0gKGJ5dGFnW3NvcnRlZFtpXV0gLyBkaXZpc29yKSAqIDEwMC4wOwoJCQl0YWd2YWwgPSBzb3J0ZWRbaV07CgkJCXR0bCArPSBwZXJjOwoKCQkJaWYgKHkgPiBnbG9iYWxzLnRvdGFsSGVpZ2h0IC0gYm1hcmdpbikgewoJCQkJaWYgKGVsbGlwc2lzKQoJCQkJCWNvbnRpbnVlOwoKCQkJCWVsbGlwc2lzID0gdHJ1ZTsKCQkJCXRhZ3ZhbCA9ICcuLi4nOwoJCQl9CgkJfSBlbHNlIHsKCQkJcGVyYyA9IHR0bDsKCQkJdGFndmFsID0gJ3RvdGFsJzsKCgkJCXkgLT0gNTsKCQkJbGluZSA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyhlbGVtLm5hbWVzcGFjZVVSSSwKCQkJICAgICdsaW5lJyk7CgkJCWxpbmUuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1zdW0tbGluZScpOwoJCQlsaW5lLngxLmJhc2VWYWwudmFsdWUgPSB4IC0gMjsKCQkJbGluZS55MS5iYXNlVmFsLnZhbHVlID0geTsKCQkJbGluZS54Mi5iYXNlVmFsLnZhbHVlID0gZ19zdGF0ZXNlbC54MjsKCQkJbGluZS55Mi5iYXNlVmFsLnZhbHVlID0geTsKCQkJZWxlbS5hcHBlbmRDaGlsZChsaW5lKTsKCQkJeSArPSAxNTsKCQl9CgoJCWlmIChpICE9IHNvcnRlZC5sZW5ndGggJiYgZWxsaXBzaXMpIHsKCQkJdCA9ICcuLi4nOwoJCX0gZWxzZSB7CgkJCXQgPSBNYXRoLnRydW5jKHBlcmMpICsgJy4nICsKCQkJICAgIChNYXRoLnJvdW5kKHBlcmMgKiAxMDApICUgMTAwKSArICclJzsKCQl9CgoJCXRleHQgPSBnX3N2Z0RvYy5jcmVhdGVFbGVtZW50TlMoZWxlbS5uYW1lc3BhY2VVUkksICd0ZXh0Jyk7CgkJdGV4dC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10YWdib3gtc2VsZWN0LXBlcmMnKTsKCQl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3NhbnNzZXJpZicpOwoJCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUodCkpOwoJCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3gnLCB4ICsgNDUpOwoJCXRleHQuc2V0QXR0cmlidXRlTlMobnVsbCwgJ3knLCB5KTsKCQllbGVtLmFwcGVuZENoaWxkKHRleHQpOwoKCQl0ZXh0ID0gZ19zdmdEb2MuY3JlYXRlRWxlbWVudE5TKGVsZW0ubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGFnYm94LXNlbGVjdCcpOwoJCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7CgkJdGV4dC5hcHBlbmRDaGlsZChnX3N2Z0RvYy5jcmVhdGVUZXh0Tm9kZSh0YWd2YWwpKTsKCQl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgeCArIDUwKTsKCQl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd5JywgeSk7CgoJCS8qCgkJICogSWYgd2UgYWxyZWFkeSBoYXZlIGEgdGFnIHZhbHVlIHNlbGVjdGlvbiBhbmQgaXQgbWF0Y2hlcwoJCSAqIHdoYXQgd2UncmUgYWJvdXQgdG8gZGlzcGxheSwgaW5kaWNhdGUgYXMgbXVjaCBieQoJCSAqIGhpZ2hsaWdodGluZyBpdC4KCQkgKi8KCQlpZiAoZ190YWd2YWxzZWwgJiYgZ190YWd2YWxzZWwudGFnID09IGdfdGFnc2VsLnRhZyAmJgoJCSAgICBnX3RhZ3ZhbHNlbC50YWd2YWwgPT0gdGFndmFsKSB7CgkJCXZhciBoaWdobGlnaHQgPSAnc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1oaWdobGlnaHRlZCc7CgkJCXRleHQuY2xhc3NMaXN0LmFkZChoaWdobGlnaHQpOwoJCQlnX3RhZ3ZhbHNlbC5lbGVtZW50ID0gdGV4dDsKCQl9CgoJCXRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGljayh0YWd2YWwpKTsKCgkJZWxlbS50aXRsZSA9IHQ7CgkJZWxlbS5hcHBlbmRDaGlsZCh0ZXh0KTsKCQl5ICs9IDE1OwoJfQp9OwoKdmFyIHN0YXRlc2VsVGFnU2VsZWN0ID0gZnVuY3Rpb24gKGV2dCwgdGFnKQp7Cgl2YXIgZWxlbSwgcHJlZml4ID0gJ3N0YXRlbWFwLXRhZ2JveC10YWctJzsKCglpZiAoZ190YWdzZWwpIHsKCQllbGVtID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQocHJlZml4ICsgZ190YWdzZWwudGFnKTsKCQllbGVtLmNsYXNzTGlzdC5yZW1vdmUocHJlZml4ICsgJ2hpZ2hsaWdodGVkJyk7CgoJCWlmIChnX3RhZ3NlbC50YWcgPT0gdGFnKSB7CgkJCWdfdGFnc2VsID0gdW5kZWZpbmVkOwoJCQlzdGF0ZXNlbFVwZGF0ZSgpOwoJCQlyZXR1cm47CgkJfQoJfQoKCWVsZW0gPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZChwcmVmaXggKyB0YWcpOwoJZWxlbS5jbGFzc0xpc3QuYWRkKHByZWZpeCArICdoaWdobGlnaHRlZCcpOwoJZ190YWdzZWwgPSB7IHRhZzogdGFnIH07CglzdGF0ZXNlbFVwZGF0ZSgpOwp9OwoKdmFyIHN0YXRlc2VsQ2xlYXJUYWdib3ggPSBmdW5jdGlvbiAoKQp7Cgl2YXIgdGFnYm94ID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLXRhZ2JveCcpLCBlbGVtOwoKCWlmICghdGFnYm94KQoJCXJldHVybjsKCgl3aGlsZSAodGFnYm94LmNoaWxkTm9kZXMubGVuZ3RoID4gMCkKCQl0YWdib3gucmVtb3ZlQ2hpbGQodGFnYm94LmNoaWxkTm9kZXNbMF0pOwoKCWVsZW0gPSBnX3N2Z0RvYy5nZXRFbGVtZW50QnlJZCgnc3RhdGVtYXAtdGFnYm94LXNlbGVjdCcpOwoKCXdoaWxlIChlbGVtLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkKCQllbGVtLnJlbW92ZUNoaWxkKGVsZW0uY2hpbGROb2Rlc1swXSk7Cn07Cgp2YXIgc3RhdGVzZWxTZWxlY3QgPSBmdW5jdGlvbiAoc3RhdGVtYXAsIHN0YXRlKQp7Cgl2YXIgbGVnZW5kID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLWxlZ2VuZC0nICsKCSAgICBnX3N0YXRlbWFwc1tzdGF0ZW1hcF0ubGVnZW5kICsgJy0nICsgc3RhdGUpOwoJdmFyIHN0YXRlcyA9IGdfc3RhdGVtYXBzW3N0YXRlbWFwXS5zdGF0ZXM7Cgl2YXIgYWxsdGFncyA9IGdfc3RhdGVtYXBzW3N0YXRlbWFwXS50YWdzOwoJdmFyIHRhZ3MgPSB7fTsKCXZhciBpLCB0OwoJdmFyIGxtYXJnaW4gPSAyMDsKCXZhciBvZmZzZXQgPSBnbG9iYWxzLmxtYXJnaW4gKyBnbG9iYWxzLnBpeGVsV2lkdGg7CgoJbGVnZW5kLmNsYXNzTGlzdC5hZGQoJ3N0YXRlbWFwLWxlZ2VuZC1oaWdobGlnaHRlZCcpOwoJc3RhdGVzZWxDbGVhclRhZ2JveCgpOwoKCXQgPSAndGFncyBmb3IgJyArIHN0YXRlc1tzdGF0ZV0ubmFtZTsKCgl2YXIgdGFnYm94ID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLXRhZ2JveCcpOwoJdmFyIHggPSBvZmZzZXQgKyBsbWFyZ2luOwoJdmFyIHkgPSBnbG9iYWxzLnRtYXJnaW47Cgl2YXIgeDIgPSB4ICsgKGdsb2JhbHMudGFnV2lkdGggLSBsbWFyZ2luKTsKCgl2YXIgdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyh0YWdib3gubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJdGV4dC5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10YWdib3gtaGVhZGVyJyk7Cgl0ZXh0LmNsYXNzTGlzdC5hZGQoJ3NhbnNzZXJpZicpOwoKCXRleHQuYXBwZW5kQ2hpbGQoZ19zdmdEb2MuY3JlYXRlVGV4dE5vZGUodCkpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneCcsIHgpOwoJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHkpOwoJdGFnYm94LmFwcGVuZENoaWxkKHRleHQpOwoJeSArPSAxMDsKCgl2YXIgbGluZSA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyh0YWdib3gubmFtZXNwYWNlVVJJLCAnbGluZScpOwoJbGluZS5jbGFzc0xpc3QuYWRkKCdzdGF0ZW1hcC10YWdib3gtaGVhZGVyLWxpbmUnKTsKCWxpbmUueDEuYmFzZVZhbC52YWx1ZSA9IHggLSAyOwoJbGluZS55MS5iYXNlVmFsLnZhbHVlID0geTsKCWxpbmUueDIuYmFzZVZhbC52YWx1ZSA9IHgyOwoJbGluZS55Mi5iYXNlVmFsLnZhbHVlID0geTsKCXRhZ2JveC5hcHBlbmRDaGlsZChsaW5lKTsKCXkgKz0gMjA7CgoJLyoKCSAqIE5vdyBhZGQgdGV4dCBmb3IgZWFjaCBwb3NzaWJsZSB0YWcgZm9yIHRoaXMgc3RhdGUuCgkgKi8KCWZvciAoaSA9IDA7IGkgPCBhbGx0YWdzLmxlbmd0aDsgaSsrKSB7CgkJaWYgKGFsbHRhZ3NbaV0uc3RhdGUgIT09IHN0YXRlKQoJCQljb250aW51ZTsKCgkJZm9yICh0IGluIGFsbHRhZ3NbaV0pIHsKCQkJaWYgKHQgPT0gJ3N0YXRlJyB8fCB0ID09ICd0YWcnKQoJCQkJY29udGludWU7CgoJCQl0YWdzW3RdID0gdHJ1ZTsKCQl9Cgl9CgoJdGFncyA9IE9iamVjdC5rZXlzKHRhZ3MpLnNvcnQoKTsKCgl2YXIgY2xpY2sgPSBmdW5jdGlvbiAodGFnKSB7CgkJcmV0dXJuIChmdW5jdGlvbiAoZXZ0KSB7IHN0YXRlc2VsVGFnU2VsZWN0KGV2dCwgdGFnKTsgfSk7Cgl9OwoKCWZvciAoaSA9IDA7IGkgPCB0YWdzLmxlbmd0aDsgaSsrKSB7CgkJdGV4dCA9IGdfc3ZnRG9jLmNyZWF0ZUVsZW1lbnROUyh0YWdib3gubmFtZXNwYWNlVVJJLCAndGV4dCcpOwoJCXRleHQuY2xhc3NMaXN0LmFkZCgnc3RhdGVtYXAtdGFnYm94LXRhZycpOwoJCXRleHQuY2xhc3NMaXN0LmFkZCgnc2Fuc3NlcmlmJyk7CgkJdGV4dC5pZCA9ICdzdGF0ZW1hcC10YWdib3gtdGFnLScgKyB0YWdzW2ldOwoKCQl0ZXh0LmFwcGVuZENoaWxkKGdfc3ZnRG9jLmNyZWF0ZVRleHROb2RlKHRhZ3NbaV0pKTsKCQl0ZXh0LnNldEF0dHJpYnV0ZU5TKG51bGwsICd4JywgeCk7CgkJdGV4dC5zZXRBdHRyaWJ1dGVOUyhudWxsLCAneScsIHkpOwoJCXRleHQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGljayh0YWdzW2ldKSk7CgoJCXRhZ2JveC5hcHBlbmRDaGlsZCh0ZXh0KTsKCQl5ICs9IDE4OwoJfQoKCWdfc3RhdGVzZWwgPSB7IHN0YXRlbWFwOiBzdGF0ZW1hcCwgc3RhdGU6IHN0YXRlLCB4OiB4LCB5OiB5LCB4MjogeDIgfTsKCXN0YXRlc2VsVXBkYXRlKCk7Cn07Cgp2YXIgc3RhdGVzZWxDbGVhciA9IGZ1bmN0aW9uICgpCnsKCXZhciBzdGF0ZSwgc3RhdGVtYXAsIGxlZ2VuZDsKCglpZiAoZ19zdGF0ZXNlbCA9PSB1bmRlZmluZWQpCgkJcmV0dXJuICgtMSk7CgoJc3RhdGUgPSBnX3N0YXRlc2VsLnN0YXRlOwoJc3RhdGVtYXAgPSBnX3N0YXRlc2VsLnN0YXRlbWFwOwoJbGVnZW5kID0gZ19zdmdEb2MuZ2V0RWxlbWVudEJ5SWQoJ3N0YXRlbWFwLWxlZ2VuZC0nICsKCSAgICBzdGF0ZW1hcCArICctJyArIHN0YXRlKTsKCWxlZ2VuZC5jbGFzc0xpc3QucmVtb3ZlKCdzdGF0ZW1hcC1sZWdlbmQtaGlnaGxpZ2h0ZWQnKTsKCglzdGF0ZXNlbENsZWFyVGFnYm94KCk7CglnX3N0YXRlc2VsID0gdW5kZWZpbmVkOwoJZ190YWdzZWwgPSB1bmRlZmluZWQ7CgoJcmV0dXJuIChzdGF0ZSk7Cn07Cgp2YXIgc3RhdGVtYXBzVXBkYXRlID0gZnVuY3Rpb24gKCkKewoJdmFyIGk7Cgl2YXIgbmV3TWF0cml4ID0gJ21hdHJpeCgnICsgIGdfdHJhbnNNYXRyaXguam9pbignICcpICsgJyknOwoKCWZvciAoaSA9IDA7IGkgPCBnX3N0YXRlbWFwcy5sZW5ndGg7IGkrKykgewoJCWdfc3RhdGVtYXBzW2ldLmVsZW0uc2V0QXR0cmlidXRlTlMobnVsbCwKCQkgICAgJ3RyYW5zZm9ybScsIG5ld01hdHJpeCk7Cgl9Cn07CgovKgogKiBBbGwgb2YgdGhlIGZvbGxvd2luZyAqY2xpY2soKSBmdW5jdGlvbnMgYXJlIGFkZGVkIGF0IHRoZSB0aW1lIG9mIHN0YXRlbWFwCiAqIGdlbmVyYXRpb24uCiAqLwp2YXIgbGVnZW5kY2xpY2sgPSBmdW5jdGlvbiAoZXZ0LCBzdGF0ZW1hcCwgc3RhdGUpCnsKCWlmIChnbG9iYWxzLm5vdGFncyB8fCBzdGF0ZXNlbENsZWFyKCkgPT0gc3RhdGUpCgkJcmV0dXJuOwoKCXN0YXRlc2VsU2VsZWN0KHN0YXRlbWFwLCBzdGF0ZSk7CglzdGF0ZXNlbFVwZGF0ZSgpOwp9OwoKdmFyIG1hcGNsaWNrID0gZnVuY3Rpb24gKGV2dCwgaWR4KQp7Cgl2YXIgeCA9IGV2dC5jbGllbnRYIC0gZ19vZmZzZXQ7CgoJaWYgKGV2dC5zaGlmdEtleSB8fCBldnQuYWx0S2V5KSB7CgkJaWYgKCFnX3RpbWViYXIgfHwgIWdfdGltZWJhci5iYXIpCgkJCXJldHVybjsKCgkJdGltZWJhclJlbW92ZVN1YmJhcihnX3RpbWViYXIpOwoJCXRpbWViYXJDcmVhdGVTdWJiYXIoZ190aW1lYmFyLCB4LCBldnQuY2xpZW50WSk7CgkJcmV0dXJuOwoJfQoKCXRpbWViYXJSZW1vdmUoZ190aW1lYmFyKTsKCWdfdGltZWJhciA9IHRpbWViYXJDcmVhdGUoeCk7CgoJc3RhdGViYXJSZW1vdmUoZ19zdGF0ZWJhcik7CglnX3N0YXRlYmFyID0gc3RhdGViYXJDcmVhdGUoZXZ0LnRhcmdldCwgaWR4KTsKCglzdGF0ZXNlbFVwZGF0ZSgpOwp9OwoKdmFyIHBhbmNsaWNrID0gZnVuY3Rpb24gKGR4LCBkeSkKewoJdmFyIG1pblggPSAtKGdfd2lkdGggKiBnX3RyYW5zTWF0cml4WzBdIC0gZ193aWR0aCk7Cgl2YXIgbWluWSA9IC0oZ19oZWlnaHQgKiBnX3RyYW5zTWF0cml4WzBdIC0gZ19oZWlnaHQpOwoKCWdfdHJhbnNNYXRyaXhbNF0gKz0gZHg7CglnX3RyYW5zTWF0cml4WzVdICs9IGR5OwoKCXRpbWViYXJIaWRlKGdfdGltZWJhcik7CgoJaWYgKGdfdHJhbnNNYXRyaXhbNF0gPiAwKQoJCWdfdHJhbnNNYXRyaXhbNF0gPSAwOwoKCWlmIChnX3RyYW5zTWF0cml4WzRdIDwgbWluWCkKCQlnX3RyYW5zTWF0cml4WzRdID0gbWluWDsKCglpZiAoZ190cmFuc01hdHJpeFs1XSA+IDApCgkJZ190cmFuc01hdHJpeFs1XSA9IDA7CgoJaWYgKGdfdHJhbnNNYXRyaXhbNV0gPCBtaW5ZKQoJCWdfdHJhbnNNYXRyaXhbNV0gPSBtaW5ZOwoKCXRpbWVTZXRTcGFuTGFiZWwoKTsKCXN0YXRlbWFwc1VwZGF0ZSgpOwoJdGltZWJhclNob3coZ190aW1lYmFyKTsKCXN0YXRlc2VsVXBkYXRlKCk7Cn07Cgp2YXIgem9vbWNsaWNrID0gZnVuY3Rpb24gKHNjYWxlKQp7Cgl2YXIgaTsKCgl0aW1lYmFySGlkZShnX3RpbWViYXIpOwoKCWZvciAoaSA9IDA7IGkgPCBnX3RyYW5zTWF0cml4Lmxlbmd0aDsgaSsrKSB7CgkJLyoKCQkgKiBXZSBkb24ndCBzY2FsZSB0aGUgWSBkaXJlY3Rpb24gb24gYSB6b29tLgoJCSAqLwoJCWlmIChpICE9IDMpCgkJCWdfdHJhbnNNYXRyaXhbaV0gKj0gc2NhbGU7Cgl9CgoJdmFyIG1pblggPSAtKGdfd2lkdGggKiBnX3RyYW5zTWF0cml4WzBdIC0gZ193aWR0aCk7Cgl2YXIgbWluWSA9IC0oZ19oZWlnaHQgKiBnX3RyYW5zTWF0cml4WzBdIC0gZ19oZWlnaHQpOwoKCWdfdHJhbnNNYXRyaXhbNF0gKz0gKDEgLSBzY2FsZSkgKiBnX3dpZHRoIC8gMjsKCXRpbWViYXJTZXRNaWRkbGUoZ190aW1lYmFyKTsKCglpZiAoZ190cmFuc01hdHJpeFs0XSA+IDApCgkJZ190cmFuc01hdHJpeFs0XSA9IDA7CgoJaWYgKGdfdHJhbnNNYXRyaXhbNF0gPCBtaW5YKQoJCWdfdHJhbnNNYXRyaXhbNF0gPSBtaW5YOwoKCWlmIChnX3RyYW5zTWF0cml4WzVdID4gMCkKCQlnX3RyYW5zTWF0cml4WzVdID0gMDsKCglpZiAoZ190cmFuc01hdHJpeFs1XSA8IG1pblkpCgkJZ190cmFuc01hdHJpeFs1XSA9IG1pblk7CgoJaWYgKGdfdHJhbnNNYXRyaXhbMF0gPCAxKQoJCWdfdHJhbnNNYXRyaXggPSBbMSwgMCwgMCwgMSwgMCwgMF07CgoJdGltZVNldFNwYW5MYWJlbCgpOwoJc3RhdGVtYXBzVXBkYXRlKCk7Cgl0aW1lYmFyU2hvdyhnX3RpbWViYXIpOwoJc3RhdGVzZWxVcGRhdGUoKTsKfTsKCl1dPjwvc2NyaXB0Pgo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPjwhW0NEQVRBWwovKgogKiBDb3B5cmlnaHQgMjAxOCwgSm95ZW50LCBJbmMuCiAqLwoKLnNhbnNzZXJpZiB7Cglmb250LWZhbWlseTogVmVyZGFuYSwgQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjsKfQoKLmJ1dHRvbiB7CiAgICAgICAgZmlsbDogI2ZmZjsKfQoKLnN0YXRlbWFwLWJvcmRlciB7CglmaWxsOiBub25lOwoJc3Ryb2tlOiBibGFjazsKCXN0cm9rZS13aWR0aDogMC41Owp9Cgouc3RhdGVtYXAtaGlnaGxpZ2h0IHsKCWZpbGw6CQlibHVlOwp9Cgouc3RhdGVtYXAtdGl0bGUgewoJZm9udC1zaXplOgkxMHB0OwoJZm9udC13ZWlnaHQ6CWJvbGQ7Cgl0ZXh0LWFuY2hvcjoJbWlkZGxlOwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRpbWVsYWJlbCB7Cglmb250LXNpemU6CThwdDsKCXRleHQtYW5jaG9yOgltaWRkbGU7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGltZWJhciB7CglzdHJva2U6CQlibHVlOwoJZmlsbDoJCWJsdWU7CglzdHJva2Utd2lkdGg6CTFweDsKfQoKLnN0YXRlbWFwLXRpbWV0ZXh0IHsKCWZvbnQtc2l6ZToJOHB0OwoJZm9udC13ZWlnaHQ6CW5vcm1hbDsKCWZpbGw6CQlibHVlOwoJc3Ryb2tlOgkJYmx1ZTsKCXN0cm9rZS13aWR0aDoJMHB4OwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRpbWVicmVha3RleHQgewoJZm9udC1zaXplOgk4cHQ7Cglmb250LXdlaWdodDoJYm9sZDsKCWZpbGw6CQlibHVlOwoJc3Ryb2tlOgkJd2hpdGU7CglzdHJva2Utd2lkdGg6CTAuM3B4OwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXN1YmJhciB7CglzdHJva2U6CQlibHVlOwoJZmlsbDoJCWJsdWU7CglzdHJva2Utd2lkdGg6CTFweDsKCXN0cm9rZS1kYXNoYXJyYXk6IDUuNzsKfQoKLnN0YXRlbWFwLXN1YmJhci1zcGFuIHsKCXN0cm9rZToJCWJsdWU7CglmaWxsOgkJYmx1ZTsKCXN0cm9rZS13aWR0aDoJMC43NXB4OwoJc3Ryb2tlLWRhc2hhcnJheTogMTsKfQoKLnN0YXRlbWFwLXN1YmJhci10ZXh0IHsKCWZvbnQtc2l6ZToJOHB0OwoJZm9udC13ZWlnaHQ6CWJvbGQ7CglmaWxsOgkJYmx1ZTsKCXN0cm9rZToJCXdoaXRlOwoJc3Ryb2tlLXdpZHRoOgkwLjNweDsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC1zdGF0ZWJhciB7CglzdHJva2U6CQlibHVlOwoJZmlsbDoJCWJsdWU7CglzdHJva2Utd2lkdGg6CTFweDsKfQoKLnN0YXRlbWFwLXN0YXRldGV4dCB7Cglmb250LXNpemU6CThwdDsKCWZvbnQtd2VpZ2h0Oglub3JtYWw7CglmaWxsOgkJYmx1ZTsKCXN0cm9rZToJCWJsdWU7CglzdHJva2Utd2lkdGg6CTBweDsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10aW1lbGluZSB7CglzdHJva2U6IGJsYWNrOwoJc3Ryb2tlLXdpZHRoOgkwLjVwdDsKCW1hcmtlci1zdGFydDoJdXJsKCNzdGFydGFycm93KTsKCW1hcmtlci1lbmQ6CXVybCgjZW5kYXJyb3cpOwp9Cgouc3RhdGVtYXAtbGVnZW5kIHsKCXN0cm9rZTogYmxhY2s7CglzdHJva2Utd2lkdGg6CTAuNXB0Owp9Cgouc3RhdGVtYXAtbGVnZW5kLWhpZ2hsaWdodGVkIHsKCXN0cm9rZToJCWJsdWU7CglzdHJva2Utd2lkdGg6CTNwdDsKfQoKLnN0YXRlbWFwLWxlZ2VuZGxhYmVsIHsKCWZvbnQtc2l6ZToJN3B0OwoJdGV4dC1hbmNob3I6CW1pZGRsZTsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10YWdib3ggewoJc3Ryb2tlOgkJYmxhY2s7CglzdHJva2Utd2lkdGg6CTAuNXB0OwoJYWxpZ25tZW50LWJhc2VsaW5lOgloYW5naW5nOwoJdGV4dC1hbmNob3I6CXN0YXJ0OwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRhZ2JveC1oZWFkZXIgewoJZm9udC1zaXplOgk5cHQ7Cglmb250LXdlaWdodDoJYm9sZDsKCXRleHQtYW5jaG9yOglzdGFydDsKCWZvbnQtc3R5bGU6CW9ibGlxdWU7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGFnYm94LWhlYWRlci1saW5lIHsKCXN0cm9rZToJCWJsYWNrOwoJc3Ryb2tlLXdpZHRoOgkxcHQ7Cn0KCi5zdGF0ZW1hcC10YWdib3gtdGFnIHsKCWZvbnQtc2l6ZToJOXB0OwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRhZ2JveC10YWctaGlnaGxpZ2h0ZWQgewoJZm9udC13ZWlnaHQ6CWJvbGQ7Cn0KCi5zdGF0ZW1hcC10YWdib3gtc2VsZWN0LWhlYWRlciB7Cglmb250LXNpemU6CThwdDsKCXRleHQtYW5jaG9yOglzdGFydDsKCWZvbnQtc3R5bGU6CW9ibGlxdWU7CgljdXJzb3I6CQlkZWZhdWx0Owp9Cgouc3RhdGVtYXAtdGFnYm94LXNlbGVjdCB7Cglmb250LXNpemU6CThwdDsKCXRleHQtYW5jaG9yOglzdGFydDsKCWN1cnNvcjoJCWRlZmF1bHQ7Cn0KCi5zdGF0ZW1hcC10YWdib3gtc2VsZWN0LXBlcmMgewoJZm9udC1zaXplOgk4cHQ7Cgl0ZXh0LWFuY2hvcjoJZW5kOwoJY3Vyc29yOgkJZGVmYXVsdDsKfQoKLnN0YXRlbWFwLXRhZ2JveC1zZWxlY3QtaGVhZGVyLWxpbmUgewoJc3Ryb2tlOgkJYmxhY2s7CglzdHJva2Utd2lkdGg6CTAuNXB0Owp9Cgouc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1zdW0tbGluZSB7CglzdHJva2U6CQlibGFjazsKCXN0cm9rZS13aWR0aDoJMC4yNXB0Owp9Cgouc3RhdGVtYXAtdGFnYm94LXNlbGVjdC1oaWdobGlnaHRlZCB7Cglmb250LXdlaWdodDoJYm9sZDsKfQoKXV0+PC9zdHlsZT4KCjwhLS0gVGhpcyBmaWxlIGlzIHB1bGxlZCBpbnRvIHRoZSA8ZGVmcz4gc2VjdGlvbiAhLS0+CgogPG1hcmtlciBpZD0ic3RhcnRhcnJvdyIgbWFya2VyV2lkdGg9IjEwIiBtYXJrZXJIZWlnaHQ9IjciIAogICAgcmVmWD0iMTAiIHJlZlk9IjMuNSIgb3JpZW50PSJhdXRvIj4KICAgICAgPHBvbHlnb24gcG9pbnRzPSIxMCAwLCAxMCA3LCAwIDMuNSIgZmlsbD0iYmxhY2siIC8+CiAgICA8L21hcmtlcj4KICAgIDxtYXJrZXIgaWQ9ImVuZGFycm93IiBtYXJrZXJXaWR0aD0iMTAiIG1hcmtlckhlaWdodD0iNyIgCiAgICByZWZYPSIwIiByZWZZPSIzLjUiIG9yaWVudD0iYXV0byIgbWFya2VyVW5pdHM9InN0cm9rZVdpZHRoIj4KICAgICAgICA8cG9seWdvbiBwb2ludHM9IjAgMCwgMTAgMy41LCAwIDciIGZpbGw9ImJsYWNrIiAvPgogICAgPC9tYXJrZXI+CgoKPC9kZWZzPgo8c3ZnIHg9IjEzOHB4IiB5PSI2MHB4IiB3aWR0aD0iODYycHgiIGhlaWdodD0iMzQwcHgiPgo8cmVjdCB4PSIwcHgiIHk9IjBweCIgd2lkdGg9Ijg2MnB4IiBoZWlnaHQ9IjM0MHB4IiBmaWxsPSIjZjBmMGYwIiBpZD0ic3RhdGVtYXAtMC1oaWdobGlnaHQiIC8+CjxnIGlkPSJzdGF0ZW1hcC0wIiB0cmFuc2Zvcm09Im1hdHJpeCgxIDAgMCAxIDAgMCkiPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMC0yLWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSAwLTItZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTAtMi10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDAtMi10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0wLTMtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDAtMy1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTAtMy10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDAtMy10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMzAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0wLTQtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDAtNC1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSI0MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTAtNC10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDAtNC10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iNTAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0wLTUtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDAtNS1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSI2MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTAtNS10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDAtNS10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iNzAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0xLTMtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDEtMy1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSI4MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTEtMy10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDEtMy10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iOTAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTItZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDItMi1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxMDAiIHdpZHRoPSI4MTAuNjgiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigxMjgsIDEyOCwgMTI4KSIgLz4KPHJlY3QgeD0iODEwLjI4IiB5PSIxMDAiIHdpZHRoPSIxLjM1Nzc3Nzc3Nzc3Nzc3NzgiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMSkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDE2NSwgMCkiIC8+CjxyZWN0IHg9IjgxMS4yMzc3Nzc3Nzc3Nzc4IiB5PSIxMDAiIHdpZHRoPSIxLjM1Nzc3Nzc3Nzc3Nzc3NzgiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMikiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMCkiIC8+CjxyZWN0IHg9IjgxMi4xOTU1NTU1NTU1NTU1IiB5PSIxMDAiIHdpZHRoPSI1MC4yMDQ0NDQ0NDQ0NDQ0NCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAzKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMTY1LCAwKSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi0yLXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMi0yLXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxMTAiIHdpZHRoPSI4MTAuNjgiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAwKSIgLz4KPHJlY3QgeD0iODEwLjI4IiB5PSIxMTAiIHdpZHRoPSI1Mi4xMiIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAxKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxyZWN0IHg9IjAiIHk9IjEyMCIgd2lkdGg9IjExNi44NDg4ODg4ODg4ODg5IgogICAgICAgICAgICAgICAgICAgIGhlaWdodD0iMTAiIHN0eWxlPSJmaWxsOiNmMGYwZjAiIC8+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0yLTMtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDItMy1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIxMTYuODQ4ODg4ODg4ODg4OSIgeT0iMTIwIiB3aWR0aD0iNzIuMjMzMzMzMzMzMzMzMzMiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAyNTUpIiAvPgo8cmVjdCB4PSIxODguNjgyMjIyMjIyMjIyMiIgeT0iMTIwIiB3aWR0aD0iNjczLjcxNzc3Nzc3Nzc3NzgiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMSkiIHN0eWxlPSJmaWxsOnJnYigxMjgsIDEyOCwgMTI4KSIgLz4KPC9nPgo8cmVjdCB4PSIwIiB5PSIxMzAiIHdpZHRoPSIxMTYuODQ4ODg4ODg4ODg4OSIKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjEwIiBzdHlsZT0iZmlsbDojZjBmMGYwIiAvPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMi0zLXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMi0zLXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIxMTYuODQ4ODg4ODg4ODg4OSIgeT0iMTMwIiB3aWR0aD0iNzQ1LjU1MTExMTExMTExMTEiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAwKSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMy0wLWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSAzLTAtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTQwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMy0wLXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMy0wLXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxNTAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0zLTEtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDMtMS1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxNjAiIHdpZHRoPSIzOTMuMDg4ODg4ODg4ODg4ODUiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigxMjgsIDEyOCwgMTI4KSIgLz4KPHJlY3QgeD0iMzkyLjY4ODg4ODg4ODg4ODg3IiB5PSIxNjAiIHdpZHRoPSIxLjM1Nzc3Nzc3Nzc3Nzc3NzgiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMSkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDE2NSwgMCkiIC8+CjxyZWN0IHg9IjM5My42NDY2NjY2NjY2NjY2NSIgeT0iMTYwIiB3aWR0aD0iMS4zNTc3Nzc3Nzc3Nzc3Nzc4IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDIpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDApIiAvPgo8cmVjdCB4PSIzOTQuNjA0NDQ0NDQ0NDQ0NCIgeT0iMTYwIiB3aWR0aD0iNTcuODY2NjY2NjY2NjY2NjciIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMykiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDE2NSwgMCkiIC8+CjxyZWN0IHg9IjQ1Mi4wNzExMTExMTExMTEyIiB5PSIxNjAiIHdpZHRoPSIzNC44OCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCA0KSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAwKSIgLz4KPHJlY3QgeD0iNDg2LjU1MTExMTExMTExMTEiIHk9IjE2MCIgd2lkdGg9IjcyLjIzMzMzMzMzMzMzMzMzIiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDUpIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8cmVjdCB4PSI1NTguMzg0NDQ0NDQ0NDQ0NCIgeT0iMTYwIiB3aWR0aD0iMzA0LjAxNTU1NTU1NTU1NTUiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgNikiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMy0xLXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMy0xLXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxNzAiIHdpZHRoPSIzOTMuMDg4ODg4ODg4ODg4ODUiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigwLCAwLCAwKSIgLz4KPHJlY3QgeD0iMzkyLjY4ODg4ODg4ODg4ODg3IiB5PSIxNzAiIHdpZHRoPSI0NjkuNzExMTExMTExMTExMDUiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMSkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMy0zLWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSAzLTMtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMTgwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtMy0zLXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgMy0zLXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIxOTAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0zLTQtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDMtNC1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyMDAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC0zLTQtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSAzLTQtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjIxMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTQtMy1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgNC0zLWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjIyMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTQtMy10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDQtMy10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMjMwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtNC00LWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSA0LTQtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMjQwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtNC00LXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgNC00LXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyNTAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC01LTQtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDUtNC1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIyNjAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC01LTQtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSA1LTQtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjI3MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTUtNS1kZWJvdW5jZXIiPjx0aXRsZT5FbnRpdHkgNS01LWRlYm91bmNlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjI4MCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPGcgaWQ9InN0YXRlbWFwLWVudGl0eS0wLTUtNS10cmlnZ2VyIj48dGl0bGU+RW50aXR5IDUtNS10cmlnZ2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMjkwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtNi00LWRlYm91bmNlciI+PHRpdGxlPkVudGl0eSA2LTQtZGVib3VuY2VyPC90aXRsZT4KPHJlY3QgeD0iMCIgeT0iMzAwIiB3aWR0aD0iODYyLjQiIGhlaWdodD0iMTAiIG9uY2xpY2s9Im1hcGNsaWNrKGV2dCwgMCkiIHN0eWxlPSJmaWxsOnJnYigyNTUsIDI1NSwgMjU1KSIgLz4KPC9nPgo8ZyBpZD0ic3RhdGVtYXAtZW50aXR5LTAtNi00LXRyaWdnZXIiPjx0aXRsZT5FbnRpdHkgNi00LXRyaWdnZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIzMTAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC02LTUtZGVib3VuY2VyIj48dGl0bGU+RW50aXR5IDYtNS1kZWJvdW5jZXI8L3RpdGxlPgo8cmVjdCB4PSIwIiB5PSIzMjAiIHdpZHRoPSI4NjIuNCIgaGVpZ2h0PSIxMCIgb25jbGljaz0ibWFwY2xpY2soZXZ0LCAwKSIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8L2c+CjxnIGlkPSJzdGF0ZW1hcC1lbnRpdHktMC02LTUtdHJpZ2dlciI+PHRpdGxlPkVudGl0eSA2LTUtdHJpZ2dlcjwvdGl0bGU+CjxyZWN0IHg9IjAiIHk9IjMzMCIgd2lkdGg9Ijg2Mi40IiBoZWlnaHQ9IjEwIiBvbmNsaWNrPSJtYXBjbGljayhldnQsIDApIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+CjwvZz4KPC9nPgo8ZGVmcz4KPHNjcmlwdCB0eXBlPSJhcHBsaWNhdGlvbi9lY21hc2NyaXB0Ij48IVtDREFUQVsKZ19zdGF0ZW1hcHNbMF0gPSB7CiAgIm9mZnNldCI6IDAsCiAgInN0YXRlcyI6IFsKICAgIHsKICAgICAgIm5hbWUiOiAic3RhYmxlLXJlbGVhc2UiLAogICAgICAidmFsdWUiOiAwLAogICAgICAiY29sb3IiOiAid2hpdGUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJib3VuY2luZy1yZWwtdG8tcHJlIiwKICAgICAgInZhbHVlIjogMSwKICAgICAgImNvbG9yIjogImJsdWUiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJib3VuY2luZy1yZWwtdG8tcmVsIiwKICAgICAgInZhbHVlIjogMiwKICAgICAgImNvbG9yIjogImJyb3duIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiZW1pdC1yZWxlYXNlIiwKICAgICAgInZhbHVlIjogMywKICAgICAgImNvbG9yIjogIndoaXRlIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAic3RhYmxlLXByZXNzIiwKICAgICAgInZhbHVlIjogNCwKICAgICAgImNvbG9yIjogImdyZXkiCiAgICB9LAogICAgewogICAgICAibmFtZSI6ICJib3VuY2luZy1wcmUtdG8tcHJlIiwKICAgICAgInZhbHVlIjogNSwKICAgICAgImNvbG9yIjogInllbGxvdyIKICAgIH0sCiAgICB7CiAgICAgICJuYW1lIjogImJvdW5jaW5nLXByZS10by1yZWwiLAogICAgICAidmFsdWUiOiA2LAogICAgICAiY29sb3IiOiAib3JhbmdlIgogICAgfSwKICAgIHsKICAgICAgIm5hbWUiOiAiZW1pdC1wcmVzcyIsCiAgICAgICJ2YWx1ZSI6IDcsCiAgICAgICJjb2xvciI6ICJibGFjayIKICAgIH0KICBdLAogICJlbnRpdHlLaW5kIjogIkVudGl0eSIsCiAgInRpdGxlIjogImtleWJvYXJkIGRlYm91bmNpbmciLAoiZGF0YSI6IHsgCiIzLTMtdHJpZ2dlciI6IFsKeyAidCI6IDU1NDcwMDAwMDAwMCwgInMiOiAzfQpdCiwiMi0yLWRlYm91bmNlciI6IFsKeyAidCI6IDU1NDcwMDAwMDAwMCwgInMiOiA0fSwKeyAidCI6IDU1NDg2OTIwMDAwMCwgInMiOiA2fSwKeyAidCI6IDU1NDg2OTQwMDAwMCwgInMiOiA1fSwKeyAidCI6IDU1NDg2OTYwMDAwMCwgInMiOiA2fQpdCiwiNC00LXRyaWdnZXIiOiBbCnsgInQiOiA1NTQ3MDAwMDAwMDAsICJzIjogM30KXQosIjAtMi10cmlnZ2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDN9Cl0KLCIzLTAtdHJpZ2dlciI6IFsKeyAidCI6IDU1NDcwMDAwMDAwMCwgInMiOiAzfQpdCiwiNi00LWRlYm91bmNlciI6IFsKeyAidCI6IDU1NDcwMDAwMDAwMCwgInMiOiAwfQpdCiwiMC0yLWRlYm91bmNlciI6IFsKeyAidCI6IDU1NDcwMDAwMDAwMCwgInMiOiAwfQpdCiwiMy00LXRyaWdnZXIiOiBbCnsgInQiOiA1NTQ3MDAwMDAwMDAsICJzIjogM30KXQosIjYtNS1kZWJvdW5jZXIiOiBbCnsgInQiOiA1NTQ3MDAwMDAwMDAsICJzIjogMH0KXQosIjUtNS10cmlnZ2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDN9Cl0KLCI2LTUtdHJpZ2dlciI6IFsKeyAidCI6IDU1NDcwMDAwMDAwMCwgInMiOiAzfQpdCiwiMS0zLXRyaWdnZXIiOiBbCnsgInQiOiA1NTQ3MDAwMDAwMDAsICJzIjogM30KXQosIjAtNS10cmlnZ2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDN9Cl0KLCIxLTMtZGVib3VuY2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDB9Cl0KLCIwLTQtZGVib3VuY2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDB9Cl0KLCIwLTUtZGVib3VuY2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDB9Cl0KLCI0LTQtZGVib3VuY2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDB9Cl0KLCI1LTUtZGVib3VuY2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDB9Cl0KLCIzLTQtZGVib3VuY2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDB9Cl0KLCI2LTQtdHJpZ2dlciI6IFsKeyAidCI6IDU1NDcwMDAwMDAwMCwgInMiOiAzfQpdCiwiMy0xLXRyaWdnZXIiOiBbCnsgInQiOiA1NTQ3MDAwMDAwMDAsICJzIjogN30sCnsgInQiOiA1NTQ3ODIwMDAwMDAsICJzIjogM30KXQosIjAtMy10cmlnZ2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDN9Cl0KLCIzLTEtZGVib3VuY2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDR9LAp7ICJ0IjogNTU0NzgyMDAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTU0NzgyMjAwMDAwLCAicyI6IDV9LAp7ICJ0IjogNTU0NzgyNDAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTU0Nzk0NDAwMDAwLCAicyI6IDV9LAp7ICJ0IjogNTU0ODAxNjAwMDAwLCAicyI6IDZ9LAp7ICJ0IjogNTU0ODE2NjAwMDAwLCAicyI6IDB9Cl0KLCI0LTMtdHJpZ2dlciI6IFsKeyAidCI6IDU1NDcwMDAwMDAwMCwgInMiOiAzfQpdCiwiNS00LXRyaWdnZXIiOiBbCnsgInQiOiA1NTQ3MDAwMDAwMDAsICJzIjogM30KXQosIjAtNC10cmlnZ2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDN9Cl0KLCI0LTMtZGVib3VuY2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDB9Cl0KLCIzLTMtZGVib3VuY2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDB9Cl0KLCIyLTMtZGVib3VuY2VyIjogWwp7ICJ0IjogNTU0NzI0NDAwMDAwLCAicyI6IDF9LAp7ICJ0IjogNTU0NzM5NDAwMDAwLCAicyI6IDR9Cl0KLCIwLTMtZGVib3VuY2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDB9Cl0KLCIzLTAtZGVib3VuY2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDB9Cl0KLCI1LTQtZGVib3VuY2VyIjogWwp7ICJ0IjogNTU0NzAwMDAwMDAwLCAicyI6IDB9Cl0KLCIyLTMtdHJpZ2dlciI6IFsKeyAidCI6IDU1NDcyNDQwMDAwMCwgInMiOiA3fQpdCiwiMi0yLXRyaWdnZXIiOiBbCnsgInQiOiA1NTQ3MDAwMDAwMDAsICJzIjogN30sCnsgInQiOiA1NTQ4NjkyMDAwMDAsICJzIjogM30KXQp9LAplbnRpdGllczogewogICAgICIzLTAtZGVib3VuY2VyIjogeyAgfQogICAgLCAiMC0zLWRlYm91bmNlciI6IHsgIH0KICAgICwgIjAtNS1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICIyLTItZGVib3VuY2VyIjogeyAgfQogICAgLCAiMC00LXRyaWdnZXIiOiB7ICB9CiAgICAsICI1LTUtdHJpZ2dlciI6IHsgIH0KICAgICwgIjQtNC1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICIzLTQtZGVib3VuY2VyIjogeyAgfQogICAgLCAiMy0zLWRlYm91bmNlciI6IHsgIH0KICAgICwgIjQtMy1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICIxLTMtZGVib3VuY2VyIjogeyAgfQogICAgLCAiNC0zLXRyaWdnZXIiOiB7ICB9CiAgICAsICI0LTQtdHJpZ2dlciI6IHsgIH0KICAgICwgIjItMy10cmlnZ2VyIjogeyAgfQogICAgLCAiMi0yLXRyaWdnZXIiOiB7ICB9CiAgICAsICIzLTEtdHJpZ2dlciI6IHsgIH0KICAgICwgIjMtMC10cmlnZ2VyIjogeyAgfQogICAgLCAiNS01LWRlYm91bmNlciI6IHsgIH0KICAgICwgIjAtMy10cmlnZ2VyIjogeyAgfQogICAgLCAiMC0yLXRyaWdnZXIiOiB7ICB9CiAgICAsICIzLTEtZGVib3VuY2VyIjogeyAgfQogICAgLCAiMC01LXRyaWdnZXIiOiB7ICB9CiAgICAsICIxLTMtdHJpZ2dlciI6IHsgIH0KICAgICwgIjAtMi1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICI1LTQtdHJpZ2dlciI6IHsgIH0KICAgICwgIjYtNS1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICIzLTQtdHJpZ2dlciI6IHsgIH0KICAgICwgIjYtNS10cmlnZ2VyIjogeyAgfQogICAgLCAiMC00LWRlYm91bmNlciI6IHsgIH0KICAgICwgIjYtNC1kZWJvdW5jZXIiOiB7ICB9CiAgICAsICI1LTQtZGVib3VuY2VyIjogeyAgfQogICAgLCAiMy0zLXRyaWdnZXIiOiB7ICB9CiAgICAsICIyLTMtZGVib3VuY2VyIjogeyAgfQogICAgLCAiNi00LXRyaWdnZXIiOiB7ICB9Cn0KfSBdXT48L3NjcmlwdD48L2RlZnM+Cjwvc3ZnPgo8cG9seWdvbiBjbGFzcz0ic3RhdGVtYXAtYm9yZGVyIgogIHBvaW50cz0iMTM4IDYwLCAxMDAwIDYwLCAxMDAwIDQwMCwgMTM4IDQwMCIvPgo8dGV4dCB4PSI1NjkiIHk9IjE2IiBjbGFzcz0ic3RhdGVtYXAtdGl0bGUgc2Fuc3NlcmlmIj5TdGF0ZW1hcCBvZiBrZXlib2FyZCBkZWJvdW5jaW5nIGFjdGl2aXR5PC90ZXh0Pgo8dGV4dCB4PSI1NjkiIHk9IjM0IiBjbGFzcz0ic3RhdGVtYXAtdGltZWxhYmVsIHNhbnNzZXJpZiIgaWQ9InN0YXRlbWFwLXRpbWVsYWJlbCI+PC90ZXh0Pgo8bGluZSB4MT0iMTQ4IiB5MT0iNDAiIHgyPSI5OTAiIHkyPSI0MCIKY2xhc3M9InN0YXRlbWFwLXRpbWVsaW5lIiAvPgo8c3ZnIHg9IjIwcHgiIHk9IjYwcHgiIHdpZHRoPSI4OHB4IiBoZWlnaHQ9IjQ1cHgiPgo8c3ZnIHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjJweCIgaGVpZ2h0PSIyMnB4IgogICAgICAgICAgICAgICAgICAgIG9uY2xpY2s9InBhbmNsaWNrKDUwLCAwKSI+PHJlY3QgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiAKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjIycHgiIG9uY2xpY2s9InBhbmNsaWNrKDUwLCAwKSIgY2xhc3M9ImJ1dHRvbiIgLz48c3ZnIHZpZXdCb3g9IjAgMCAxNiAxNiI+DQo8cGF0aCBkPSJNMTAuMjUsMTIuNzVjMC4xOTEsMCwwLjM4NC0wLjA3MiwwLjUyOS0wLjIxOWMwLjI5NC0wLjI5NSwwLjI5NC0wLjc3LDAtMS4wNjJMNy4zMTEsOGwzLjQ2OS0zLjQ2OQ0KCWMwLjI5NC0wLjI5MywwLjI5NC0wLjc2OCwwLTEuMDYyYy0wLjI5My0wLjI5My0wLjc2OC0wLjI5My0xLjA2MSwwbC00LDRjLTAuMjkzLDAuMjkzLTAuMjkzLDAuNzY4LDAsMS4wNjJsNCw0DQoJQzkuODY2LDEyLjY3OCwxMC4wNTksMTIuNzUsMTAuMjUsMTIuNzV6Ii8+DQo8L3N2Zz4NCjwvc3ZnPgo8c3ZnIHg9IjIycHgiIHk9IjBweCIgd2lkdGg9IjIycHgiIGhlaWdodD0iMjJweCIKICAgICAgICAgICAgICAgICAgICBvbmNsaWNrPSJ6b29tY2xpY2soMS4yNSkiPjxyZWN0IHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjJweCIgCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PSIyMnB4IiBvbmNsaWNrPSJ6b29tY2xpY2soMS4yNSkiIGNsYXNzPSJidXR0b24iIC8+PHN2ZyB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KPHBhdGggZD0iTTEwLjI1MSw2Ljk4OWMwLDAuMjc2LTAuMjI1LDAuNS0wLjUsMC41aC0xLjV2MS41YzAsMC4yNzUtMC4yMjQsMC41LTAuNSwwLjVzLTAuNS0wLjIyNS0wLjUtMC41di0xLjVoLTEuNQ0KCWMtMC4yNzYsMC0wLjUtMC4yMjQtMC41LTAuNXMwLjIyNC0wLjUsMC41LTAuNWgxLjV2LTEuNWMwLTAuMjc2LDAuMjI0LTAuNSwwLjUtMC41czAuNSwwLjIyNCwwLjUsMC41djEuNWgxLjUNCglDMTAuMDI2LDYuNDg5LDEwLjI1MSw2LjcxMywxMC4yNTEsNi45ODl6IE0xNC43NzEsMTQuODU3Yy0wLjI3MywwLjIyNi0wLjY4NSwwLjE3OS0wLjkxOC0wLjEwNGwtMi44NTQtMy4zMzINCgljLTAuOTExLDAuNjY5LTIuMDMxLDEuMDY4LTMuMjQ3LDEuMDY4Yy0zLjAzNywwLTUuNS0yLjQ2My01LjUtNS41czIuNDYzLTUuNSw1LjUtNS41czUuNSwyLjQ2Myw1LjUsNS41DQoJYzAsMS4zNTctMC40OTQsMi41OTgtMS4zMSwzLjU1OGwyLjkwMSwzLjM4N0MxNS4wNzcsMTQuMjE4LDE1LjA0NiwxNC42MzIsMTQuNzcxLDE0Ljg1N3ogTTcuNzUxLDExLjQ4OWMyLjQ4MSwwLDQuNS0yLjAxOSw0LjUtNC41DQoJcy0yLjAxOS00LjUtNC41LTQuNXMtNC41LDIuMDE5LTQuNSw0LjVTNS4yNywxMS40ODksNy43NTEsMTEuNDg5eiIvPg0KPC9zdmc+DQo8L3N2Zz4KPHN2ZyB4PSI0NHB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjIycHgiCiAgICAgICAgICAgICAgICAgICAgb25jbGljaz0iem9vbWNsaWNrKDAuOCkiPjxyZWN0IHg9IjBweCIgeT0iMHB4IiB3aWR0aD0iMjJweCIgCiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0PSIyMnB4IiBvbmNsaWNrPSJ6b29tY2xpY2soMC44KSIgY2xhc3M9ImJ1dHRvbiIgLz48c3ZnIHZpZXdCb3g9IjAgMCAxNiAxNiI+DQo8cGF0aCBkPSJNMTAuMjUxLDYuOTg5YzAsMC4yNzYtMC4yMjUsMC41LTAuNSwwLjVoLTRjLTAuMjc2LDAtMC41LTAuMjI0LTAuNS0wLjVsMCwwYzAtMC4yNzYsMC4yMjQtMC41LDAuNS0wLjVoNA0KCUMxMC4wMjYsNi40ODksMTAuMjUxLDYuNzEzLDEwLjI1MSw2Ljk4OUwxMC4yNTEsNi45ODl6IE0xNC43NzEsMTQuODU3Yy0wLjI3MywwLjIyNi0wLjY4NSwwLjE3OS0wLjkxOC0wLjEwNGwtMi44NTQtMy4zMzINCgljLTAuOTExLDAuNjY5LTIuMDMxLDEuMDY4LTMuMjQ3LDEuMDY4Yy0zLjAzNywwLTUuNS0yLjQ2My01LjUtNS41czIuNDYzLTUuNSw1LjUtNS41czUuNSwyLjQ2Myw1LjUsNS41DQoJYzAsMS4zNTctMC40OTQsMi41OTgtMS4zMSwzLjU1OGwyLjkwMSwzLjM4N0MxNS4wNzcsMTQuMjE4LDE1LjA0NiwxNC42MzIsMTQuNzcxLDE0Ljg1N3ogTTcuNzUxLDExLjQ4OWMyLjQ4MSwwLDQuNS0yLjAxOSw0LjUtNC41DQoJcy0yLjAxOS00LjUtNC41LTQuNXMtNC41LDIuMDE5LTQuNSw0LjVTNS4yNywxMS40ODksNy43NTEsMTEuNDg5eiIvPg0KPC9zdmc+DQo8L3N2Zz4KPHN2ZyB4PSI2NnB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiBoZWlnaHQ9IjIycHgiCiAgICAgICAgICAgICAgICAgICAgb25jbGljaz0icGFuY2xpY2soLTUwLCAwKSI+PHJlY3QgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIyMnB4IiAKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ9IjIycHgiIG9uY2xpY2s9InBhbmNsaWNrKC01MCwgMCkiIGNsYXNzPSJidXR0b24iIC8+PHN2ZyB2aWV3Qm94PSIwIDAgMTYgMTYiPg0KPHBhdGggZD0iTTYuMjQ5LDEyLjc1Yy0wLjE5MSwwLTAuMzg0LTAuMDcyLTAuNTI5LTAuMjE5Yy0wLjI5NC0wLjI5NS0wLjI5NC0wLjc3LDAtMS4wNjJMOS4xODgsOEw1LjcyLDQuNTMxDQoJYy0wLjI5NC0wLjI5My0wLjI5NC0wLjc2OCwwLTEuMDYyYzAuMjkzLTAuMjkzLDAuNzY4LTAuMjkzLDEuMDYxLDBsNCw0YzAuMjkzLDAuMjkzLDAuMjkzLDAuNzY4LDAsMS4wNjJsLTQsNA0KCUM2LjYzMywxMi42NzgsNi40NCwxMi43NSw2LjI0OSwxMi43NXoiLz4NCjwvc3ZnPg0KPC9zdmc+Cjwvc3ZnPgo8cmVjdCB4PSIyMCIgeT0iMTA1IiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC0wIiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDApIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDI1NSkiIC8+Cjx0ZXh0IHg9IjY0IiB5PSIxMzAiIGNsYXNzPSJzdGF0ZW1hcC1sZWdlbmRsYWJlbCBzYW5zc2VyaWYiPnN0YWJsZS1yZWxlYXNlPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMTQwIiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC0xIiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDEpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMjU1KSIgLz4KPHRleHQgeD0iNjQiIHk9IjE2NSIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZGxhYmVsIHNhbnNzZXJpZiI+Ym91bmNpbmctcmVsLXRvLXByZTwvdGV4dD4KPHJlY3QgeD0iMjAiIHk9IjE3NSIgd2lkdGg9Ijg4IiBoZWlnaHQ9IjE1IiBpZD0ic3RhdGVtYXAtbGVnZW5kLTAtMiIgb25jbGljaz0ibGVnZW5kY2xpY2soZXZ0LCAwLCAyKSIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZCIgc3R5bGU9ImZpbGw6cmdiKDE2NSwgNDIsIDQyKSIgLz4KPHRleHQgeD0iNjQiIHk9IjIwMCIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZGxhYmVsIHNhbnNzZXJpZiI+Ym91bmNpbmctcmVsLXRvLXJlbDwvdGV4dD4KPHJlY3QgeD0iMjAiIHk9IjIxMCIgd2lkdGg9Ijg4IiBoZWlnaHQ9IjE1IiBpZD0ic3RhdGVtYXAtbGVnZW5kLTAtMyIgb25jbGljaz0ibGVnZW5kY2xpY2soZXZ0LCAwLCAzKSIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZCIgc3R5bGU9ImZpbGw6cmdiKDI1NSwgMjU1LCAyNTUpIiAvPgo8dGV4dCB4PSI2NCIgeT0iMjM1IiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kbGFiZWwgc2Fuc3NlcmlmIj5lbWl0LXJlbGVhc2U8L3RleHQ+CjxyZWN0IHg9IjIwIiB5PSIyNDUiIHdpZHRoPSI4OCIgaGVpZ2h0PSIxNSIgaWQ9InN0YXRlbWFwLWxlZ2VuZC0wLTQiIG9uY2xpY2s9ImxlZ2VuZGNsaWNrKGV2dCwgMCwgNCkiIGNsYXNzPSJzdGF0ZW1hcC1sZWdlbmQiIHN0eWxlPSJmaWxsOnJnYigxMjgsIDEyOCwgMTI4KSIgLz4KPHRleHQgeD0iNjQiIHk9IjI3MCIgY2xhc3M9InN0YXRlbWFwLWxlZ2VuZGxhYmVsIHNhbnNzZXJpZiI+c3RhYmxlLXByZXNzPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMjgwIiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC01IiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDUpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAyNTUsIDApIiAvPgo8dGV4dCB4PSI2NCIgeT0iMzA1IiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kbGFiZWwgc2Fuc3NlcmlmIj5ib3VuY2luZy1wcmUtdG8tcHJlPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMzE1IiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC02IiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDYpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMjU1LCAxNjUsIDApIiAvPgo8dGV4dCB4PSI2NCIgeT0iMzQwIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kbGFiZWwgc2Fuc3NlcmlmIj5ib3VuY2luZy1wcmUtdG8tcmVsPC90ZXh0Pgo8cmVjdCB4PSIyMCIgeT0iMzUwIiB3aWR0aD0iODgiIGhlaWdodD0iMTUiIGlkPSJzdGF0ZW1hcC1sZWdlbmQtMC03IiBvbmNsaWNrPSJsZWdlbmRjbGljayhldnQsIDAsIDcpIiBjbGFzcz0ic3RhdGVtYXAtbGVnZW5kIiBzdHlsZT0iZmlsbDpyZ2IoMCwgMCwgMCkiIC8+Cjx0ZXh0IHg9IjY0IiB5PSIzNzUiIGNsYXNzPSJzdGF0ZW1hcC1sZWdlbmRsYWJlbCBzYW5zc2VyaWYiPmVtaXQtcHJlc3M8L3RleHQ+CjxnIGlkPSJzdGF0ZW1hcC10YWdib3giPjwvZz4KPGcgaWQ9InN0YXRlbWFwLXRhZ2JveC1zZWxlY3QiPjwvZz4KPC9zdmc+Cg==" /></p>
<p>Yes this is a statemap of me smashing the home row like a monkey on a 
typewriter, why do you ask?
So this one is quite interesting because it has a similar problem, in that the
yellow segment is about 6ms long, and it displays another related problem,
that first orange segment is about 12ms long <em>before</em> reaching the yellow
segment.
As it turns out the parameter affects the minimum time in all states with a
color, so all states with bouncing in their name, curing this ill as well.</p>

        </main>
    </body>
</html>
